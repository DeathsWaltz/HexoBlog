{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/favicon.ico","path":"favicon.ico","modified":0,"renderable":0},{"_id":"themes/cactus/source/css/rtl.styl","path":"css/rtl.styl","modified":0,"renderable":1},{"_id":"themes/cactus/source/images/apple-touch-icon.png","path":"images/apple-touch-icon.png","modified":0,"renderable":1},{"_id":"themes/cactus/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/cactus/source/images/favicon-192x192.png","path":"images/favicon-192x192.png","modified":0,"renderable":1},{"_id":"themes/cactus/source/images/logo.png","path":"images/logo.png","modified":0,"renderable":1},{"_id":"themes/cactus/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/cactus/source/js/search.js","path":"js/search.js","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/clipboard/clipboard.min.js","path":"lib/clipboard/clipboard.min.js","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.woff","path":"lib/vazir-font/Vazir-Black.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.woff2","path":"lib/vazir-font/Vazir-Black.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.woff","path":"lib/vazir-font/Vazir-Bold.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.woff2","path":"lib/vazir-font/Vazir-Bold.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.woff","path":"lib/vazir-font/Vazir-Light.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.woff2","path":"lib/vazir-font/Vazir-Light.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.woff","path":"lib/vazir-font/Vazir-Medium.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.woff2","path":"lib/vazir-font/Vazir-Medium.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.woff","path":"lib/vazir-font/Vazir-Thin.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.woff2","path":"lib/vazir-font/Vazir-Thin.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.woff","path":"lib/vazir-font/Vazir.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.woff2","path":"lib/vazir-font/Vazir.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/font-face.css","path":"lib/vazir-font/font-face.css","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/jquery/jquery.min.js","path":"lib/jquery/jquery.min.js","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.eot","path":"lib/vazir-font/Vazir-Black.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.ttf","path":"lib/vazir-font/Vazir-Black.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.eot","path":"lib/vazir-font/Vazir-Bold.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.ttf","path":"lib/vazir-font/Vazir-Bold.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.eot","path":"lib/vazir-font/Vazir-Light.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.ttf","path":"lib/vazir-font/Vazir-Light.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.ttf","path":"lib/vazir-font/Vazir-Medium.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.eot","path":"lib/vazir-font/Vazir-Medium.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.eot","path":"lib/vazir-font/Vazir-Thin.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.ttf","path":"lib/vazir-font/Vazir-Thin.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.eot","path":"lib/vazir-font/Vazir.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.ttf","path":"lib/vazir-font/Vazir.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.woff2","path":"lib/font-awesome/webfonts/fa-brands-400.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.eot","path":"lib/font-awesome/webfonts/fa-regular-400.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.ttf","path":"lib/font-awesome/webfonts/fa-regular-400.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.woff","path":"lib/font-awesome/webfonts/fa-regular-400.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.woff2","path":"lib/font-awesome/webfonts/fa-regular-400.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.woff2","path":"lib/font-awesome/webfonts/fa-solid-900.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/justified-gallery/css/justifiedGallery.min.css","path":"lib/justified-gallery/css/justifiedGallery.min.css","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/justified-gallery/js/jquery.justifiedGallery.min.js","path":"lib/justified-gallery/js/jquery.justifiedGallery.min.js","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/css/all.min.css","path":"lib/font-awesome/css/all.min.css","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.woff","path":"lib/font-awesome/webfonts/fa-brands-400.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.eot","path":"lib/font-awesome/webfonts/fa-brands-400.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.ttf","path":"lib/font-awesome/webfonts/fa-brands-400.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.ttf","path":"lib/font-awesome/webfonts/fa-solid-900.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.woff","path":"lib/font-awesome/webfonts/fa-solid-900.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.svg","path":"lib/font-awesome/webfonts/fa-regular-400.svg","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.eot","path":"lib/font-awesome/webfonts/fa-solid-900.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-BoldItalic.ttf","path":"lib/meslo-LG/MesloLGM-BoldItalic.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Italic.ttf","path":"lib/meslo-LG/MesloLGM-Italic.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-BoldItalic.ttf","path":"lib/meslo-LG/MesloLGS-BoldItalic.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Italic.ttf","path":"lib/meslo-LG/MesloLGS-Italic.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Italic.ttf","path":"lib/meslo-LG/MesloLGL-Italic.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Bold.ttf","path":"lib/meslo-LG/MesloLGM-Bold.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-BoldItalic.ttf","path":"lib/meslo-LG/MesloLGL-BoldItalic.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Regular.ttf","path":"lib/meslo-LG/MesloLGL-Regular.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Bold.ttf","path":"lib/meslo-LG/MesloLGS-Bold.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Regular.ttf","path":"lib/meslo-LG/MesloLGS-Regular.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Bold.ttf","path":"lib/meslo-LG/MesloLGL-Bold.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Regular.ttf","path":"lib/meslo-LG/MesloLGM-Regular.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.svg","path":"lib/font-awesome/webfonts/fa-brands-400.svg","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.svg","path":"lib/font-awesome/webfonts/fa-solid-900.svg","modified":0,"renderable":1}],"Cache":[{"_id":"source/404.html","hash":"b080b815bee2cad5e44356a4658b73e85a0280d3","modified":1568246988976},{"_id":"themes/cactus/.gitignore","hash":"8d1ea5895c15244978ee32f4ef280124512d995a","modified":1568172820756},{"_id":"themes/cactus/.jshintrc","hash":"d6ee46102ed2ff00acb555557f47241b701e99a4","modified":1568172820756},{"_id":"themes/cactus/.stylintrc","hash":"8bbbee5eae70fbe7dd53c9ce43d244b47d58385b","modified":1568172820769},{"_id":"themes/cactus/LICENSE","hash":"06806c75801c9ae870a1b47d588ef8e00d3c7c94","modified":1568172820770},{"_id":"themes/cactus/README.md","hash":"9d2b515c089758f81db80c062cf53b8091006358","modified":1568172820771},{"_id":"themes/cactus/_config.yml","hash":"41db563465f70f44948724e1b39292cb3ebf5569","modified":1568193373407},{"_id":"themes/cactus/gulpfile.js","hash":"367c889c599c6595b9a2df0bbdcc1f8b1181b992","modified":1568172820772},{"_id":"themes/cactus/package.json","hash":"645ae67fde94dd1b78c4f6fdf3e91f3baf7b155c","modified":1568172820797},{"_id":"source/favicon.ico","hash":"6606244b893abf5048902b7edb7ae14cf720e660","modified":1568167225243},{"_id":"source/_posts/build-blog.md","hash":"2a377964ea2aaf75581f8625825233de7724cf95","modified":1568193478848},{"_id":"source/_posts/change-themes.md","hash":"1452777159783979d87d09c0d2bd232ea215a3a9","modified":1568193431356},{"_id":"source/_posts/hexo-github-pages-https.md","hash":"96675993615346e9d4273cc60f972668f1260b8d","modified":1568167225238},{"_id":"source/_posts/joehisaishi-wdo-2018-ch.md","hash":"18d266b9a185f25c000f7b5bcdc89bcbc1ee7fec","modified":1568167225240},{"_id":"source/_posts/layui-submit-question.md","hash":"0b523178e692eaf2729361ca2aed8602f7a9c774","modified":1568253967220},{"_id":"source/_posts/use-jenkins.md","hash":"f9d375f387e1540d47b7ccdc07603c9b900b4e5e","modified":1568253975456},{"_id":"source/_posts/pagerule.png","hash":"bb25b5f0e4ca3df7170a28cb266ca1a4b77238d4","modified":1568167225240},{"_id":"source/_posts/use-multi-datasource.md","hash":"eae49ce699ae166187b4abfa126be29aa23c3b44","modified":1568191901071},{"_id":"source/about/index.md","hash":"fab51153540a8db956b8b51c438cd5675cf1dbbb","modified":1568167225241},{"_id":"source/_posts/use-mycat.md","hash":"14c8849237e94a571a2b5ede9853060d3319cb8a","modified":1568192741830},{"_id":"source/categories/index-1.md","hash":"dacc668d49905572a52c83c43ed474244316a360","modified":1568175158512},{"_id":"source/categories/index.md","hash":"694c741e8ceba3287469011c00865df8a2984fa2","modified":1568167225242},{"_id":"source/search/index.md","hash":"1dce80623eb1fcb3186766e64128f18e5d8663bd","modified":1568174874822},{"_id":"source/tags/index-1.md","hash":"94604bf7942ff952856d8854a57799849c760ca0","modified":1568175172271},{"_id":"source/tags/index.md","hash":"9b473e88ba8795b93e81dd3f5c7281e1626fabd7","modified":1568167225244},{"_id":"themes/cactus/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1568172820734},{"_id":"themes/cactus/.git/config","hash":"bbfb2d2962522ab703a9b119c7306ce589ec6438","modified":1568172820742},{"_id":"themes/cactus/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1568172549440},{"_id":"themes/cactus/.git/index","hash":"1f4c4f80e308374c41b3d522cacc239f85457837","modified":1568179723501},{"_id":"themes/cactus/.git/packed-refs","hash":"bc4cbf0eda01b6c5ebf8d4962fcac81732dc6b40","modified":1568172820725},{"_id":"themes/cactus/languages/ca.yml","hash":"6f9897fe8c7b7bf23be7fa58c530602217aea898","modified":1568172820773},{"_id":"themes/cactus/languages/default.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1568172820774},{"_id":"themes/cactus/languages/en.yml","hash":"0a4985438ac00ef9f20f8836ac356a3436ff7552","modified":1568172820774},{"_id":"themes/cactus/languages/es.yml","hash":"56ddfd9081641c45272bdc2df750e41ab8b600bf","modified":1568172820775},{"_id":"themes/cactus/languages/fa.yml","hash":"05fb8dad765af2b9eec32582f5d277eb2735ffc3","modified":1568172820775},{"_id":"themes/cactus/languages/fr.yml","hash":"7e8269d0c2ca031b7c037168c9c3d45ec83b1d0e","modified":1568172820776},{"_id":"themes/cactus/languages/it.yml","hash":"501bfc9aed86964ee75354a805378740a02af799","modified":1568172820777},{"_id":"themes/cactus/languages/nl.yml","hash":"4c36921322e782775ccff9aec78d4261153cf5e5","modified":1568172820777},{"_id":"themes/cactus/languages/pl.yml","hash":"3677b782edd98986bb82568c6ff6c8b77140b75a","modified":1568172820778},{"_id":"themes/cactus/languages/ru.yml","hash":"47fb1672f36d5adadf2f6c3a5c4d1714f5bd563b","modified":1568172820779},{"_id":"themes/cactus/languages/pt-br.yml","hash":"417d25e3dae260a2503ec6a8f1b590fa00534b14","modified":1568172820778},{"_id":"themes/cactus/languages/tr.yml","hash":"7971cbff7f90ffe1dc40402be6332890be1ed2c7","modified":1568172820780},{"_id":"themes/cactus/languages/vi.yml","hash":"1a1dfc60e952c3429c038f69a9e0ca2057784fca","modified":1568172820780},{"_id":"themes/cactus/languages/zh-CN.yml","hash":"d4ee3ab34b7d34f51b81be813df92f123fafe39a","modified":1568172820781},{"_id":"themes/cactus/languages/zh-TW.yml","hash":"d02ac645f87c5841ff35499818654df85bd872f5","modified":1568172820782},{"_id":"themes/cactus/layout/archive.ejs","hash":"3009339c4258c63943a14a61481dcb358b63e98f","modified":1568172820794},{"_id":"themes/cactus/layout/index.ejs","hash":"2dc13298bb00497c575b1b819c5024f2eaf5923c","modified":1568172820795},{"_id":"themes/cactus/layout/page.ejs","hash":"1700d4f434170e1eeb0e2a9470fc3c0732b2ba7e","modified":1568172820796},{"_id":"themes/cactus/layout/layout.ejs","hash":"e14f83a23128ce0d4208f04f419363fd7d0cab18","modified":1568172820796},{"_id":"themes/cactus/layout/post.ejs","hash":"0d6d97deb5c0820fdc82a0b4caed4f64015f1fd8","modified":1568172820797},{"_id":"themes/cactus/scripts/merge-configs.js","hash":"98b79403945fa7f8dc177e6da283681677d02567","modified":1568172820798},{"_id":"themes/cactus/scripts/meta.js","hash":"6b05bc75ab2478a1f01deab46919164895eb1f6d","modified":1568172820799},{"_id":"themes/cactus/scripts/page_title.js","hash":"03b5c8b6215f0b305327e8d9b5d49add83b4b95f","modified":1568172820800},{"_id":"themes/cactus/scripts/thumbnail.js","hash":"3d841aa267026703a5cc29f4ffbb613f0a2bbd45","modified":1568172820801},{"_id":"source/_posts/build-blog/Githubpicture.png","hash":"c013fb3cd2dc82adca7cc4f15061b0b269f6ffb5","modified":1568167225237},{"_id":"source/_posts/hexo-github-pages-https/pagerule.png","hash":"bb25b5f0e4ca3df7170a28cb266ca1a4b77238d4","modified":1568167225239},{"_id":"themes/cactus/.git/hooks/fsmonitor-watchman.sample","hash":"f7c0aa40cb0d620ff0bca3efe3521ec79e5d7156","modified":1568172549453},{"_id":"themes/cactus/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1568172549441},{"_id":"themes/cactus/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1568172549441},{"_id":"themes/cactus/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1568172549453},{"_id":"themes/cactus/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1568172549454},{"_id":"themes/cactus/.git/hooks/pre-commit.sample","hash":"33729ad4ce51acda35094e581e4088f3167a0af8","modified":1568172549455},{"_id":"themes/cactus/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1568172549455},{"_id":"themes/cactus/.git/hooks/pre-rebase.sample","hash":"288efdc0027db4cfd8b7c47c4aeddba09b6ded12","modified":1568172549456},{"_id":"themes/cactus/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1568172549456},{"_id":"themes/cactus/.git/hooks/prepare-commit-msg.sample","hash":"2584806ba147152ae005cb675aa4f01d5d068456","modified":1568172549457},{"_id":"themes/cactus/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1568172549458},{"_id":"themes/cactus/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1568172549459},{"_id":"themes/cactus/.git/logs/HEAD","hash":"904d9be614a44fbb4f42b87254f460538e992a8b","modified":1568172820737},{"_id":"themes/cactus/layout/_partial/comments.ejs","hash":"fc4bc4421f2ed388b30fd3e63cba30f66c0df331","modified":1568172820784},{"_id":"themes/cactus/layout/_partial/footer.ejs","hash":"c5e082095facfb4de2944cdb11f44c8a4f68f2e5","modified":1568172820784},{"_id":"themes/cactus/layout/_partial/head.ejs","hash":"63ebdd4d96e96e48cdde724b1099710f4ed2af79","modified":1568172820785},{"_id":"themes/cactus/layout/_partial/header.ejs","hash":"4ebbfc58eac02acd2940390e7b4e52bda4e1d402","modified":1568172820786},{"_id":"themes/cactus/layout/_partial/pagination.ejs","hash":"f561e68e9dd10ae1cf2e79e8425f7e9b86ed723e","modified":1568172820787},{"_id":"themes/cactus/layout/_partial/styles.ejs","hash":"b7cf29a0cbe44d93766f89113ba3cfd832e75dfb","modified":1568172820794},{"_id":"themes/cactus/layout/_partial/scripts.ejs","hash":"cb2ea8a2e473a3109e3db1ac85b683bafa6ff127","modified":1568172820793},{"_id":"themes/cactus/layout/_partial/search.ejs","hash":"12dba799ae5736dfbf1548e1923bbb7447de8a6d","modified":1568172820793},{"_id":"themes/cactus/source/css/_extend.styl","hash":"739b6942438fec016bf489d9729382735927e3f0","modified":1568172820805},{"_id":"themes/cactus/source/css/_fonts.styl","hash":"5c1727836f5d6076a65cf91dbbeaba8d16b5132b","modified":1568172820806},{"_id":"themes/cactus/source/css/_mixins.styl","hash":"37093d2a554283ab652b59e5e0ff9b542edced0f","modified":1568172820868},{"_id":"themes/cactus/source/css/_util.styl","hash":"1c7bed7376f04d7b77d817e132aee08cf65e6395","modified":1568172820878},{"_id":"themes/cactus/source/css/_variables.styl","hash":"18f57fe9dada74c458ab3e3e7ba829ea535e75e7","modified":1568172820879},{"_id":"themes/cactus/source/css/rtl.styl","hash":"ff61ec57dada4914e8cfba84ddecd04a1b333638","modified":1568172820880},{"_id":"themes/cactus/source/images/apple-touch-icon.png","hash":"75c1369b3a20ca1e9209c931cdfec34eaa5a0126","modified":1568179529186},{"_id":"themes/cactus/source/css/style.styl","hash":"a907b87fb74d9ee0dcab0d1d8a2d5e22c4c1f5c7","modified":1568172820880},{"_id":"themes/cactus/source/images/favicon-192x192.png","hash":"75c1369b3a20ca1e9209c931cdfec34eaa5a0126","modified":1568179529186},{"_id":"themes/cactus/source/images/logo.png","hash":"750f2e3d3333f01a66d3bdfa86fc9561105d1005","modified":1568178697293},{"_id":"themes/cactus/source/js/main.js","hash":"bad144490654ac2518d15e82f426ecbd66b22fd5","modified":1568172820887},{"_id":"themes/cactus/source/js/search.js","hash":"e17274ed3347055bf6432a712d880ec68411944f","modified":1568172820888},{"_id":"themes/cactus/.git/refs/heads/master","hash":"ffd29f6409dbddc76f20ff2ef4101a781cef6d56","modified":1568172820737},{"_id":"themes/cactus/layout/_partial/post/actions_desktop.ejs","hash":"684ab77be954f73853ee9407567b4c5c0ef6af74","modified":1568172820788},{"_id":"themes/cactus/layout/_partial/post/category.ejs","hash":"75567a2de037857cb3e4c9fc5fc87094a23fb119","modified":1568172820789},{"_id":"themes/cactus/layout/_partial/post/actions_mobile.ejs","hash":"c8d06799755147a64cdd0cb2728d3ce46a044dae","modified":1568172820788},{"_id":"themes/cactus/layout/_partial/post/date.ejs","hash":"bb624f77d29594b8d3a7dd82f1aee6eead6b9b61","modified":1568172820790},{"_id":"themes/cactus/layout/_partial/post/gallery.ejs","hash":"725ab823c2fb4a5e444eca3afa617d88f305ef71","modified":1568172820791},{"_id":"themes/cactus/layout/_partial/post/share.ejs","hash":"062bdcea5efc37cd7cd3478e4ff0a97db6be3fb1","modified":1568172820791},{"_id":"themes/cactus/layout/_partial/post/tag.ejs","hash":"98fe03d5a8835dbc22869d519cc5b5f48808b1e5","modified":1568172820792},{"_id":"themes/cactus/layout/_partial/post/title.ejs","hash":"67da1757316408a72393e6d2aab4ec635e1d30c1","modified":1568172820792},{"_id":"themes/cactus/source/css/_colors/classic.styl","hash":"750cae11fd67684c0b9f73892e9b4dc0b18e6e59","modified":1568172820803},{"_id":"themes/cactus/source/css/_colors/dark.styl","hash":"2c949ae926ae73ef5e5e7b7ebe8ba173d6afd234","modified":1568172820803},{"_id":"themes/cactus/source/css/_colors/light.styl","hash":"9d6e813e1612dd51f9e41038376348c561bd33bd","modified":1568172820804},{"_id":"themes/cactus/source/css/_colors/white.styl","hash":"6aef2765112d3daa32fb770dc7c5ea478c7baf3d","modified":1568172820805},{"_id":"themes/cactus/source/css/_highlight/agate.styl","hash":"fc289ba8f47ead6331ec3a51533cfa93251c5634","modified":1568172820807},{"_id":"themes/cactus/source/css/_highlight/androidstudio.styl","hash":"4d67bdab6cc9c614486ca42f98199a04d053e7f0","modified":1568172820808},{"_id":"themes/cactus/source/css/_highlight/arduino-light.styl","hash":"591962bfc758a521b4cb907750c19a1a2423b4d5","modified":1568172820808},{"_id":"themes/cactus/source/css/_highlight/arta.styl","hash":"262167aaebcf28de7f85af7ac77a76fa1fa284f7","modified":1568172820809},{"_id":"themes/cactus/source/css/_highlight/ascetic.styl","hash":"ca087a3c70998c7ac6b0b42d5cf7a653b8707591","modified":1568172820809},{"_id":"themes/cactus/source/css/_highlight/atelier-cave-dark.styl","hash":"7e83c7f2acaaaa98864660afe2794745c36c8e51","modified":1568172820810},{"_id":"themes/cactus/source/css/_highlight/atelier-cave-light.styl","hash":"f47de0b9d66617728f68096ed48371dd6bb9e67a","modified":1568172820811},{"_id":"themes/cactus/source/css/_highlight/atelier-dune-dark.styl","hash":"68584ed0e99c7d0e49ef8a2e67cd4dcdad359de4","modified":1568172820812},{"_id":"themes/cactus/source/css/_highlight/atelier-dune-light.styl","hash":"657fe215931fd06e21b56374df699a94890f7ab4","modified":1568172820812},{"_id":"themes/cactus/source/css/_highlight/atelier-estuary-dark.styl","hash":"1cecd13e0d6b24042ff86372f0596c1441bb834a","modified":1568172820813},{"_id":"themes/cactus/source/css/_highlight/atelier-estuary-light.styl","hash":"2b416a0567a53aa0fa8898b196ddd44315c1a5f3","modified":1568172820814},{"_id":"themes/cactus/source/css/_highlight/atelier-forest-dark.styl","hash":"a741eba35cdfe2cfd67dfbf109655f253d6b4795","modified":1568172820814},{"_id":"themes/cactus/source/css/_highlight/atelier-forest-light.styl","hash":"8d7c7242974aa2454fa792c5d7a47c5f9632355a","modified":1568172820815},{"_id":"themes/cactus/source/css/_highlight/atelier-heath-dark.styl","hash":"f186b357dcebded89b7bcc77389b2cff76533d72","modified":1568172820816},{"_id":"themes/cactus/source/css/_highlight/atelier-heath-light.styl","hash":"c1db353e8613607580d40b12ddc162d029560576","modified":1568172820817},{"_id":"themes/cactus/source/css/_highlight/atelier-lakeside-dark.styl","hash":"802979cea895a0a384645cb30a43de9572cb0e3f","modified":1568172820817},{"_id":"themes/cactus/source/css/_highlight/atelier-lakeside-light.styl","hash":"8659eaae6a0c2e00b4b9199803e50adf4ff0128d","modified":1568172820818},{"_id":"themes/cactus/source/css/_highlight/atelier-plateau-dark.styl","hash":"0d51ddc580ccb0a291271fa9632bc91dab632df6","modified":1568172820819},{"_id":"themes/cactus/source/css/_highlight/atelier-plateau-light.styl","hash":"96181544eeadc5b0749229f11607e7c01f81e078","modified":1568172820820},{"_id":"themes/cactus/source/css/_highlight/atelier-savanna-dark.styl","hash":"bbad7a9512b4873294e73ce806e36e43973e6ed8","modified":1568172820821},{"_id":"themes/cactus/source/css/_highlight/atelier-savanna-light.styl","hash":"8a5207a0c30262a0bf5e1a41411a306f7a89a7e7","modified":1568172820821},{"_id":"themes/cactus/source/css/_highlight/atelier-seaside-dark.styl","hash":"2f008271299042f2443bca98c9bcadbc8c45e837","modified":1568172820822},{"_id":"themes/cactus/source/css/_highlight/atelier-seaside-light.styl","hash":"08e2df313c272d5c70c93e713639663c168180d0","modified":1568172820823},{"_id":"themes/cactus/source/css/_highlight/atelier-sulphurpool-dark.styl","hash":"18dcb00ab9c62eb810d492047214331c51bb654f","modified":1568172820824},{"_id":"themes/cactus/source/css/_highlight/brown-paper.styl","hash":"d14846542a26b75fd26df5b5df6c5493733f73f6","modified":1568172820825},{"_id":"themes/cactus/source/css/_highlight/atelier-sulphurpool-light.styl","hash":"add3d88c9d12567dcfae7a8e49984d119fc72227","modified":1568172820825},{"_id":"themes/cactus/source/css/_highlight/brown-papersq.png","hash":"3a1332ede3a75a3d24f60b6ed69035b72da5e182","modified":1568172820826},{"_id":"themes/cactus/source/css/_highlight/codepen-embed.styl","hash":"1de45e603e2c71c7f6b0c1372a3ba00b1bc153a8","modified":1568172820827},{"_id":"themes/cactus/source/css/_highlight/color-brewer.styl","hash":"9c4905eab730d0b389e6972e907057577f7e25f1","modified":1568172820828},{"_id":"themes/cactus/source/css/_highlight/dark.styl","hash":"98d7884806838a0b46132d759d60ac27c0c4bd9c","modified":1568172820829},{"_id":"themes/cactus/source/css/_highlight/darkula.styl","hash":"8965ad6920601c275ca97e617beff5536925a266","modified":1568172820830},{"_id":"themes/cactus/source/css/_highlight/docco.styl","hash":"7bd3389ce16d20488ab336d557056cc703c921c7","modified":1568172820832},{"_id":"themes/cactus/source/css/_highlight/foundation.styl","hash":"28c59a31467c33bd51cbf3b6085782c2a724ff6c","modified":1568172820834},{"_id":"themes/cactus/source/css/_highlight/far.styl","hash":"8da83d66724f2ce508a40f21b4f6dc0d704be562","modified":1568172820833},{"_id":"themes/cactus/source/css/_highlight/github-gist.styl","hash":"71f4b0fca91a587e6eba15a5306dca963bb8f441","modified":1568172820835},{"_id":"themes/cactus/source/css/_highlight/github.styl","hash":"a84eb710b302006120c3e7f8ca18f9e6fbc231c3","modified":1568172820836},{"_id":"themes/cactus/source/css/_highlight/googlecode.styl","hash":"7f5082ae008925a23eb713f160773fe647eb3ff7","modified":1568172820836},{"_id":"themes/cactus/source/css/_highlight/grayscale.styl","hash":"c83804abe39faebd80f8f4ff64fbd7137674cb1c","modified":1568172820837},{"_id":"themes/cactus/source/css/_highlight/gruvbox-dark.styl","hash":"f66403ce77dcb16b1f98a5061b72f7581630d69f","modified":1568172820843},{"_id":"themes/cactus/source/css/_highlight/highlightjs.styl","hash":"fd796a58c5d4590cda67c998187933788d45f30a","modified":1568172820844},{"_id":"themes/cactus/source/css/_highlight/hybrid.styl","hash":"4906456025787de04b48a87c42bb704c5ff67065","modified":1568172820845},{"_id":"themes/cactus/source/css/_highlight/hopscotch.styl","hash":"dd3c78c42d4a865f11623235e5e5f6829d789706","modified":1568172820844},{"_id":"themes/cactus/source/css/_highlight/idea.styl","hash":"e284c1760e8da0848f56cd5601d867ceeb0192d7","modified":1568172820846},{"_id":"themes/cactus/source/css/_highlight/index.styl","hash":"36c44375229613a5bb9ee84a8e90214978070439","modified":1568172820846},{"_id":"themes/cactus/source/css/_highlight/ir-black.styl","hash":"aa31b30069ebee39e2c3ebb75e2c96ba8678eb14","modified":1568172820847},{"_id":"themes/cactus/source/css/_highlight/kimbie.light.styl","hash":"e901738455ec9a1bddde7b62bbd8595de6033e1e","modified":1568172820849},{"_id":"themes/cactus/source/css/_highlight/kimbie.dark.styl","hash":"3b998c640eeb2c6192fee24bc78b4137de475dd7","modified":1568172820848},{"_id":"themes/cactus/source/css/_highlight/kimbie.styl","hash":"13113af220dfed09cb49d85102babb352c3eff97","modified":1568172820850},{"_id":"themes/cactus/source/css/_highlight/magula.styl","hash":"ab179306c12a1cf2949482beaca328e379ef034a","modified":1568172820851},{"_id":"themes/cactus/source/css/_highlight/mono-blue.styl","hash":"14fb8678739b77f35771b6d63101ddbf1e7a9fbc","modified":1568172820851},{"_id":"themes/cactus/source/css/_highlight/monokai-sublime.styl","hash":"84a27bd29d939105d65f4164c219d6cc2e09ae60","modified":1568172820852},{"_id":"themes/cactus/source/css/_highlight/monokai.styl","hash":"c3a3bfae1eb864505fbc8748db734600057af1af","modified":1568172820853},{"_id":"themes/cactus/source/css/_highlight/obsidian.styl","hash":"efba069860181d2b709e1548dd16cf102ca267fa","modified":1568172820853},{"_id":"themes/cactus/source/css/_highlight/paraiso-dark.styl","hash":"50f1cee8a5b3b165b4184ead0a99dc564b62ef4f","modified":1568172820854},{"_id":"themes/cactus/source/css/_highlight/paraiso-light.styl","hash":"e428e8202b01e83b0f018a96058d806e7f4c76bf","modified":1568172820854},{"_id":"themes/cactus/source/css/_highlight/paraiso.styl","hash":"846a06a57fa0b3db7f83ec7ac2bf34911f32cf66","modified":1568172820855},{"_id":"themes/cactus/source/css/_highlight/pojoaque.jpg","hash":"c5fe6533b88b21f8d90d3d03954c6b29baa67791","modified":1568172820856},{"_id":"themes/cactus/source/css/_highlight/pojoaque.styl","hash":"4d4a9360c35f3c5a0c5b9b49a1f2284e7e21317b","modified":1568172820857},{"_id":"themes/cactus/source/css/_highlight/railscasts.styl","hash":"5dc9ce33cecee87fe9ca8f2ed9342602194484ec","modified":1568172820857},{"_id":"themes/cactus/source/css/_highlight/rainbow.styl","hash":"95246afef181bd96f9adb1a2e84fb3ef302d4598","modified":1568172820858},{"_id":"themes/cactus/source/css/_highlight/school-book.png","hash":"711ec983c874e093bb89eb77afcbdf6741fa61ee","modified":1568172820858},{"_id":"themes/cactus/source/css/_highlight/school-book.styl","hash":"186c37e9c39e65aa291cce3317e35904693598d1","modified":1568172820859},{"_id":"themes/cactus/source/css/_highlight/solarized-dark.styl","hash":"9fc9400d3a8cae97eb5761c284140acb0f847538","modified":1568172820860},{"_id":"themes/cactus/source/css/_highlight/solarized-light.styl","hash":"bb04944fc06c12ecd7b56ad933dbedde60c2259a","modified":1568172820860},{"_id":"themes/cactus/source/css/_highlight/sunburst.styl","hash":"e6e4c009b10b9805f0c593446bf013edec47d146","modified":1568172820861},{"_id":"themes/cactus/source/css/_highlight/tomorrow-night-blue.styl","hash":"92f4423d4964fcfe34ff7ca6cb21012b5738c697","modified":1568172820862},{"_id":"themes/cactus/source/css/_highlight/tomorrow-night-bright.styl","hash":"e6b025b247e4027fb3c1b7833588f5a5b04a549c","modified":1568172820863},{"_id":"themes/cactus/source/css/_highlight/tomorrow-night-eighties.styl","hash":"8b16876cf205111d5d5454100de712bc3ea8f477","modified":1568172820863},{"_id":"themes/cactus/source/css/_highlight/tomorrow-night.styl","hash":"eb8441364bb1664ecebde77b965dc36c91133aa0","modified":1568172820864},{"_id":"themes/cactus/source/css/_highlight/tomorrow.styl","hash":"502335f0fac07ed74ca78207bcf3ef8dd2252cf6","modified":1568172820865},{"_id":"themes/cactus/source/css/_highlight/vs.styl","hash":"14fbb0c43af440a290280b26968c8a5c0786b27f","modified":1568172820866},{"_id":"themes/cactus/source/css/_highlight/xcode.styl","hash":"5fa8999c7f807c1aae29c7a1cdf681678576fb69","modified":1568172820866},{"_id":"themes/cactus/source/css/_partial/archive.styl","hash":"c89529b82ff8bd059384aedf36e7690a9a67da7a","modified":1568172820869},{"_id":"themes/cactus/source/css/_highlight/zenburn.styl","hash":"f63534764dd6598e81177d64714a184f98153b11","modified":1568172820867},{"_id":"themes/cactus/source/css/_partial/article.styl","hash":"1101e1dd5a763bc415b60fa66471a913f6ebfa40","modified":1568172820870},{"_id":"themes/cactus/source/css/_partial/categories.styl","hash":"92fffe2baacb9d19021b3d120d2038417ca466df","modified":1568172820871},{"_id":"themes/cactus/source/css/_partial/comments.styl","hash":"6e839bae0ddc11447579c34541e79b50d3670bbd","modified":1568172820871},{"_id":"themes/cactus/source/css/_partial/footer.styl","hash":"60e6220a944859f1cd0b73b301bdfea6d017c96f","modified":1568172820872},{"_id":"themes/cactus/source/css/_partial/header.styl","hash":"7d5aa9a75d48ae9e24643829af47a55577a8bd5f","modified":1568172820872},{"_id":"themes/cactus/source/css/_partial/index.styl","hash":"4a0da5d7052204b23d390a7f76cdc903b9eef52b","modified":1568172820873},{"_id":"themes/cactus/source/css/_partial/pagination.styl","hash":"4ff9755163aae6039bb72eac8360bc1c50fa26b6","modified":1568172820874},{"_id":"themes/cactus/source/css/_partial/search.styl","hash":"680ea535e5a20c01a31bee4d3eb680b86267a281","modified":1568172820876},{"_id":"themes/cactus/source/css/_partial/tags.styl","hash":"7a2f9051b21bce525ecb71799d37c4b65a4f9171","modified":1568172820877},{"_id":"themes/cactus/source/css/_partial/tooltip.styl","hash":"6cb13a9f4a7c01aa7ab8f73739a7d385377c5465","modified":1568172820878},{"_id":"themes/cactus/source/lib/clipboard/clipboard.min.js","hash":"dc144353ec85169bb3c5f3c6d68b4e75f9bf28ea","modified":1568172820890},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.woff","hash":"37443d0040f0d7af381c955e4c15919a15d0349e","modified":1568172820970},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.woff2","hash":"0a257c8b60e0f20802c1dc8daeed2d3cb0d44f17","modified":1568172820971},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.woff","hash":"df15fd1e74b6f4a50bea57e2b44d9627f38495b5","modified":1568172820975},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.woff2","hash":"62447a951d48b21c4696ae72df4bc4adef636e26","modified":1568172820976},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.woff","hash":"32ae5c0d1d5943c8bb8e0f6ab07c3269c6f8b8a8","modified":1568172820980},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.woff2","hash":"ef07a250766fea840c1049e67c0405d9216ee0a8","modified":1568172820981},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.woff","hash":"f5653059b2a5929516e4aab02329a978600b9b67","modified":1568172820986},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.woff2","hash":"668400ae92700965f03f2371faaee0ab8c8347c3","modified":1568172820987},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.woff","hash":"ad4d46a99a1daf6353c86c79ac3a2b030213859c","modified":1568172820991},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.woff2","hash":"c3be79b553ec394db71268d604b1d29183b867dc","modified":1568172820992},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.woff","hash":"bbee70033f0f5882e9869e417b69c6a38f56f187","modified":1568172820996},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.woff2","hash":"30ce165216db078951a690a6ad665b9b78f5dd81","modified":1568172820996},{"_id":"themes/cactus/source/lib/vazir-font/font-face.css","hash":"b75063e015641d22130bb8be3f176d7c20533aad","modified":1568172820997},{"_id":"themes/cactus/.git/objects/pack/pack-5c44ea2445e8ccc9466a69cf32397c7a8642d704.idx","hash":"956e34aca1e8c2b13dc3da496ea644a623920cb0","modified":1568172820646},{"_id":"themes/cactus/source/lib/jquery/jquery.min.js","hash":"0c3192b500a4fd550e483cf77a49806a5872185b","modified":1568172820919},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.eot","hash":"13d026ff857c853cbd0dc519b6e58669db309441","modified":1568172820967},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.ttf","hash":"594dc3344ad14903c247615427d1009709f0f5a4","modified":1568172820969},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.eot","hash":"f76ec625e15522ff60d21f7a9a3b71c65bc27556","modified":1568172820972},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.ttf","hash":"2e6c9df9f775373fb1988ae8529aa8f05313dae6","modified":1568172820974},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.eot","hash":"3edffd7bb61eee8cd46b57225f9f9e5264e3362b","modified":1568172820977},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.ttf","hash":"9f1e2934098a6a4a7c5584c8f3fa24a707070da3","modified":1568172820979},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.ttf","hash":"295f7e02c9b157e7ea63ad09613b00ceab85c5cd","modified":1568172820985},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.eot","hash":"1f5a73db7947ef22c8a2bb19d6449b80496c03c4","modified":1568172820983},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.eot","hash":"08e1503d1181188690fd9c81860d6c890c1465f6","modified":1568172820989},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.ttf","hash":"a6aa450ee6e0f85786474ca6b04827ef97e81af4","modified":1568172820990},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.eot","hash":"31a9219c25fe1991fb745ec8dbbcf45c6094a702","modified":1568172820993},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.ttf","hash":"f22b219824026e490a581ddb3b36b07997dff0e3","modified":1568172820995},{"_id":"themes/cactus/.git/logs/refs/heads/master","hash":"904d9be614a44fbb4f42b87254f460538e992a8b","modified":1568172820739},{"_id":"themes/cactus/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1568172820731},{"_id":"themes/cactus/source/css/_partial/post/actions_desktop.styl","hash":"0231316551b187fa7cccecd64ea90b83844e953c","modified":1568172820875},{"_id":"themes/cactus/source/css/_partial/post/actions_mobile.styl","hash":"b06410ed34b5ecbcac11357aa359149e1f827aa6","modified":1568172820876},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.woff2","hash":"d902f8db3e021155f177f698a252fb98d6e61768","modified":1568172820902},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.eot","hash":"42ff503f20e97503cef8e5b2ec10ae07699d7c01","modified":1568172820903},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.ttf","hash":"c140085833a38abec6b7df99d4ccac93eb266031","modified":1568172820906},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.woff","hash":"7b3f44b4d3028f3c87ddf0f4bd62511c9bf4a87e","modified":1568172820906},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.woff2","hash":"9784edb76f8a2ed595ea4bf74d46cda4eff3b303","modified":1568172820907},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.woff2","hash":"92da6e3c7121e21cdfde25ef08797a3937a683e1","modified":1568172820918},{"_id":"themes/cactus/source/lib/justified-gallery/css/justifiedGallery.min.css","hash":"a21698ea1b6caf22116d82e27c81115b8d5e9dcc","modified":1568172820921},{"_id":"themes/cactus/source/lib/justified-gallery/js/jquery.justifiedGallery.min.js","hash":"6f5433cc9f19ce2403e903e5d01a4c7b38f0969b","modified":1568172820922},{"_id":"themes/cactus/source/lib/font-awesome/css/all.min.css","hash":"cd4637e23ddae0dd64a8076261adc6fe90307c0f","modified":1568172820891},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.woff","hash":"f9d835a0f9248b1bb33d66968e87c4a50103ed8d","modified":1568172820901},{"_id":"themes/cactus/.git/logs/refs/remotes/origin/HEAD","hash":"904d9be614a44fbb4f42b87254f460538e992a8b","modified":1568172820731},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.eot","hash":"644ece8263d2f96b087eebf7f6d4e309e5898eb5","modified":1568172820894},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.ttf","hash":"19e302760e39e25a5f8d90d6cd0164ef6cd74f8c","modified":1568172820901},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.ttf","hash":"c445864a9646948e0d7ff44930ad732ee61427d8","modified":1568172820916},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.woff","hash":"80d33a73cbb60e206ef6f5c898988641576c7dda","modified":1568172820917},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.svg","hash":"6fcc06741ad4cdeefa546ce3e1af3a9b682a8429","modified":1568172820905},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.eot","hash":"10740942ec6b3f4985529d343402d0bf32f9f847","modified":1568172820909},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-BoldItalic.ttf","hash":"b542b9591fbf33925d93f0695b6e123a9f0cfd43","modified":1568172820947},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Italic.ttf","hash":"93ebc5098cf57a32b7b8d297681f31692c09bdfa","modified":1568172820950},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-BoldItalic.ttf","hash":"926035f0156cccf1b0ca507347f39bf9c510f51e","modified":1568172820959},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Italic.ttf","hash":"9d757cc9f928fc83b2133283dd639c12b11d94ad","modified":1568172820961},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Italic.ttf","hash":"9a23c6898b0943bd3d96c04df9a0f66e919451d8","modified":1568172820937},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Bold.ttf","hash":"58be4b7760e9a84daa81929d046f9a15c4fd1c1a","modified":1568172820943},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-BoldItalic.ttf","hash":"b7d24ab1e4fad720f31a2b0cca1904ce1740d846","modified":1568172820933},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Regular.ttf","hash":"6c090d6bff3928fbf8a5f4104e58ed7f421aea7c","modified":1568172820939},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Bold.ttf","hash":"f9918fb93d6ab6850f5d38069a999c311af78816","modified":1568172820956},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Regular.ttf","hash":"de559f8d70d5b1ab2810597bfd0b1b9506f3ef01","modified":1568172820964},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Bold.ttf","hash":"34f7db59f1d023294e69976aa20b7d52b86165a4","modified":1568172820930},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Regular.ttf","hash":"20ce1fc7ae1254558ca044ae48283faaa58897e5","modified":1568172820953},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.svg","hash":"ec8851ea10277bc5c73eb56da111b3e3f52b9def","modified":1568172820898},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.svg","hash":"21731b0d1c81d0eb710b89fafb50a056dda00b97","modified":1568172820914},{"_id":"themes/cactus/.git/objects/pack/pack-5c44ea2445e8ccc9466a69cf32397c7a8642d704.pack","hash":"30222fc54e1f24b36738eb3cd487b89d96694e3e","modified":1568172820644},{"_id":"source/_posts/layui-submit-question.md.bak","hash":"6e0701dfeed2283b61fb0966aeb0df21d1732e73","modified":1568261320278},{"_id":"source/_posts/use-jenkins.md.bak","hash":"ffb80004ace73ecf73114380ed31ef91602519ad","modified":1568255177358},{"_id":"public/search.xml","hash":"5d7a07b7ae381aab3c0a7ba748f92f8caa454459","modified":1568261367385},{"_id":"public/404.html","hash":"24f89ff61f9cc6d97351aeea4086612075f79da1","modified":1568261367844},{"_id":"public/about/index.html","hash":"a79ca6a154d92c2976c7dcc40bcc542faed2470d","modified":1568261367844},{"_id":"public/search/index.html","hash":"f3aafc86a96113e2b757d93fe06e3b08c8236379","modified":1568261367844},{"_id":"public/categories/index-1.html","hash":"f14e13d3c17ca1af3633192caa11f27497731728","modified":1568261367844},{"_id":"public/categories/index.html","hash":"2bdc6a36d091876757e74df10c900f96f538277f","modified":1568261367844},{"_id":"public/tags/index-1.html","hash":"0c30c1695fc6bd38b5e7740434f91f238baebbcc","modified":1568261367844},{"_id":"public/tags/index.html","hash":"4423573e803753f549d57cd26c5d75edbd6c3105","modified":1568261367844},{"_id":"public/index.html","hash":"1e626f5b49e72d3ea06b6f17f20d1ba272484f09","modified":1568261367844},{"_id":"public/categories/学习/index.html","hash":"1d037fb5c1db176ff0017a39de7c527dcfd454af","modified":1568261367844},{"_id":"public/categories/Hexo/index.html","hash":"663cb1b2143ff49584a3881daea379f1bbe78dc4","modified":1568261367844},{"_id":"public/categories/音乐会/index.html","hash":"450e06c9e3169c25bf8f5cdd46cfbf67cf1a527a","modified":1568261367844},{"_id":"public/categories/Hexo/Https/index.html","hash":"a7d25b3cd9a3b52b687675c9d808b66a937cdc20","modified":1568261367844},{"_id":"public/categories/音乐会/久石让/index.html","hash":"7a6618ec0f38ee793ff17ed5ac28d737f53be6f6","modified":1568261367844},{"_id":"public/categories/Hexo/Https/Blog/index.html","hash":"66f0b443f5140399c142a0c0c637ab66b3987ebc","modified":1568261367844},{"_id":"public/archives/index.html","hash":"299edcf99c1e0c40ef897ac332748c3f2bab3fd7","modified":1568261367844},{"_id":"public/archives/2016/index.html","hash":"2646c46637f93aa93ce678d0568dea64f1985747","modified":1568261367844},{"_id":"public/archives/2016/06/index.html","hash":"f46c99246bbe60a71fb99cb5c570bc6a3379923f","modified":1568261367844},{"_id":"public/archives/2016/07/index.html","hash":"115d63ca4984358157244330e3d8a8e9bbba0b30","modified":1568261367845},{"_id":"public/archives/2018/index.html","hash":"2653db99bea00c7bc56549eda25589eac8b982c7","modified":1568261367845},{"_id":"public/archives/2018/09/index.html","hash":"848eb5197649c07b9a4b4fd34fd00e01bd44ca04","modified":1568261367845},{"_id":"public/archives/2019/index.html","hash":"961dedd5dc6590f66750ca6e5c8d685c55fa933a","modified":1568261367845},{"_id":"public/tags/Hexo/index.html","hash":"76cc0aa28f644b1d5e9007495571e0f0e8ee94dc","modified":1568261367845},{"_id":"public/archives/2019/09/index.html","hash":"a3037c415c3fc46faae84c745edf5f9b84297dd9","modified":1568261367845},{"_id":"public/tags/博客/index.html","hash":"4f565661c31e3e53d1dfa8f69c2cd8918bf25a42","modified":1568261367845},{"_id":"public/tags/Node-js/index.html","hash":"279d36f038325ad24911891a5ea4fabd271ed941","modified":1568261367845},{"_id":"public/tags/themes/index.html","hash":"e8cea2ff27cc75f6f78a74e6234e14779b461907","modified":1568261367845},{"_id":"public/tags/cactus/index.html","hash":"5bb16933bfb76bf91d30a80909e1a60d54081b8d","modified":1568261367845},{"_id":"public/tags/hexo/index.html","hash":"454370e12c65193ee4d605ce8b2012d7dc76437d","modified":1568261367845},{"_id":"public/tags/Blog/index.html","hash":"e3749cfa39b2c2109964311c34efc6aed0140b2f","modified":1568261367845},{"_id":"public/tags/Https/index.html","hash":"f121eac985816d6b21277117bcfe2f082dc5c5ce","modified":1568261367845},{"_id":"public/tags/github-pages/index.html","hash":"e9913900e7649d87fc0c565ea902f372ee2e3353","modified":1568261367845},{"_id":"public/tags/2018/index.html","hash":"ddc48277f7ea1c325104a3856fd9f91d988cd533","modified":1568261367845},{"_id":"public/tags/joehisaishi/index.html","hash":"165991f3078692bd52ea023f868d520c457c3d3c","modified":1568261367845},{"_id":"public/tags/wdo/index.html","hash":"5bc8bdb0b848e8c97429760582b19936cff67474","modified":1568261367845},{"_id":"public/tags/久石让/index.html","hash":"99d7476dd62ac616a8b3d26f833d78d0cb615d4e","modified":1568261367845},{"_id":"public/tags/springboot/index.html","hash":"02fd991c834becb624ce488d68b7ed371e029db5","modified":1568261367845},{"_id":"public/tags/多数据源/index.html","hash":"288295416c2a117ea4c5db8bdce886f37c0af04d","modified":1568261367845},{"_id":"public/tags/mycat/index.html","hash":"a8308a79440571a8b63556e2eccc7d7fdfedcef2","modified":1568261367845},{"_id":"public/tags/database/index.html","hash":"958dcc63790db440a796c8b011ded49d39f58f0e","modified":1568261367845},{"_id":"public/tags/sharding-jdbc/index.html","hash":"ad00c060e365038e79168e1b3e9615bb8cf211c0","modified":1568261367845},{"_id":"public/tags/分库分表/index.html","hash":"66c903c8e0090e3773510c0aabcab42a44db67af","modified":1568261367845},{"_id":"public/tags/sqlserver/index.html","hash":"bcfef2f9e2521e4dea823d4d8b7f0592a623020c","modified":1568261367845},{"_id":"public/2019/09/11/use-mycat/index.html","hash":"fe281a7490da842505b4a5672b0b26a3c825d15f","modified":1568261367846},{"_id":"public/2019/09/11/use-multi-datasource/index.html","hash":"b75500208653f1fb5c2a0775d8c986776af25960","modified":1568261367846},{"_id":"public/2019/09/11/change-themes/index.html","hash":"51551c3c8af4b746949f17922ac0c59c975183df","modified":1568261367846},{"_id":"public/2018/09/20/joehisaishi-wdo-2018-ch/index.html","hash":"7ac0396def96ef13fe793b497c794cc01e88c08a","modified":1568261367846},{"_id":"public/2016/07/21/hexo-github-pages-https/index.html","hash":"fae5de78d02e334a82ff7812b41ad73c11fac52f","modified":1568261367846},{"_id":"public/2016/06/17/build-blog/index.html","hash":"054b47b5e9956a68a6666fac049ea74a4e551f57","modified":1568261367846}],"Category":[{"name":"学习","_id":"ck0g281wv0003u0qo4i3ur60g"},{"name":"Hexo","_id":"ck0g281wz0008u0qodbqnppf5"},{"name":"音乐会","_id":"ck0g281x1000cu0qo9sj714rz"},{"name":"Https","parent":"ck0g281wz0008u0qodbqnppf5","_id":"ck0g281x2000eu0qo8556190q"},{"name":"久石让","parent":"ck0g281x1000cu0qo9sj714rz","_id":"ck0g281x3000iu0qo9zgvfml5"},{"name":"Blog","parent":"ck0g281x2000eu0qo8556190q","_id":"ck0g281x4000lu0qowpqpa11z"}],"Data":[],"Page":[{"_content":"<!DOCTYPE html>\n<html>\n<head>\n\t<title>404</title>\n</head>\n<body>\n<center>\n<div style=\"font-size: 180px\">404</div>\n<p style=\"font-size: 50px\">Page not found</p>\n<a style=\"color: black;text-decoration: none;font-size: 30px\" href=\"/\">返回首页</a>\n</center>\n</body>\n</html>","source":"404.html","raw":"<!DOCTYPE html>\n<html>\n<head>\n\t<title>404</title>\n</head>\n<body>\n<center>\n<div style=\"font-size: 180px\">404</div>\n<p style=\"font-size: 50px\">Page not found</p>\n<a style=\"color: black;text-decoration: none;font-size: 30px\" href=\"/\">返回首页</a>\n</center>\n</body>\n</html>","date":"2019-09-12T00:09:48.976Z","updated":"2019-09-12T00:09:48.976Z","path":"404.html","title":"","comments":1,"layout":"page","_id":"ck0g281w00000u0qogk2f3o6n","content":"<!DOCTYPE html>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n\t<title>404</title>\n</head>\n<body>\n<center>\n<div style=\"font-size: 180px\">404</div>\n<p style=\"font-size: 50px\">Page not found</p>\n<a style=\"color: black;text-decoration: none;font-size: 30px\" href=\"/\">返回首页</a>\n</center>\n</body>\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE html>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n\t<title>404</title>\n</head>\n<body>\n<center>\n<div style=\"font-size: 180px\">404</div>\n<p style=\"font-size: 50px\">Page not found</p>\n<a style=\"color: black;text-decoration: none;font-size: 30px\" href=\"/\">返回首页</a>\n</center>\n</body>\n</html>"},{"title":"about","date":"2016-06-17T01:40:35.000Z","_content":"关于\n===\n###### 建立此博客原因\n\n> 记录学习经历以及遇到的问题\n\n###### 本人是程序员&二次元死宅，喜欢动漫，爱猫，爱纯音乐、钢琴曲。（虽然不会弹钢琴╮(╯-╰)╭）\n\n#### 技能：\n> 既然是程序员当然会编程了，\n主攻Java，开发了一套一卡通的管理平台，在其中负责卡的充值消费等功能；\n使用PHP开发过一些网站；\n开发了一个Android应用（并未上架应用市场，只供公司内部使用）；\n开发过iOS，使用Objective-c开发了两套应用，一套使用纯代码，一套使用了storyboard，其中使用了一些第三方库。因各种原因，应用并未上架。\n","source":"about/index.md","raw":"---\ntitle: about\ndate: 2016-06-17 09:40:35\n---\n关于\n===\n###### 建立此博客原因\n\n> 记录学习经历以及遇到的问题\n\n###### 本人是程序员&二次元死宅，喜欢动漫，爱猫，爱纯音乐、钢琴曲。（虽然不会弹钢琴╮(╯-╰)╭）\n\n#### 技能：\n> 既然是程序员当然会编程了，\n主攻Java，开发了一套一卡通的管理平台，在其中负责卡的充值消费等功能；\n使用PHP开发过一些网站；\n开发了一个Android应用（并未上架应用市场，只供公司内部使用）；\n开发过iOS，使用Objective-c开发了两套应用，一套使用纯代码，一套使用了storyboard，其中使用了一些第三方库。因各种原因，应用并未上架。\n","updated":"2019-09-11T02:00:25.241Z","path":"about/index.html","comments":1,"layout":"page","_id":"ck0g281y5001uu0qojb379u75","content":"<h1 id=\"关于\"><a href=\"#关于\" class=\"headerlink\" title=\"关于\"></a>关于</h1><h6 id=\"建立此博客原因\"><a href=\"#建立此博客原因\" class=\"headerlink\" title=\"建立此博客原因\"></a>建立此博客原因</h6><blockquote>\n<p>记录学习经历以及遇到的问题</p>\n</blockquote>\n<h6 id=\"本人是程序员-amp-二次元死宅，喜欢动漫，爱猫，爱纯音乐、钢琴曲。（虽然不会弹钢琴╮-╯-╰-╭）\"><a href=\"#本人是程序员-amp-二次元死宅，喜欢动漫，爱猫，爱纯音乐、钢琴曲。（虽然不会弹钢琴╮-╯-╰-╭）\" class=\"headerlink\" title=\"本人是程序员&amp;二次元死宅，喜欢动漫，爱猫，爱纯音乐、钢琴曲。（虽然不会弹钢琴╮(╯-╰)╭）\"></a>本人是程序员&amp;二次元死宅，喜欢动漫，爱猫，爱纯音乐、钢琴曲。（虽然不会弹钢琴╮(╯-╰)╭）</h6><h4 id=\"技能：\"><a href=\"#技能：\" class=\"headerlink\" title=\"技能：\"></a>技能：</h4><blockquote>\n<p>既然是程序员当然会编程了，<br>主攻Java，开发了一套一卡通的管理平台，在其中负责卡的充值消费等功能；<br>使用PHP开发过一些网站；<br>开发了一个Android应用（并未上架应用市场，只供公司内部使用）；<br>开发过iOS，使用Objective-c开发了两套应用，一套使用纯代码，一套使用了storyboard，其中使用了一些第三方库。因各种原因，应用并未上架。</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"关于\"><a href=\"#关于\" class=\"headerlink\" title=\"关于\"></a>关于</h1><h6 id=\"建立此博客原因\"><a href=\"#建立此博客原因\" class=\"headerlink\" title=\"建立此博客原因\"></a>建立此博客原因</h6><blockquote>\n<p>记录学习经历以及遇到的问题</p>\n</blockquote>\n<h6 id=\"本人是程序员-amp-二次元死宅，喜欢动漫，爱猫，爱纯音乐、钢琴曲。（虽然不会弹钢琴╮-╯-╰-╭）\"><a href=\"#本人是程序员-amp-二次元死宅，喜欢动漫，爱猫，爱纯音乐、钢琴曲。（虽然不会弹钢琴╮-╯-╰-╭）\" class=\"headerlink\" title=\"本人是程序员&amp;二次元死宅，喜欢动漫，爱猫，爱纯音乐、钢琴曲。（虽然不会弹钢琴╮(╯-╰)╭）\"></a>本人是程序员&amp;二次元死宅，喜欢动漫，爱猫，爱纯音乐、钢琴曲。（虽然不会弹钢琴╮(╯-╰)╭）</h6><h4 id=\"技能：\"><a href=\"#技能：\" class=\"headerlink\" title=\"技能：\"></a>技能：</h4><blockquote>\n<p>既然是程序员当然会编程了，<br>主攻Java，开发了一套一卡通的管理平台，在其中负责卡的充值消费等功能；<br>使用PHP开发过一些网站；<br>开发了一个Android应用（并未上架应用市场，只供公司内部使用）；<br>开发过iOS，使用Objective-c开发了两套应用，一套使用纯代码，一套使用了storyboard，其中使用了一些第三方库。因各种原因，应用并未上架。</p>\n</blockquote>\n"},{"title":"categories","date":"2019-09-11T04:12:38.000Z","_content":"","source":"categories/index-1.md","raw":"---\ntitle: categories\ndate: 2019-09-11 12:12:38\n---\n","updated":"2019-09-11T04:12:38.512Z","path":"categories/index-1.html","comments":1,"layout":"page","_id":"ck0g281y6001vu0qoxjmeo0zq","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"Search","type":"search","_content":"\n","source":"search/index.md","raw":"title: Search\n\ntype: search\n---\n\n","date":"2019-09-11T04:07:54.822Z","updated":"2019-09-11T04:07:54.822Z","path":"search/index.html","comments":1,"layout":"page","_id":"ck0g281y9001xu0qo2l1zkmfg","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"categories","date":"2016-06-17T01:41:38.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2016-06-17 09:41:38\ntype: \"categories\"\n---\n","updated":"2019-09-11T02:00:25.242Z","path":"categories/index.html","comments":1,"layout":"page","_id":"ck0g281ya001yu0qozy32fvra","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"tags","date":"2019-09-11T04:12:52.000Z","_content":"","source":"tags/index-1.md","raw":"---\ntitle: tags\ndate: 2019-09-11 12:12:52\n---\n","updated":"2019-09-11T04:12:52.271Z","path":"tags/index-1.html","comments":1,"layout":"page","_id":"ck0g281yb0020u0qooh4n904b","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"tags","date":"2016-06-17T01:36:44.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2016-06-17 09:36:44\ntype: \"tags\"\n---\n","updated":"2019-09-11T02:00:25.244Z","path":"tags/index.html","comments":1,"layout":"page","_id":"ck0g281yb0021u0qoruerolq4","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"使用Github Page和Hexo搭建个人博客","date":"2016-06-17T10:59:02.000Z","_content":"\n## 安装环境\n 安装git和Node.js，[git下载地址](https://git-scm.com/downloads),[Node.js下载地址](https://nodejs.org/en/download/)\n 安装完成之后，就可进行hexo博客框架的安装\n   <!--more-->\n 这些都在本地完成的\n\n ```bash\n npm install -g hexo-cli\n ```\n 执行完成之后hexo就安装成功了，第一步结束，环境配置完毕就可以开始创建自己的博客了\n\n## Github上创建仓库\n 创建与用户名对应的仓库，仓库名为your_user_name.github.io(your_user_name.github.com的好像也可以)\n ![Github](build-blog/Githubpicture.png)\n\n## 博客的创建\n\n ### 初始化项目\n  ```bash\n  #init后的名字可以随便起，不会有有什么影响\n  hexo init deathswaltz.github.io\n  cd deathswaltz.github.io\n  npm install\n  ```\n  init后面是项目的名字，这样就会生成一个deathswaltz.github.io的文件夹\n ### 基础配置\n  打开创建出文件夹下的_config.yml文件进行配置，可以使用sublime text，这是个非常好用的编辑器\n  ```coffeescript\n    #博客名字\n    title: Hexo\n    #子标题\n    subtitle:\n    #博客描述\n    description:\n    #作者名字\n    author: deathswaltz\n    #语言\n    language: zh-Hans\n    #头像\n    avatar: https://avatars0.githubusercontent.com/u/10008846?v=3&s=460\n    #主题\n    theme: next\n\n    deploy:\n      #使用Git发布\n      type: git\n      #仓库地址\n      repository: https://github.com/DeathsWaltz/DeathsWaltz.github.io.git\n      branch: master\n  ```\n  其实到现在博客差不多已经搭建的好了\n  现在可以执行下列命令来在本地运行起来\n  ```bash\n  hexo clean\n  hexo g\n  hexo s\n  ```\n  然后再浏览器通过[http://localhost:4000](http://localhost:4000)来进行访问\n\n   发布到Github上使用以下命令：\n  ```bash\n  hexo clean\n  hexo g\n  hexo d\n  ```\n  或者\n  ```bash\n  hexo clean\n  hexo d -g\n  ```\n  发布到Github上之后可以使用刚才创建的仓库名来访问，如：[deathswaltz.github.io](http://deathswaltz.github.io)\n ### 安装主题\n  >hexo的默认主题是landscape，个人觉得这个主题并不怎么好看，所以使用next主题。\n  在git bash 执行git clone [https://github.com/iissnan/hexo-theme-next](https://github.com/iissnan/hexo-theme-next) themes/next,这样即可进行next主题下载\n\n  >下载完成后，在博客所在路径下的themes文件夹下面可以看到一个名为next的文件夹。要应用这个主题，需要我们修改站点配置文件_config.yml，注意这个_config.yml是themes/next下的不要和博客主目录下的弄混了，把之前的theme: landscape修改为theme: next。这时可以hexo   g和hexo s，然后在刷新浏览器就可以看到博客是next的主题了\n\n >NexT 通过 Scheme 提供主题中的主题。 Mist 是 NexT 的第一款 Scheme。启用 Mist 仅需在 主题配置文件 中将 #scheme: Mist 前面的 # 注释去掉即可。\n\n 菜单配置在 主题配置文件 的 menu。 若站点运行在子目录中，请将链接前缀的 / 去掉。默认支持的菜单项有：\n  ```coffeescript\n    menu:\n    home: /\n    archives: /archives\n    #about: /about\n    #categories: /categories\n    tags: /tags\n    #commonweal: /404.html\n  ```\n###  创建 “关于我” 页面\n  新建一个 about 页面：\n  ```bash\n  hexo new page \"about\"\n  ```\n  菜单显示 about 链接，在主题的 _configy.yml 设置中将 menu 中 about 前面的注释去掉即可。\n\n### 创建分类页面\n  添加一个 分类 页面，并在菜单中显示页面链接。\n  1. 新建一个页面，命名为 categories 。命令如下：\n      ```bash\n      hexo new page \"categories\"\n      ```\n  2. 编辑刚新建的页面，将页面的类型设置为 categories ，主题将自动为这个页面显示所有分类。\n  ```coffeescript\n    title: 分类\n    date: 2014-12-22 12:39:04\n    type: \"categories\"\n  ```\n\n### 创建标签云页面\n添加一个标签云页面，并在菜单中显示页面链接。\n1. 新建一个页面，命名为 tags 。命令如下：\n```\nhexo new page \"tags\"\n```\n2. 编辑刚新建的页面，将页面的类型设置为 tags ，主题将自动为这个页面显示标签云。\n\n    ```coffeescript\n    title: All tags\n    date: 2014-12-22 12:39:04\n    type: \"tags\"\n    ```\n3. 在菜单中添加链接。编辑主题的 _config.yml ，添加 tags 到 menu 中。\n\n### 文章摘要\n在需要显示摘要的地方添加如下代码即可：\n```tex\n以上是摘要\n<!--more-- >\n以下是余下全文\n```\n## 其他配置\n### 多说评论系统\n\n- 使用多说前需要先在 多说 创建一个站点。具体步骤如下：\n\n    登录后在首页选择 “我要安装”。\n    创建站点，填写站点相关信息。多说域名 这一栏填写的即是你的 duoshuo_shortname。\n    创建站点完成后在站点配置文件 中新增 duoshuo_shortname 字段，值设置成上一步中的值。\n\n\n本人第一次写博客，用Markdown也是第一次，哪里写的不好请指教。\n以上","source":"_posts/build-blog.md","raw":"---\ntitle: 使用Github Page和Hexo搭建个人博客\ndate: 2016-06-17 18:59:02\ntags: [Hexo, 博客, Node.js]\ncategories: [学习]\n---\n\n## 安装环境\n 安装git和Node.js，[git下载地址](https://git-scm.com/downloads),[Node.js下载地址](https://nodejs.org/en/download/)\n 安装完成之后，就可进行hexo博客框架的安装\n   <!--more-->\n 这些都在本地完成的\n\n ```bash\n npm install -g hexo-cli\n ```\n 执行完成之后hexo就安装成功了，第一步结束，环境配置完毕就可以开始创建自己的博客了\n\n## Github上创建仓库\n 创建与用户名对应的仓库，仓库名为your_user_name.github.io(your_user_name.github.com的好像也可以)\n ![Github](build-blog/Githubpicture.png)\n\n## 博客的创建\n\n ### 初始化项目\n  ```bash\n  #init后的名字可以随便起，不会有有什么影响\n  hexo init deathswaltz.github.io\n  cd deathswaltz.github.io\n  npm install\n  ```\n  init后面是项目的名字，这样就会生成一个deathswaltz.github.io的文件夹\n ### 基础配置\n  打开创建出文件夹下的_config.yml文件进行配置，可以使用sublime text，这是个非常好用的编辑器\n  ```coffeescript\n    #博客名字\n    title: Hexo\n    #子标题\n    subtitle:\n    #博客描述\n    description:\n    #作者名字\n    author: deathswaltz\n    #语言\n    language: zh-Hans\n    #头像\n    avatar: https://avatars0.githubusercontent.com/u/10008846?v=3&s=460\n    #主题\n    theme: next\n\n    deploy:\n      #使用Git发布\n      type: git\n      #仓库地址\n      repository: https://github.com/DeathsWaltz/DeathsWaltz.github.io.git\n      branch: master\n  ```\n  其实到现在博客差不多已经搭建的好了\n  现在可以执行下列命令来在本地运行起来\n  ```bash\n  hexo clean\n  hexo g\n  hexo s\n  ```\n  然后再浏览器通过[http://localhost:4000](http://localhost:4000)来进行访问\n\n   发布到Github上使用以下命令：\n  ```bash\n  hexo clean\n  hexo g\n  hexo d\n  ```\n  或者\n  ```bash\n  hexo clean\n  hexo d -g\n  ```\n  发布到Github上之后可以使用刚才创建的仓库名来访问，如：[deathswaltz.github.io](http://deathswaltz.github.io)\n ### 安装主题\n  >hexo的默认主题是landscape，个人觉得这个主题并不怎么好看，所以使用next主题。\n  在git bash 执行git clone [https://github.com/iissnan/hexo-theme-next](https://github.com/iissnan/hexo-theme-next) themes/next,这样即可进行next主题下载\n\n  >下载完成后，在博客所在路径下的themes文件夹下面可以看到一个名为next的文件夹。要应用这个主题，需要我们修改站点配置文件_config.yml，注意这个_config.yml是themes/next下的不要和博客主目录下的弄混了，把之前的theme: landscape修改为theme: next。这时可以hexo   g和hexo s，然后在刷新浏览器就可以看到博客是next的主题了\n\n >NexT 通过 Scheme 提供主题中的主题。 Mist 是 NexT 的第一款 Scheme。启用 Mist 仅需在 主题配置文件 中将 #scheme: Mist 前面的 # 注释去掉即可。\n\n 菜单配置在 主题配置文件 的 menu。 若站点运行在子目录中，请将链接前缀的 / 去掉。默认支持的菜单项有：\n  ```coffeescript\n    menu:\n    home: /\n    archives: /archives\n    #about: /about\n    #categories: /categories\n    tags: /tags\n    #commonweal: /404.html\n  ```\n###  创建 “关于我” 页面\n  新建一个 about 页面：\n  ```bash\n  hexo new page \"about\"\n  ```\n  菜单显示 about 链接，在主题的 _configy.yml 设置中将 menu 中 about 前面的注释去掉即可。\n\n### 创建分类页面\n  添加一个 分类 页面，并在菜单中显示页面链接。\n  1. 新建一个页面，命名为 categories 。命令如下：\n      ```bash\n      hexo new page \"categories\"\n      ```\n  2. 编辑刚新建的页面，将页面的类型设置为 categories ，主题将自动为这个页面显示所有分类。\n  ```coffeescript\n    title: 分类\n    date: 2014-12-22 12:39:04\n    type: \"categories\"\n  ```\n\n### 创建标签云页面\n添加一个标签云页面，并在菜单中显示页面链接。\n1. 新建一个页面，命名为 tags 。命令如下：\n```\nhexo new page \"tags\"\n```\n2. 编辑刚新建的页面，将页面的类型设置为 tags ，主题将自动为这个页面显示标签云。\n\n    ```coffeescript\n    title: All tags\n    date: 2014-12-22 12:39:04\n    type: \"tags\"\n    ```\n3. 在菜单中添加链接。编辑主题的 _config.yml ，添加 tags 到 menu 中。\n\n### 文章摘要\n在需要显示摘要的地方添加如下代码即可：\n```tex\n以上是摘要\n<!--more-- >\n以下是余下全文\n```\n## 其他配置\n### 多说评论系统\n\n- 使用多说前需要先在 多说 创建一个站点。具体步骤如下：\n\n    登录后在首页选择 “我要安装”。\n    创建站点，填写站点相关信息。多说域名 这一栏填写的即是你的 duoshuo_shortname。\n    创建站点完成后在站点配置文件 中新增 duoshuo_shortname 字段，值设置成上一步中的值。\n\n\n本人第一次写博客，用Markdown也是第一次，哪里写的不好请指教。\n以上","slug":"build-blog","published":1,"updated":"2019-09-11T09:17:58.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck0g281wp0001u0qod7c6cppd","content":"<h2 id=\"安装环境\"><a href=\"#安装环境\" class=\"headerlink\" title=\"安装环境\"></a>安装环境</h2><p> 安装git和Node.js，<a href=\"https://git-scm.com/downloads\" target=\"_blank\" rel=\"noopener\">git下载地址</a>,<a href=\"https://nodejs.org/en/download/\" target=\"_blank\" rel=\"noopener\">Node.js下载地址</a><br> 安装完成之后，就可进行hexo博客框架的安装<br>   <a id=\"more\"></a><br> 这些都在本地完成的</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>\n\n<p> 执行完成之后hexo就安装成功了，第一步结束，环境配置完毕就可以开始创建自己的博客了</p>\n<h2 id=\"Github上创建仓库\"><a href=\"#Github上创建仓库\" class=\"headerlink\" title=\"Github上创建仓库\"></a>Github上创建仓库</h2><p> 创建与用户名对应的仓库，仓库名为your_user_name.github.io(your_user_name.github.com的好像也可以)<br> <img src=\"/2016/06/17/build-blog/Githubpicture.png\" alt=\"Github\"></p>\n<h2 id=\"博客的创建\"><a href=\"#博客的创建\" class=\"headerlink\" title=\"博客的创建\"></a>博客的创建</h2><h3 id=\"初始化项目\"><a href=\"#初始化项目\" class=\"headerlink\" title=\"初始化项目\"></a>初始化项目</h3>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#init后的名字可以随便起，不会有有什么影响</span></span><br><span class=\"line\">hexo init deathswaltz.github.io</span><br><span class=\"line\"><span class=\"built_in\">cd</span> deathswaltz.github.io</span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n\n<p>  init后面是项目的名字，这样就会生成一个deathswaltz.github.io的文件夹</p>\n<h3 id=\"基础配置\"><a href=\"#基础配置\" class=\"headerlink\" title=\"基础配置\"></a>基础配置</h3><p>  打开创建出文件夹下的_config.yml文件进行配置，可以使用sublime text，这是个非常好用的编辑器<br>  <figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#博客名字</span></span><br><span class=\"line\">title: Hexo</span><br><span class=\"line\"><span class=\"comment\">#子标题</span></span><br><span class=\"line\">subtitle:</span><br><span class=\"line\"><span class=\"comment\">#博客描述</span></span><br><span class=\"line\">description:</span><br><span class=\"line\"><span class=\"comment\">#作者名字</span></span><br><span class=\"line\">author: deathswaltz</span><br><span class=\"line\"><span class=\"comment\">#语言</span></span><br><span class=\"line\">language: zh-Hans</span><br><span class=\"line\"><span class=\"comment\">#头像</span></span><br><span class=\"line\">avatar: https:<span class=\"regexp\">//</span>avatars0.githubusercontent.com/u/<span class=\"number\">10008846</span>?v=<span class=\"number\">3</span>&amp;s=<span class=\"number\">460</span></span><br><span class=\"line\"><span class=\"comment\">#主题</span></span><br><span class=\"line\">theme: next</span><br><span class=\"line\"></span><br><span class=\"line\">deploy:</span><br><span class=\"line\">  <span class=\"comment\">#使用Git发布</span></span><br><span class=\"line\">  type: git</span><br><span class=\"line\">  <span class=\"comment\">#仓库地址</span></span><br><span class=\"line\">  repository: https:<span class=\"regexp\">//gi</span>thub.com/DeathsWaltz/DeathsWaltz.github.io.git</span><br><span class=\"line\">  branch: master</span><br></pre></td></tr></table></figure></p>\n<p>  其实到现在博客差不多已经搭建的好了<br>  现在可以执行下列命令来在本地运行起来<br>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean</span><br><span class=\"line\">hexo g</span><br><span class=\"line\">hexo s</span><br></pre></td></tr></table></figure></p>\n<p>  然后再浏览器通过<a href=\"http://localhost:4000\" target=\"_blank\" rel=\"noopener\">http://localhost:4000</a>来进行访问</p>\n<p>   发布到Github上使用以下命令：<br>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean</span><br><span class=\"line\">hexo g</span><br><span class=\"line\">hexo d</span><br></pre></td></tr></table></figure></p>\n<p>  或者<br>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean</span><br><span class=\"line\">hexo d -g</span><br></pre></td></tr></table></figure></p>\n<p>  发布到Github上之后可以使用刚才创建的仓库名来访问，如：<a href=\"http://deathswaltz.github.io\" target=\"_blank\" rel=\"noopener\">deathswaltz.github.io</a></p>\n<h3 id=\"安装主题\"><a href=\"#安装主题\" class=\"headerlink\" title=\"安装主题\"></a>安装主题</h3><blockquote>\n<p>hexo的默认主题是landscape，个人觉得这个主题并不怎么好看，所以使用next主题。<br>  在git bash 执行git clone <a href=\"https://github.com/iissnan/hexo-theme-next\" target=\"_blank\" rel=\"noopener\">https://github.com/iissnan/hexo-theme-next</a> themes/next,这样即可进行next主题下载</p>\n</blockquote>\n<blockquote>\n<p>下载完成后，在博客所在路径下的themes文件夹下面可以看到一个名为next的文件夹。要应用这个主题，需要我们修改站点配置文件_config.yml，注意这个_config.yml是themes/next下的不要和博客主目录下的弄混了，把之前的theme: landscape修改为theme: next。这时可以hexo   g和hexo s，然后在刷新浏览器就可以看到博客是next的主题了</p>\n</blockquote>\n<blockquote>\n<p>NexT 通过 Scheme 提供主题中的主题。 Mist 是 NexT 的第一款 Scheme。启用 Mist 仅需在 主题配置文件 中将 #scheme: Mist 前面的 # 注释去掉即可。</p>\n</blockquote>\n<p> 菜单配置在 主题配置文件 的 menu。 若站点运行在子目录中，请将链接前缀的 / 去掉。默认支持的菜单项有：<br>  <figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">menu:</span><br><span class=\"line\">home: /</span><br><span class=\"line\">archives: /archives</span><br><span class=\"line\"><span class=\"comment\">#about: /about</span></span><br><span class=\"line\"><span class=\"comment\">#categories: /categories</span></span><br><span class=\"line\">tags: /tags</span><br><span class=\"line\"><span class=\"comment\">#commonweal: /404.html</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"创建-“关于我”-页面\"><a href=\"#创建-“关于我”-页面\" class=\"headerlink\" title=\"创建 “关于我” 页面\"></a>创建 “关于我” 页面</h3><p>  新建一个 about 页面：<br>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page <span class=\"string\">\"about\"</span></span><br></pre></td></tr></table></figure></p>\n<p>  菜单显示 about 链接，在主题的 _configy.yml 设置中将 menu 中 about 前面的注释去掉即可。</p>\n<h3 id=\"创建分类页面\"><a href=\"#创建分类页面\" class=\"headerlink\" title=\"创建分类页面\"></a>创建分类页面</h3><p>  添加一个 分类 页面，并在菜单中显示页面链接。</p>\n<ol>\n<li><p>新建一个页面，命名为 categories 。命令如下：</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page <span class=\"string\">\"categories\"</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>编辑刚新建的页面，将页面的类型设置为 categories ，主题将自动为这个页面显示所有分类。</p>\n<figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">title: 分类</span><br><span class=\"line\">date: <span class=\"number\">2014</span><span class=\"number\">-12</span><span class=\"number\">-22</span> <span class=\"number\">12</span>:<span class=\"number\">39</span>:<span class=\"number\">04</span></span><br><span class=\"line\">type: <span class=\"string\">\"categories\"</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h3 id=\"创建标签云页面\"><a href=\"#创建标签云页面\" class=\"headerlink\" title=\"创建标签云页面\"></a>创建标签云页面</h3><p>添加一个标签云页面，并在菜单中显示页面链接。</p>\n<ol>\n<li><p>新建一个页面，命名为 tags 。命令如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page &quot;tags&quot;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>编辑刚新建的页面，将页面的类型设置为 tags ，主题将自动为这个页面显示标签云。</p>\n <figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">title: All tags</span><br><span class=\"line\">date: <span class=\"number\">2014</span><span class=\"number\">-12</span><span class=\"number\">-22</span> <span class=\"number\">12</span>:<span class=\"number\">39</span>:<span class=\"number\">04</span></span><br><span class=\"line\">type: <span class=\"string\">\"tags\"</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在菜单中添加链接。编辑主题的 _config.yml ，添加 tags 到 menu 中。</p>\n</li>\n</ol>\n<h3 id=\"文章摘要\"><a href=\"#文章摘要\" class=\"headerlink\" title=\"文章摘要\"></a>文章摘要</h3><p>在需要显示摘要的地方添加如下代码即可：</p>\n<figure class=\"highlight tex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">以上是摘要</span><br><span class=\"line\">&lt;!--more-- &gt;</span><br><span class=\"line\">以下是余下全文</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"其他配置\"><a href=\"#其他配置\" class=\"headerlink\" title=\"其他配置\"></a>其他配置</h2><h3 id=\"多说评论系统\"><a href=\"#多说评论系统\" class=\"headerlink\" title=\"多说评论系统\"></a>多说评论系统</h3><ul>\n<li><p>使用多说前需要先在 多说 创建一个站点。具体步骤如下：</p>\n<p>  登录后在首页选择 “我要安装”。<br>  创建站点，填写站点相关信息。多说域名 这一栏填写的即是你的 duoshuo_shortname。<br>  创建站点完成后在站点配置文件 中新增 duoshuo_shortname 字段，值设置成上一步中的值。</p>\n</li>\n</ul>\n<p>本人第一次写博客，用Markdown也是第一次，哪里写的不好请指教。<br>以上</p>\n","site":{"data":{}},"excerpt":"<h2 id=\"安装环境\"><a href=\"#安装环境\" class=\"headerlink\" title=\"安装环境\"></a>安装环境</h2><p> 安装git和Node.js，<a href=\"https://git-scm.com/downloads\" target=\"_blank\" rel=\"noopener\">git下载地址</a>,<a href=\"https://nodejs.org/en/download/\" target=\"_blank\" rel=\"noopener\">Node.js下载地址</a><br> 安装完成之后，就可进行hexo博客框架的安装<br></p>","more":"<br> 这些都在本地完成的<p></p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>\n\n<p> 执行完成之后hexo就安装成功了，第一步结束，环境配置完毕就可以开始创建自己的博客了</p>\n<h2 id=\"Github上创建仓库\"><a href=\"#Github上创建仓库\" class=\"headerlink\" title=\"Github上创建仓库\"></a>Github上创建仓库</h2><p> 创建与用户名对应的仓库，仓库名为your_user_name.github.io(your_user_name.github.com的好像也可以)<br> <img src=\"/2016/06/17/build-blog/Githubpicture.png\" alt=\"Github\"></p>\n<h2 id=\"博客的创建\"><a href=\"#博客的创建\" class=\"headerlink\" title=\"博客的创建\"></a>博客的创建</h2><h3 id=\"初始化项目\"><a href=\"#初始化项目\" class=\"headerlink\" title=\"初始化项目\"></a>初始化项目</h3>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#init后的名字可以随便起，不会有有什么影响</span></span><br><span class=\"line\">hexo init deathswaltz.github.io</span><br><span class=\"line\"><span class=\"built_in\">cd</span> deathswaltz.github.io</span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n\n<p>  init后面是项目的名字，这样就会生成一个deathswaltz.github.io的文件夹</p>\n<h3 id=\"基础配置\"><a href=\"#基础配置\" class=\"headerlink\" title=\"基础配置\"></a>基础配置</h3><p>  打开创建出文件夹下的_config.yml文件进行配置，可以使用sublime text，这是个非常好用的编辑器<br>  <figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#博客名字</span></span><br><span class=\"line\">title: Hexo</span><br><span class=\"line\"><span class=\"comment\">#子标题</span></span><br><span class=\"line\">subtitle:</span><br><span class=\"line\"><span class=\"comment\">#博客描述</span></span><br><span class=\"line\">description:</span><br><span class=\"line\"><span class=\"comment\">#作者名字</span></span><br><span class=\"line\">author: deathswaltz</span><br><span class=\"line\"><span class=\"comment\">#语言</span></span><br><span class=\"line\">language: zh-Hans</span><br><span class=\"line\"><span class=\"comment\">#头像</span></span><br><span class=\"line\">avatar: https:<span class=\"regexp\">//</span>avatars0.githubusercontent.com/u/<span class=\"number\">10008846</span>?v=<span class=\"number\">3</span>&amp;s=<span class=\"number\">460</span></span><br><span class=\"line\"><span class=\"comment\">#主题</span></span><br><span class=\"line\">theme: next</span><br><span class=\"line\"></span><br><span class=\"line\">deploy:</span><br><span class=\"line\">  <span class=\"comment\">#使用Git发布</span></span><br><span class=\"line\">  type: git</span><br><span class=\"line\">  <span class=\"comment\">#仓库地址</span></span><br><span class=\"line\">  repository: https:<span class=\"regexp\">//gi</span>thub.com/DeathsWaltz/DeathsWaltz.github.io.git</span><br><span class=\"line\">  branch: master</span><br></pre></td></tr></table></figure></p>\n<p>  其实到现在博客差不多已经搭建的好了<br>  现在可以执行下列命令来在本地运行起来<br>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean</span><br><span class=\"line\">hexo g</span><br><span class=\"line\">hexo s</span><br></pre></td></tr></table></figure></p>\n<p>  然后再浏览器通过<a href=\"http://localhost:4000\" target=\"_blank\" rel=\"noopener\">http://localhost:4000</a>来进行访问</p>\n<p>   发布到Github上使用以下命令：<br>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean</span><br><span class=\"line\">hexo g</span><br><span class=\"line\">hexo d</span><br></pre></td></tr></table></figure></p>\n<p>  或者<br>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean</span><br><span class=\"line\">hexo d -g</span><br></pre></td></tr></table></figure></p>\n<p>  发布到Github上之后可以使用刚才创建的仓库名来访问，如：<a href=\"http://deathswaltz.github.io\" target=\"_blank\" rel=\"noopener\">deathswaltz.github.io</a></p>\n<h3 id=\"安装主题\"><a href=\"#安装主题\" class=\"headerlink\" title=\"安装主题\"></a>安装主题</h3><blockquote>\n<p>hexo的默认主题是landscape，个人觉得这个主题并不怎么好看，所以使用next主题。<br>  在git bash 执行git clone <a href=\"https://github.com/iissnan/hexo-theme-next\" target=\"_blank\" rel=\"noopener\">https://github.com/iissnan/hexo-theme-next</a> themes/next,这样即可进行next主题下载</p>\n</blockquote>\n<blockquote>\n<p>下载完成后，在博客所在路径下的themes文件夹下面可以看到一个名为next的文件夹。要应用这个主题，需要我们修改站点配置文件_config.yml，注意这个_config.yml是themes/next下的不要和博客主目录下的弄混了，把之前的theme: landscape修改为theme: next。这时可以hexo   g和hexo s，然后在刷新浏览器就可以看到博客是next的主题了</p>\n</blockquote>\n<blockquote>\n<p>NexT 通过 Scheme 提供主题中的主题。 Mist 是 NexT 的第一款 Scheme。启用 Mist 仅需在 主题配置文件 中将 #scheme: Mist 前面的 # 注释去掉即可。</p>\n</blockquote>\n<p> 菜单配置在 主题配置文件 的 menu。 若站点运行在子目录中，请将链接前缀的 / 去掉。默认支持的菜单项有：<br>  <figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">menu:</span><br><span class=\"line\">home: /</span><br><span class=\"line\">archives: /archives</span><br><span class=\"line\"><span class=\"comment\">#about: /about</span></span><br><span class=\"line\"><span class=\"comment\">#categories: /categories</span></span><br><span class=\"line\">tags: /tags</span><br><span class=\"line\"><span class=\"comment\">#commonweal: /404.html</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"创建-“关于我”-页面\"><a href=\"#创建-“关于我”-页面\" class=\"headerlink\" title=\"创建 “关于我” 页面\"></a>创建 “关于我” 页面</h3><p>  新建一个 about 页面：<br>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page <span class=\"string\">\"about\"</span></span><br></pre></td></tr></table></figure></p>\n<p>  菜单显示 about 链接，在主题的 _configy.yml 设置中将 menu 中 about 前面的注释去掉即可。</p>\n<h3 id=\"创建分类页面\"><a href=\"#创建分类页面\" class=\"headerlink\" title=\"创建分类页面\"></a>创建分类页面</h3><p>  添加一个 分类 页面，并在菜单中显示页面链接。</p>\n<ol>\n<li><p>新建一个页面，命名为 categories 。命令如下：</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page <span class=\"string\">\"categories\"</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>编辑刚新建的页面，将页面的类型设置为 categories ，主题将自动为这个页面显示所有分类。</p>\n<figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">title: 分类</span><br><span class=\"line\">date: <span class=\"number\">2014</span><span class=\"number\">-12</span><span class=\"number\">-22</span> <span class=\"number\">12</span>:<span class=\"number\">39</span>:<span class=\"number\">04</span></span><br><span class=\"line\">type: <span class=\"string\">\"categories\"</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h3 id=\"创建标签云页面\"><a href=\"#创建标签云页面\" class=\"headerlink\" title=\"创建标签云页面\"></a>创建标签云页面</h3><p>添加一个标签云页面，并在菜单中显示页面链接。</p>\n<ol>\n<li><p>新建一个页面，命名为 tags 。命令如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page &quot;tags&quot;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>编辑刚新建的页面，将页面的类型设置为 tags ，主题将自动为这个页面显示标签云。</p>\n <figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">title: All tags</span><br><span class=\"line\">date: <span class=\"number\">2014</span><span class=\"number\">-12</span><span class=\"number\">-22</span> <span class=\"number\">12</span>:<span class=\"number\">39</span>:<span class=\"number\">04</span></span><br><span class=\"line\">type: <span class=\"string\">\"tags\"</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在菜单中添加链接。编辑主题的 _config.yml ，添加 tags 到 menu 中。</p>\n</li>\n</ol>\n<h3 id=\"文章摘要\"><a href=\"#文章摘要\" class=\"headerlink\" title=\"文章摘要\"></a>文章摘要</h3><p>在需要显示摘要的地方添加如下代码即可：</p>\n<figure class=\"highlight tex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">以上是摘要</span><br><span class=\"line\">&lt;!--more-- &gt;</span><br><span class=\"line\">以下是余下全文</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"其他配置\"><a href=\"#其他配置\" class=\"headerlink\" title=\"其他配置\"></a>其他配置</h2><h3 id=\"多说评论系统\"><a href=\"#多说评论系统\" class=\"headerlink\" title=\"多说评论系统\"></a>多说评论系统</h3><ul>\n<li><p>使用多说前需要先在 多说 创建一个站点。具体步骤如下：</p>\n<p>  登录后在首页选择 “我要安装”。<br>  创建站点，填写站点相关信息。多说域名 这一栏填写的即是你的 duoshuo_shortname。<br>  创建站点完成后在站点配置文件 中新增 duoshuo_shortname 字段，值设置成上一步中的值。</p>\n</li>\n</ul>\n<p>本人第一次写博客，用Markdown也是第一次，哪里写的不好请指教。<br>以上</p>"},{"title":"更换Hexo主题","date":"2019-09-11T05:38:30.000Z","type":"search","_content":"\n### 原主题Next的Mist \n\n根目录下的`_config.yml`文件配置\n\n```yml\nthemes: next\n```\n\n`themes/next`目录下`_config.yml`文件配置\n\n```yaml\n# Schemes\nscheme: Mist\n```\n\n### 更为主题cactus\n\n主题地址：[https://github.com/probberechts/hexo-theme-cactus](https://github.com/probberechts/hexo-theme-cactus)\n\n#### 修改根目录下的`_config.yml`文件配置\n\n```yaml\ntheme: cactus\ntheme_config:\n  colorscheme: white  \n```\n\n#### 修改`themes/cactus`目录下`_config.yml`文件配置\n\n```yaml\nprojects_url: http://github.com/akapril\n\nnav:\n  home: /\n  # About: /about\n  search: /search/\n\nsocial_links:\n  github: http://github.com/akapril\n  \nposts_overview:\n  show_all_posts: true\n```\n\n#### 配置搜索\n\n安装`hexo-generator-search`插件\n\n````shell\nnpm install hexo-generator-search --save\n````\n\n创建搜索页面\n\n```shell\n hexo new page search\n```\n\n创建后内容修改成\n\n```markdown\ntitle: Search\ntype: search\n---\n```\n\n最后在`themes/cactus`目录下`_config.yml`文件配置\n\n```yaml\nnav:\n  search: /search/\n```\n\n`nav`下导航菜单可随意命名配置\n\n```yaml\nnav:\n  主页: /\n  搜索: /search/\n```\n\n","source":"_posts/change-themes.md","raw":"---\ntitle: 更换Hexo主题\ndate: 2019-09-11 13:38:30\ntype: search\ntags: [themes,cactus,hexo]\n---\n\n### 原主题Next的Mist \n\n根目录下的`_config.yml`文件配置\n\n```yml\nthemes: next\n```\n\n`themes/next`目录下`_config.yml`文件配置\n\n```yaml\n# Schemes\nscheme: Mist\n```\n\n### 更为主题cactus\n\n主题地址：[https://github.com/probberechts/hexo-theme-cactus](https://github.com/probberechts/hexo-theme-cactus)\n\n#### 修改根目录下的`_config.yml`文件配置\n\n```yaml\ntheme: cactus\ntheme_config:\n  colorscheme: white  \n```\n\n#### 修改`themes/cactus`目录下`_config.yml`文件配置\n\n```yaml\nprojects_url: http://github.com/akapril\n\nnav:\n  home: /\n  # About: /about\n  search: /search/\n\nsocial_links:\n  github: http://github.com/akapril\n  \nposts_overview:\n  show_all_posts: true\n```\n\n#### 配置搜索\n\n安装`hexo-generator-search`插件\n\n````shell\nnpm install hexo-generator-search --save\n````\n\n创建搜索页面\n\n```shell\n hexo new page search\n```\n\n创建后内容修改成\n\n```markdown\ntitle: Search\ntype: search\n---\n```\n\n最后在`themes/cactus`目录下`_config.yml`文件配置\n\n```yaml\nnav:\n  search: /search/\n```\n\n`nav`下导航菜单可随意命名配置\n\n```yaml\nnav:\n  主页: /\n  搜索: /search/\n```\n\n","slug":"change-themes","published":1,"updated":"2019-09-11T09:17:11.356Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck0g281wt0002u0qogq73wugc","content":"<h3 id=\"原主题Next的Mist\"><a href=\"#原主题Next的Mist\" class=\"headerlink\" title=\"原主题Next的Mist\"></a>原主题Next的Mist</h3><p>根目录下的<code>_config.yml</code>文件配置</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">themes:</span> <span class=\"string\">next</span></span><br></pre></td></tr></table></figure>\n\n<p><code>themes/next</code>目录下<code>_config.yml</code>文件配置</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Schemes</span></span><br><span class=\"line\"><span class=\"attr\">scheme:</span> <span class=\"string\">Mist</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"更为主题cactus\"><a href=\"#更为主题cactus\" class=\"headerlink\" title=\"更为主题cactus\"></a>更为主题cactus</h3><p>主题地址：<a href=\"https://github.com/probberechts/hexo-theme-cactus\" target=\"_blank\" rel=\"noopener\">https://github.com/probberechts/hexo-theme-cactus</a></p>\n<h4 id=\"修改根目录下的-config-yml文件配置\"><a href=\"#修改根目录下的-config-yml文件配置\" class=\"headerlink\" title=\"修改根目录下的_config.yml文件配置\"></a>修改根目录下的<code>_config.yml</code>文件配置</h4><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">cactus</span></span><br><span class=\"line\"><span class=\"attr\">theme_config:</span></span><br><span class=\"line\"><span class=\"attr\">  colorscheme:</span> <span class=\"string\">white</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"修改themes-cactus目录下-config-yml文件配置\"><a href=\"#修改themes-cactus目录下-config-yml文件配置\" class=\"headerlink\" title=\"修改themes/cactus目录下_config.yml文件配置\"></a>修改<code>themes/cactus</code>目录下<code>_config.yml</code>文件配置</h4><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">projects_url:</span> <span class=\"attr\">http://github.com/akapril</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">nav:</span></span><br><span class=\"line\"><span class=\"attr\">  home:</span> <span class=\"string\">/</span></span><br><span class=\"line\">  <span class=\"comment\"># About: /about</span></span><br><span class=\"line\"><span class=\"attr\">  search:</span> <span class=\"string\">/search/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">social_links:</span></span><br><span class=\"line\"><span class=\"attr\">  github:</span> <span class=\"attr\">http://github.com/akapril</span></span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"attr\">posts_overview:</span></span><br><span class=\"line\"><span class=\"attr\">  show_all_posts:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"配置搜索\"><a href=\"#配置搜索\" class=\"headerlink\" title=\"配置搜索\"></a>配置搜索</h4><p>安装<code>hexo-generator-search</code>插件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure>\n\n<p>创建搜索页面</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page search</span><br></pre></td></tr></table></figure>\n\n<p>创建后内容修改成</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">title: Search</span><br><span class=\"line\">type: search</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n\n<p>最后在<code>themes/cactus</code>目录下<code>_config.yml</code>文件配置</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">nav:</span></span><br><span class=\"line\"><span class=\"attr\">  search:</span> <span class=\"string\">/search/</span></span><br></pre></td></tr></table></figure>\n\n<p><code>nav</code>下导航菜单可随意命名配置</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">nav:</span></span><br><span class=\"line\">  <span class=\"string\">主页:</span> <span class=\"string\">/</span></span><br><span class=\"line\">  <span class=\"string\">搜索:</span> <span class=\"string\">/search/</span></span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"原主题Next的Mist\"><a href=\"#原主题Next的Mist\" class=\"headerlink\" title=\"原主题Next的Mist\"></a>原主题Next的Mist</h3><p>根目录下的<code>_config.yml</code>文件配置</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">themes:</span> <span class=\"string\">next</span></span><br></pre></td></tr></table></figure>\n\n<p><code>themes/next</code>目录下<code>_config.yml</code>文件配置</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Schemes</span></span><br><span class=\"line\"><span class=\"attr\">scheme:</span> <span class=\"string\">Mist</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"更为主题cactus\"><a href=\"#更为主题cactus\" class=\"headerlink\" title=\"更为主题cactus\"></a>更为主题cactus</h3><p>主题地址：<a href=\"https://github.com/probberechts/hexo-theme-cactus\" target=\"_blank\" rel=\"noopener\">https://github.com/probberechts/hexo-theme-cactus</a></p>\n<h4 id=\"修改根目录下的-config-yml文件配置\"><a href=\"#修改根目录下的-config-yml文件配置\" class=\"headerlink\" title=\"修改根目录下的_config.yml文件配置\"></a>修改根目录下的<code>_config.yml</code>文件配置</h4><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">cactus</span></span><br><span class=\"line\"><span class=\"attr\">theme_config:</span></span><br><span class=\"line\"><span class=\"attr\">  colorscheme:</span> <span class=\"string\">white</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"修改themes-cactus目录下-config-yml文件配置\"><a href=\"#修改themes-cactus目录下-config-yml文件配置\" class=\"headerlink\" title=\"修改themes/cactus目录下_config.yml文件配置\"></a>修改<code>themes/cactus</code>目录下<code>_config.yml</code>文件配置</h4><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">projects_url:</span> <span class=\"attr\">http://github.com/akapril</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">nav:</span></span><br><span class=\"line\"><span class=\"attr\">  home:</span> <span class=\"string\">/</span></span><br><span class=\"line\">  <span class=\"comment\"># About: /about</span></span><br><span class=\"line\"><span class=\"attr\">  search:</span> <span class=\"string\">/search/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">social_links:</span></span><br><span class=\"line\"><span class=\"attr\">  github:</span> <span class=\"attr\">http://github.com/akapril</span></span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"attr\">posts_overview:</span></span><br><span class=\"line\"><span class=\"attr\">  show_all_posts:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"配置搜索\"><a href=\"#配置搜索\" class=\"headerlink\" title=\"配置搜索\"></a>配置搜索</h4><p>安装<code>hexo-generator-search</code>插件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure>\n\n<p>创建搜索页面</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page search</span><br></pre></td></tr></table></figure>\n\n<p>创建后内容修改成</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">title: Search</span><br><span class=\"line\">type: search</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n\n<p>最后在<code>themes/cactus</code>目录下<code>_config.yml</code>文件配置</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">nav:</span></span><br><span class=\"line\"><span class=\"attr\">  search:</span> <span class=\"string\">/search/</span></span><br></pre></td></tr></table></figure>\n\n<p><code>nav</code>下导航菜单可随意命名配置</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">nav:</span></span><br><span class=\"line\">  <span class=\"string\">主页:</span> <span class=\"string\">/</span></span><br><span class=\"line\">  <span class=\"string\">搜索:</span> <span class=\"string\">/search/</span></span><br></pre></td></tr></table></figure>\n\n"},{"title":"Hexo博客Github Pages配置Https","date":"2016-07-21T03:05:30.000Z","_content":"### Github Pages应用自定义域名\n默认情况下访问GitHub Pages页面的域名为`username.github.io`，如果需要使用自己的域名（以下简称“你的域名”），可[参考官方的帮助文档](https://help.github.com/articles/using-a-custom-domain-with-github-pages/)，其实非常简单：\n1. 在repo根目录下创建CNAME文件，内容为你的域名。\n2. 在你的域名管理中心，添加一条CNAME记录，指向`username.github.io`。（将username替换为你的GitHub用户名）\n\n现在，访问`http://你的域名` ，已经可以访问到站点首页了。而如果访问`http://username.github.io` （即原来的地址），将被302跳转到`http://你的域名`。\n<!--more-->\n### Https的问题\n尝试直接访问`https://你的域名`，浏览器会报`SSL_DOMAIN_NOT_MATCHED`警告。因为GitHub Pages默认提供的SSL证书的根域名是`github.io`，和你的域名不相同。\n而且，GitHub Pages不支持上传SSL证书。\n### 使用CloudFlare\n1. 首先去[https://www.cloudflare.com/](https://www.cloudflare.com/)注册账户，配置好你的网站，然后把你域名的DNS服务换成cloudflare提供给你的DNS\n2. 在cloudflare的Crypto页中，SSL设置为Flexible。这将允许CDN到github pages之间的访问为http。\n\n### 强制https\ncloudflare提供`Page Rules`功能，可设置路由规则。通过规则中的`Always use https`选项，可以将用户强制跳转到https。\n![pagerule](pagerule.png)\n### 配置文件\n1. 站点配置文件_config.yml添加如下配置(_config.yml配置文件是主题里的)\n```url\nurl: https://www.yoursite.com   # with the https protocol\nenforce_ssl: www.yoursite.com   # without any protocol\n# 例:\nurl: https://blog.deathsw.com\nenforce_ssl: blog.deathsw.com\n```\n2. 主题的head文件添加以下配置\n  修改文件为\\themes\\next\\layout\\\\_partials下的head.swig\n```js\n<link rel=\"canonical\" href=\" { { site.url } }{ { page.url } }\" />\n <script type=\"text/javascript\">\n    var host = \"yoursite.com\";\n    if ((host == window.location.host) && (window.location.protocol != \"https:\"))\n        window.location.protocol = \"https\";\n</script>\n```\n现在，通过`https://你的域名`已经可以访问站点首页了。\n\n参考：\n[https://sheharyar.me/blog/free-ssl-for-github-pages-with-custom-domains/](https://sheharyar.me/blog/free-ssl-for-github-pages-with-custom-domains/)\n[https://blog.chionlab.moe/2016/01/28/github-pages-with-https/](https://blog.chionlab.moe/2016/01/28/github-pages-with-https/)","source":"_posts/hexo-github-pages-https.md","raw":"---\ntitle: Hexo博客Github Pages配置Https\ndate: 2016-07-21 11:05:30\ntags: [Hexo, Blog, Https, github pages]\ncategories: [Hexo, Https, Blog]\n---\n### Github Pages应用自定义域名\n默认情况下访问GitHub Pages页面的域名为`username.github.io`，如果需要使用自己的域名（以下简称“你的域名”），可[参考官方的帮助文档](https://help.github.com/articles/using-a-custom-domain-with-github-pages/)，其实非常简单：\n1. 在repo根目录下创建CNAME文件，内容为你的域名。\n2. 在你的域名管理中心，添加一条CNAME记录，指向`username.github.io`。（将username替换为你的GitHub用户名）\n\n现在，访问`http://你的域名` ，已经可以访问到站点首页了。而如果访问`http://username.github.io` （即原来的地址），将被302跳转到`http://你的域名`。\n<!--more-->\n### Https的问题\n尝试直接访问`https://你的域名`，浏览器会报`SSL_DOMAIN_NOT_MATCHED`警告。因为GitHub Pages默认提供的SSL证书的根域名是`github.io`，和你的域名不相同。\n而且，GitHub Pages不支持上传SSL证书。\n### 使用CloudFlare\n1. 首先去[https://www.cloudflare.com/](https://www.cloudflare.com/)注册账户，配置好你的网站，然后把你域名的DNS服务换成cloudflare提供给你的DNS\n2. 在cloudflare的Crypto页中，SSL设置为Flexible。这将允许CDN到github pages之间的访问为http。\n\n### 强制https\ncloudflare提供`Page Rules`功能，可设置路由规则。通过规则中的`Always use https`选项，可以将用户强制跳转到https。\n![pagerule](pagerule.png)\n### 配置文件\n1. 站点配置文件_config.yml添加如下配置(_config.yml配置文件是主题里的)\n```url\nurl: https://www.yoursite.com   # with the https protocol\nenforce_ssl: www.yoursite.com   # without any protocol\n# 例:\nurl: https://blog.deathsw.com\nenforce_ssl: blog.deathsw.com\n```\n2. 主题的head文件添加以下配置\n  修改文件为\\themes\\next\\layout\\\\_partials下的head.swig\n```js\n<link rel=\"canonical\" href=\" { { site.url } }{ { page.url } }\" />\n <script type=\"text/javascript\">\n    var host = \"yoursite.com\";\n    if ((host == window.location.host) && (window.location.protocol != \"https:\"))\n        window.location.protocol = \"https\";\n</script>\n```\n现在，通过`https://你的域名`已经可以访问站点首页了。\n\n参考：\n[https://sheharyar.me/blog/free-ssl-for-github-pages-with-custom-domains/](https://sheharyar.me/blog/free-ssl-for-github-pages-with-custom-domains/)\n[https://blog.chionlab.moe/2016/01/28/github-pages-with-https/](https://blog.chionlab.moe/2016/01/28/github-pages-with-https/)","slug":"hexo-github-pages-https","published":1,"updated":"2019-09-11T02:00:25.238Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck0g281wx0005u0qo2b2u51yu","content":"<h3 id=\"Github-Pages应用自定义域名\"><a href=\"#Github-Pages应用自定义域名\" class=\"headerlink\" title=\"Github Pages应用自定义域名\"></a>Github Pages应用自定义域名</h3><p>默认情况下访问GitHub Pages页面的域名为<code>username.github.io</code>，如果需要使用自己的域名（以下简称“你的域名”），可<a href=\"https://help.github.com/articles/using-a-custom-domain-with-github-pages/\" target=\"_blank\" rel=\"noopener\">参考官方的帮助文档</a>，其实非常简单：</p>\n<ol>\n<li>在repo根目录下创建CNAME文件，内容为你的域名。</li>\n<li>在你的域名管理中心，添加一条CNAME记录，指向<code>username.github.io</code>。（将username替换为你的GitHub用户名）</li>\n</ol>\n<p>现在，访问<code>http://你的域名</code> ，已经可以访问到站点首页了。而如果访问<code>http://username.github.io</code> （即原来的地址），将被302跳转到<code>http://你的域名</code>。</p>\n<a id=\"more\"></a>\n<h3 id=\"Https的问题\"><a href=\"#Https的问题\" class=\"headerlink\" title=\"Https的问题\"></a>Https的问题</h3><p>尝试直接访问<code>https://你的域名</code>，浏览器会报<code>SSL_DOMAIN_NOT_MATCHED</code>警告。因为GitHub Pages默认提供的SSL证书的根域名是<code>github.io</code>，和你的域名不相同。<br>而且，GitHub Pages不支持上传SSL证书。</p>\n<h3 id=\"使用CloudFlare\"><a href=\"#使用CloudFlare\" class=\"headerlink\" title=\"使用CloudFlare\"></a>使用CloudFlare</h3><ol>\n<li>首先去<a href=\"https://www.cloudflare.com/\" target=\"_blank\" rel=\"noopener\">https://www.cloudflare.com/</a>注册账户，配置好你的网站，然后把你域名的DNS服务换成cloudflare提供给你的DNS</li>\n<li>在cloudflare的Crypto页中，SSL设置为Flexible。这将允许CDN到github pages之间的访问为http。</li>\n</ol>\n<h3 id=\"强制https\"><a href=\"#强制https\" class=\"headerlink\" title=\"强制https\"></a>强制https</h3><p>cloudflare提供<code>Page Rules</code>功能，可设置路由规则。通过规则中的<code>Always use https</code>选项，可以将用户强制跳转到https。<br><img src=\"/2016/07/21/hexo-github-pages-https/pagerule.png\" alt=\"pagerule\"></p>\n<h3 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h3><ol>\n<li><p>站点配置文件_config.yml添加如下配置(_config.yml配置文件是主题里的)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url: https://www.yoursite.com   # with the https protocol</span><br><span class=\"line\">enforce_ssl: www.yoursite.com   # without any protocol</span><br><span class=\"line\"># 例:</span><br><span class=\"line\">url: https://blog.deathsw.com</span><br><span class=\"line\">enforce_ssl: blog.deathsw.com</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>主题的head文件添加以下配置<br>修改文件为\\themes\\next\\layout\\_partials下的head.swig</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;link rel=<span class=\"string\">\"canonical\"</span> href=<span class=\"string\">\" &#123; &#123; site.url &#125; &#125;&#123; &#123; page.url &#125; &#125;\"</span> /&gt;</span><br><span class=\"line\"> &lt;script type=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> host = <span class=\"string\">\"yoursite.com\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((host == <span class=\"built_in\">window</span>.location.host) &amp;&amp; (<span class=\"built_in\">window</span>.location.protocol != <span class=\"string\">\"https:\"</span>))</span><br><span class=\"line\">        <span class=\"built_in\">window</span>.location.protocol = <span class=\"string\">\"https\"</span>;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<p>现在，通过<code>https://你的域名</code>已经可以访问站点首页了。</p>\n<p>参考：<br><a href=\"https://sheharyar.me/blog/free-ssl-for-github-pages-with-custom-domains/\" target=\"_blank\" rel=\"noopener\">https://sheharyar.me/blog/free-ssl-for-github-pages-with-custom-domains/</a><br><a href=\"https://blog.chionlab.moe/2016/01/28/github-pages-with-https/\" target=\"_blank\" rel=\"noopener\">https://blog.chionlab.moe/2016/01/28/github-pages-with-https/</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"Github-Pages应用自定义域名\"><a href=\"#Github-Pages应用自定义域名\" class=\"headerlink\" title=\"Github Pages应用自定义域名\"></a>Github Pages应用自定义域名</h3><p>默认情况下访问GitHub Pages页面的域名为<code>username.github.io</code>，如果需要使用自己的域名（以下简称“你的域名”），可<a href=\"https://help.github.com/articles/using-a-custom-domain-with-github-pages/\" target=\"_blank\" rel=\"noopener\">参考官方的帮助文档</a>，其实非常简单：</p>\n<ol>\n<li>在repo根目录下创建CNAME文件，内容为你的域名。</li>\n<li>在你的域名管理中心，添加一条CNAME记录，指向<code>username.github.io</code>。（将username替换为你的GitHub用户名）</li>\n</ol>\n<p>现在，访问<code>http://你的域名</code> ，已经可以访问到站点首页了。而如果访问<code>http://username.github.io</code> （即原来的地址），将被302跳转到<code>http://你的域名</code>。</p>","more":"<h3 id=\"Https的问题\"><a href=\"#Https的问题\" class=\"headerlink\" title=\"Https的问题\"></a>Https的问题</h3><p>尝试直接访问<code>https://你的域名</code>，浏览器会报<code>SSL_DOMAIN_NOT_MATCHED</code>警告。因为GitHub Pages默认提供的SSL证书的根域名是<code>github.io</code>，和你的域名不相同。<br>而且，GitHub Pages不支持上传SSL证书。</p>\n<h3 id=\"使用CloudFlare\"><a href=\"#使用CloudFlare\" class=\"headerlink\" title=\"使用CloudFlare\"></a>使用CloudFlare</h3><ol>\n<li>首先去<a href=\"https://www.cloudflare.com/\" target=\"_blank\" rel=\"noopener\">https://www.cloudflare.com/</a>注册账户，配置好你的网站，然后把你域名的DNS服务换成cloudflare提供给你的DNS</li>\n<li>在cloudflare的Crypto页中，SSL设置为Flexible。这将允许CDN到github pages之间的访问为http。</li>\n</ol>\n<h3 id=\"强制https\"><a href=\"#强制https\" class=\"headerlink\" title=\"强制https\"></a>强制https</h3><p>cloudflare提供<code>Page Rules</code>功能，可设置路由规则。通过规则中的<code>Always use https</code>选项，可以将用户强制跳转到https。<br><img src=\"/2016/07/21/hexo-github-pages-https/pagerule.png\" alt=\"pagerule\"></p>\n<h3 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h3><ol>\n<li><p>站点配置文件_config.yml添加如下配置(_config.yml配置文件是主题里的)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url: https://www.yoursite.com   # with the https protocol</span><br><span class=\"line\">enforce_ssl: www.yoursite.com   # without any protocol</span><br><span class=\"line\"># 例:</span><br><span class=\"line\">url: https://blog.deathsw.com</span><br><span class=\"line\">enforce_ssl: blog.deathsw.com</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>主题的head文件添加以下配置<br>修改文件为\\themes\\next\\layout\\_partials下的head.swig</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;link rel=<span class=\"string\">\"canonical\"</span> href=<span class=\"string\">\" &#123; &#123; site.url &#125; &#125;&#123; &#123; page.url &#125; &#125;\"</span> /&gt;</span><br><span class=\"line\"> &lt;script type=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> host = <span class=\"string\">\"yoursite.com\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((host == <span class=\"built_in\">window</span>.location.host) &amp;&amp; (<span class=\"built_in\">window</span>.location.protocol != <span class=\"string\">\"https:\"</span>))</span><br><span class=\"line\">        <span class=\"built_in\">window</span>.location.protocol = <span class=\"string\">\"https\"</span>;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<p>现在，通过<code>https://你的域名</code>已经可以访问站点首页了。</p>\n<p>参考：<br><a href=\"https://sheharyar.me/blog/free-ssl-for-github-pages-with-custom-domains/\" target=\"_blank\" rel=\"noopener\">https://sheharyar.me/blog/free-ssl-for-github-pages-with-custom-domains/</a><br><a href=\"https://blog.chionlab.moe/2016/01/28/github-pages-with-https/\" target=\"_blank\" rel=\"noopener\">https://blog.chionlab.moe/2016/01/28/github-pages-with-https/</a></p>"},{"title":"2018久石让与新日本爱乐世界梦幻交响乐团深圳音乐会","date":"2018-09-20T03:23:55.000Z","_content":"\n## 深圳之旅\n\n### 济南遥墙机场安检中\n\n![安检](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180908_173437.jpg)\n\n<!--more-->\n\n### 出发\n![出发](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180908_185913.jpg)\n\n\n\n### 春茧体育馆\n![春茧体育馆](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_140508.jpg)\n\n### 送给久石让的花\n![送给久石让的花](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_161748.jpg)\n\n### 非官方周边\n![非官方周边](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_165110.jpg)\n\n### 非官方周边：徽章\n![非官方周边：徽章](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_165235.jpg)\n\n### 意外收获：面基下限大佬的意外惊喜\n![意外收获](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_233413.jpg)\n\n### 手册\n![手册](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_192941.jpg)\n\n### 渣像素1\n![渣渣像素1](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_193037.jpg)\n\n### 渣像素2\n![渣渣像素2](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_193041.jpg)\n\n### 渣像素3\n![渣渣像素3](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_193043.jpg)\n\n### 渣像素4\n![渣渣像素4](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_201025.jpg)\n\n### 渣像素5\n![渣渣像素5](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_202211.jpg)\n\n\n\n### 返程\n![返程](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180910_062945.jpg)\n\n![返程](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180910_063356.jpg)\n\n### 久石让同好群中群友拍摄\n<video id=\"video\" controls=\"\" preload=\"none\"  width=\"100%\"  >\n<source id=\"mp4\" src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/B898A2B47A936E08D34EAB8984CD341E.mp4\" type=\"video/mp4\">\n</video>\n\n<video id=\"video\" controls=\"\" preload=\"none\"  width=\"100%\"  >\n<source id=\"mp4\" src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/F6C92BC62415ACFB515F59675F721C3A.mp4\" type=\"video/mp4\">\n</video>\n","source":"_posts/joehisaishi-wdo-2018-ch.md","raw":"---\ntitle: 2018久石让与新日本爱乐世界梦幻交响乐团深圳音乐会\ndate: 2018-09-20 11:23:55\ntags: [2018, joehisaishi, wdo, 久石让]\ncategories: [音乐会, 久石让]\n---\n\n## 深圳之旅\n\n### 济南遥墙机场安检中\n\n![安检](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180908_173437.jpg)\n\n<!--more-->\n\n### 出发\n![出发](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180908_185913.jpg)\n\n\n\n### 春茧体育馆\n![春茧体育馆](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_140508.jpg)\n\n### 送给久石让的花\n![送给久石让的花](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_161748.jpg)\n\n### 非官方周边\n![非官方周边](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_165110.jpg)\n\n### 非官方周边：徽章\n![非官方周边：徽章](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_165235.jpg)\n\n### 意外收获：面基下限大佬的意外惊喜\n![意外收获](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_233413.jpg)\n\n### 手册\n![手册](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_192941.jpg)\n\n### 渣像素1\n![渣渣像素1](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_193037.jpg)\n\n### 渣像素2\n![渣渣像素2](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_193041.jpg)\n\n### 渣像素3\n![渣渣像素3](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_193043.jpg)\n\n### 渣像素4\n![渣渣像素4](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_201025.jpg)\n\n### 渣像素5\n![渣渣像素5](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_202211.jpg)\n\n\n\n### 返程\n![返程](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180910_062945.jpg)\n\n![返程](https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180910_063356.jpg)\n\n### 久石让同好群中群友拍摄\n<video id=\"video\" controls=\"\" preload=\"none\"  width=\"100%\"  >\n<source id=\"mp4\" src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/B898A2B47A936E08D34EAB8984CD341E.mp4\" type=\"video/mp4\">\n</video>\n\n<video id=\"video\" controls=\"\" preload=\"none\"  width=\"100%\"  >\n<source id=\"mp4\" src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/F6C92BC62415ACFB515F59675F721C3A.mp4\" type=\"video/mp4\">\n</video>\n","slug":"joehisaishi-wdo-2018-ch","published":1,"updated":"2019-09-11T02:00:25.240Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck0g281wy0006u0qo7uw0rmmz","content":"<h2 id=\"深圳之旅\"><a href=\"#深圳之旅\" class=\"headerlink\" title=\"深圳之旅\"></a>深圳之旅</h2><h3 id=\"济南遥墙机场安检中\"><a href=\"#济南遥墙机场安检中\" class=\"headerlink\" title=\"济南遥墙机场安检中\"></a>济南遥墙机场安检中</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180908_173437.jpg\" alt=\"安检\"></p>\n<a id=\"more\"></a>\n\n<h3 id=\"出发\"><a href=\"#出发\" class=\"headerlink\" title=\"出发\"></a>出发</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180908_185913.jpg\" alt=\"出发\"></p>\n<h3 id=\"春茧体育馆\"><a href=\"#春茧体育馆\" class=\"headerlink\" title=\"春茧体育馆\"></a>春茧体育馆</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_140508.jpg\" alt=\"春茧体育馆\"></p>\n<h3 id=\"送给久石让的花\"><a href=\"#送给久石让的花\" class=\"headerlink\" title=\"送给久石让的花\"></a>送给久石让的花</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_161748.jpg\" alt=\"送给久石让的花\"></p>\n<h3 id=\"非官方周边\"><a href=\"#非官方周边\" class=\"headerlink\" title=\"非官方周边\"></a>非官方周边</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_165110.jpg\" alt=\"非官方周边\"></p>\n<h3 id=\"非官方周边：徽章\"><a href=\"#非官方周边：徽章\" class=\"headerlink\" title=\"非官方周边：徽章\"></a>非官方周边：徽章</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_165235.jpg\" alt=\"非官方周边：徽章\"></p>\n<h3 id=\"意外收获：面基下限大佬的意外惊喜\"><a href=\"#意外收获：面基下限大佬的意外惊喜\" class=\"headerlink\" title=\"意外收获：面基下限大佬的意外惊喜\"></a>意外收获：面基下限大佬的意外惊喜</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_233413.jpg\" alt=\"意外收获\"></p>\n<h3 id=\"手册\"><a href=\"#手册\" class=\"headerlink\" title=\"手册\"></a>手册</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_192941.jpg\" alt=\"手册\"></p>\n<h3 id=\"渣像素1\"><a href=\"#渣像素1\" class=\"headerlink\" title=\"渣像素1\"></a>渣像素1</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_193037.jpg\" alt=\"渣渣像素1\"></p>\n<h3 id=\"渣像素2\"><a href=\"#渣像素2\" class=\"headerlink\" title=\"渣像素2\"></a>渣像素2</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_193041.jpg\" alt=\"渣渣像素2\"></p>\n<h3 id=\"渣像素3\"><a href=\"#渣像素3\" class=\"headerlink\" title=\"渣像素3\"></a>渣像素3</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_193043.jpg\" alt=\"渣渣像素3\"></p>\n<h3 id=\"渣像素4\"><a href=\"#渣像素4\" class=\"headerlink\" title=\"渣像素4\"></a>渣像素4</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_201025.jpg\" alt=\"渣渣像素4\"></p>\n<h3 id=\"渣像素5\"><a href=\"#渣像素5\" class=\"headerlink\" title=\"渣像素5\"></a>渣像素5</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_202211.jpg\" alt=\"渣渣像素5\"></p>\n<h3 id=\"返程\"><a href=\"#返程\" class=\"headerlink\" title=\"返程\"></a>返程</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180910_062945.jpg\" alt=\"返程\"></p>\n<p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180910_063356.jpg\" alt=\"返程\"></p>\n<h3 id=\"久石让同好群中群友拍摄\"><a href=\"#久石让同好群中群友拍摄\" class=\"headerlink\" title=\"久石让同好群中群友拍摄\"></a>久石让同好群中群友拍摄</h3><video id=\"video\" controls preload=\"none\" width=\"100%\">\n<source id=\"mp4\" src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/B898A2B47A936E08D34EAB8984CD341E.mp4\" type=\"video/mp4\">\n</video>\n\n<video id=\"video\" controls preload=\"none\" width=\"100%\">\n<source id=\"mp4\" src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/F6C92BC62415ACFB515F59675F721C3A.mp4\" type=\"video/mp4\">\n</video>\n","site":{"data":{}},"excerpt":"<h2 id=\"深圳之旅\"><a href=\"#深圳之旅\" class=\"headerlink\" title=\"深圳之旅\"></a>深圳之旅</h2><h3 id=\"济南遥墙机场安检中\"><a href=\"#济南遥墙机场安检中\" class=\"headerlink\" title=\"济南遥墙机场安检中\"></a>济南遥墙机场安检中</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180908_173437.jpg\" alt=\"安检\"></p>","more":"<h3 id=\"出发\"><a href=\"#出发\" class=\"headerlink\" title=\"出发\"></a>出发</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180908_185913.jpg\" alt=\"出发\"></p>\n<h3 id=\"春茧体育馆\"><a href=\"#春茧体育馆\" class=\"headerlink\" title=\"春茧体育馆\"></a>春茧体育馆</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_140508.jpg\" alt=\"春茧体育馆\"></p>\n<h3 id=\"送给久石让的花\"><a href=\"#送给久石让的花\" class=\"headerlink\" title=\"送给久石让的花\"></a>送给久石让的花</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_161748.jpg\" alt=\"送给久石让的花\"></p>\n<h3 id=\"非官方周边\"><a href=\"#非官方周边\" class=\"headerlink\" title=\"非官方周边\"></a>非官方周边</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_165110.jpg\" alt=\"非官方周边\"></p>\n<h3 id=\"非官方周边：徽章\"><a href=\"#非官方周边：徽章\" class=\"headerlink\" title=\"非官方周边：徽章\"></a>非官方周边：徽章</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_165235.jpg\" alt=\"非官方周边：徽章\"></p>\n<h3 id=\"意外收获：面基下限大佬的意外惊喜\"><a href=\"#意外收获：面基下限大佬的意外惊喜\" class=\"headerlink\" title=\"意外收获：面基下限大佬的意外惊喜\"></a>意外收获：面基下限大佬的意外惊喜</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_233413.jpg\" alt=\"意外收获\"></p>\n<h3 id=\"手册\"><a href=\"#手册\" class=\"headerlink\" title=\"手册\"></a>手册</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_192941.jpg\" alt=\"手册\"></p>\n<h3 id=\"渣像素1\"><a href=\"#渣像素1\" class=\"headerlink\" title=\"渣像素1\"></a>渣像素1</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_193037.jpg\" alt=\"渣渣像素1\"></p>\n<h3 id=\"渣像素2\"><a href=\"#渣像素2\" class=\"headerlink\" title=\"渣像素2\"></a>渣像素2</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_193041.jpg\" alt=\"渣渣像素2\"></p>\n<h3 id=\"渣像素3\"><a href=\"#渣像素3\" class=\"headerlink\" title=\"渣像素3\"></a>渣像素3</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_193043.jpg\" alt=\"渣渣像素3\"></p>\n<h3 id=\"渣像素4\"><a href=\"#渣像素4\" class=\"headerlink\" title=\"渣像素4\"></a>渣像素4</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_201025.jpg\" alt=\"渣渣像素4\"></p>\n<h3 id=\"渣像素5\"><a href=\"#渣像素5\" class=\"headerlink\" title=\"渣像素5\"></a>渣像素5</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180909_202211.jpg\" alt=\"渣渣像素5\"></p>\n<h3 id=\"返程\"><a href=\"#返程\" class=\"headerlink\" title=\"返程\"></a>返程</h3><p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180910_062945.jpg\" alt=\"返程\"></p>\n<p><img src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/IMG_20180910_063356.jpg\" alt=\"返程\"></p>\n<h3 id=\"久石让同好群中群友拍摄\"><a href=\"#久石让同好群中群友拍摄\" class=\"headerlink\" title=\"久石让同好群中群友拍摄\"></a>久石让同好群中群友拍摄</h3><video id=\"video\" controls preload=\"none\" width=\"100%\">\n<source id=\"mp4\" src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/B898A2B47A936E08D34EAB8984CD341E.mp4\" type=\"video/mp4\">\n</video>\n\n<video id=\"video\" controls preload=\"none\" width=\"100%\">\n<source id=\"mp4\" src=\"https://azrael-1252339850.cos.ap-chengdu.myqcloud.com/joehisaishi/F6C92BC62415ACFB515F59675F721C3A.mp4\" type=\"video/mp4\">\n</video>"},{"title":"Spring boot使用多数据源","date":"2019-09-11T07:56:39.000Z","_content":"\n#### 依赖： pom.xml\n\n```xml\n    <dependency>\n        <groupId>com.baomidou</groupId>\n        <artifactId>dynamic-datasource-spring-boot-starter</artifactId>\n        <version>${baomidou.version}</version>\n    </dependency>\n```\n\n#### 数据源配置： application.yml\n\n```yaml\nspring:\n  datasource:\n    dynamic:\n      datasource:\n        master:\n          driver-class-name: com.mysql.cj.jdbc.Driver\n          url: jdbc:mysql://129.xx.xx.xx:3306/jiahua?useUnicode=true&characterEncoding=UTF-8&useSSL=false\n          username: xxxx\n          password: xxxx\n        slave:\n          driver-class-name: com.microsoft.sqlserver.jdbc.SQLServerDriver\n          url: jdbc:sqlserver://192.168.xx.xx:1433; DatabaseName=xxx1\n          username: xxxx\n          password: xxxx\n        slave1:\n          driver-class-name: com.microsoft.sqlserver.jdbc.SQLServerDriver\n          url: jdbc:sqlserver://192.168.xx.xx:1433; DatabaseName=xxx2\n          username: xxxx\n          password: xxxx\n      mp-enabled: true\n```\n\n\n\n#### ServiceImpl\n\n@DS: 注解在类上或方法上来切换数据源，方法上的@DS优先级大于类上的@DS\n默认走从库: @DS(value = \"slave\")在类上，默认走从库，除非在方法在添加@DS(value = \"master\")才走主库\n\n```java\n@Service\n@DS(value = \"slave\")\npublic class ItemServiceImpl extends ServiceImpl<ItemMapper, Item> implements ItemService {\n    /**\n     * 类上 {@code @DS(\"slave\")} 代表默认从库，在方法上写 {@code @DS(\"master\")} 代表默认主库\n     *\n     * @param user 用户\n     */\n    @DS(\"master\")\n    @Override\n    public void addUser(User user) {\n        baseMapper.insert(user);\n    }\n}\n```\n\n","source":"_posts/use-multi-datasource.md","raw":"---\ntitle: Spring boot使用多数据源\ndate: 2019-09-11 15:56:39\ntags: [springboot,多数据源]\n---\n\n#### 依赖： pom.xml\n\n```xml\n    <dependency>\n        <groupId>com.baomidou</groupId>\n        <artifactId>dynamic-datasource-spring-boot-starter</artifactId>\n        <version>${baomidou.version}</version>\n    </dependency>\n```\n\n#### 数据源配置： application.yml\n\n```yaml\nspring:\n  datasource:\n    dynamic:\n      datasource:\n        master:\n          driver-class-name: com.mysql.cj.jdbc.Driver\n          url: jdbc:mysql://129.xx.xx.xx:3306/jiahua?useUnicode=true&characterEncoding=UTF-8&useSSL=false\n          username: xxxx\n          password: xxxx\n        slave:\n          driver-class-name: com.microsoft.sqlserver.jdbc.SQLServerDriver\n          url: jdbc:sqlserver://192.168.xx.xx:1433; DatabaseName=xxx1\n          username: xxxx\n          password: xxxx\n        slave1:\n          driver-class-name: com.microsoft.sqlserver.jdbc.SQLServerDriver\n          url: jdbc:sqlserver://192.168.xx.xx:1433; DatabaseName=xxx2\n          username: xxxx\n          password: xxxx\n      mp-enabled: true\n```\n\n\n\n#### ServiceImpl\n\n@DS: 注解在类上或方法上来切换数据源，方法上的@DS优先级大于类上的@DS\n默认走从库: @DS(value = \"slave\")在类上，默认走从库，除非在方法在添加@DS(value = \"master\")才走主库\n\n```java\n@Service\n@DS(value = \"slave\")\npublic class ItemServiceImpl extends ServiceImpl<ItemMapper, Item> implements ItemService {\n    /**\n     * 类上 {@code @DS(\"slave\")} 代表默认从库，在方法上写 {@code @DS(\"master\")} 代表默认主库\n     *\n     * @param user 用户\n     */\n    @DS(\"master\")\n    @Override\n    public void addUser(User user) {\n        baseMapper.insert(user);\n    }\n}\n```\n\n","slug":"use-multi-datasource","published":1,"updated":"2019-09-11T08:51:41.071Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck0g281y3001tu0qounhf5en5","content":"<h4 id=\"依赖：-pom-xml\"><a href=\"#依赖：-pom-xml\" class=\"headerlink\" title=\"依赖： pom.xml\"></a>依赖： pom.xml</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>dynamic-datasource-spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;baomidou.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"数据源配置：-application-yml\"><a href=\"#数据源配置：-application-yml\" class=\"headerlink\" title=\"数据源配置： application.yml\"></a>数据源配置： application.yml</h4><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\"><span class=\"attr\">  datasource:</span></span><br><span class=\"line\"><span class=\"attr\">    dynamic:</span></span><br><span class=\"line\"><span class=\"attr\">      datasource:</span></span><br><span class=\"line\"><span class=\"attr\">        master:</span></span><br><span class=\"line\"><span class=\"attr\">          driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"attr\">          url:</span> <span class=\"attr\">jdbc:mysql://129.xx.xx.xx:3306/jiahua?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false</span></span><br><span class=\"line\"><span class=\"attr\">          username:</span> <span class=\"string\">xxxx</span></span><br><span class=\"line\"><span class=\"attr\">          password:</span> <span class=\"string\">xxxx</span></span><br><span class=\"line\"><span class=\"attr\">        slave:</span></span><br><span class=\"line\"><span class=\"attr\">          driver-class-name:</span> <span class=\"string\">com.microsoft.sqlserver.jdbc.SQLServerDriver</span></span><br><span class=\"line\"><span class=\"attr\">          url:</span> <span class=\"attr\">jdbc:sqlserver://192.168.xx.xx:1433;</span> <span class=\"string\">DatabaseName=xxx1</span></span><br><span class=\"line\"><span class=\"attr\">          username:</span> <span class=\"string\">xxxx</span></span><br><span class=\"line\"><span class=\"attr\">          password:</span> <span class=\"string\">xxxx</span></span><br><span class=\"line\"><span class=\"attr\">        slave1:</span></span><br><span class=\"line\"><span class=\"attr\">          driver-class-name:</span> <span class=\"string\">com.microsoft.sqlserver.jdbc.SQLServerDriver</span></span><br><span class=\"line\"><span class=\"attr\">          url:</span> <span class=\"attr\">jdbc:sqlserver://192.168.xx.xx:1433;</span> <span class=\"string\">DatabaseName=xxx2</span></span><br><span class=\"line\"><span class=\"attr\">          username:</span> <span class=\"string\">xxxx</span></span><br><span class=\"line\"><span class=\"attr\">          password:</span> <span class=\"string\">xxxx</span></span><br><span class=\"line\"><span class=\"attr\">      mp-enabled:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ServiceImpl\"><a href=\"#ServiceImpl\" class=\"headerlink\" title=\"ServiceImpl\"></a>ServiceImpl</h4><p>@DS: 注解在类上或方法上来切换数据源，方法上的@DS优先级大于类上的@DS<br>默认走从库: @DS(value = “slave”)在类上，默认走从库，除非在方法在添加@DS(value = “master”)才走主库</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"meta\">@DS</span>(value = <span class=\"string\">\"slave\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ItemServiceImpl</span> <span class=\"keyword\">extends</span> <span class=\"title\">ServiceImpl</span>&lt;<span class=\"title\">ItemMapper</span>, <span class=\"title\">Item</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">ItemService</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 类上 &#123;<span class=\"doctag\">@code</span> <span class=\"doctag\">@DS</span>(\"slave\")&#125; 代表默认从库，在方法上写 &#123;<span class=\"doctag\">@code</span> <span class=\"doctag\">@DS</span>(\"master\")&#125; 代表默认主库</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> user 用户</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@DS</span>(<span class=\"string\">\"master\"</span>)</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addUser</span><span class=\"params\">(User user)</span> </span>&#123;</span><br><span class=\"line\">        baseMapper.insert(user);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"依赖：-pom-xml\"><a href=\"#依赖：-pom-xml\" class=\"headerlink\" title=\"依赖： pom.xml\"></a>依赖： pom.xml</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>dynamic-datasource-spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;baomidou.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"数据源配置：-application-yml\"><a href=\"#数据源配置：-application-yml\" class=\"headerlink\" title=\"数据源配置： application.yml\"></a>数据源配置： application.yml</h4><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\"><span class=\"attr\">  datasource:</span></span><br><span class=\"line\"><span class=\"attr\">    dynamic:</span></span><br><span class=\"line\"><span class=\"attr\">      datasource:</span></span><br><span class=\"line\"><span class=\"attr\">        master:</span></span><br><span class=\"line\"><span class=\"attr\">          driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"attr\">          url:</span> <span class=\"attr\">jdbc:mysql://129.xx.xx.xx:3306/jiahua?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false</span></span><br><span class=\"line\"><span class=\"attr\">          username:</span> <span class=\"string\">xxxx</span></span><br><span class=\"line\"><span class=\"attr\">          password:</span> <span class=\"string\">xxxx</span></span><br><span class=\"line\"><span class=\"attr\">        slave:</span></span><br><span class=\"line\"><span class=\"attr\">          driver-class-name:</span> <span class=\"string\">com.microsoft.sqlserver.jdbc.SQLServerDriver</span></span><br><span class=\"line\"><span class=\"attr\">          url:</span> <span class=\"attr\">jdbc:sqlserver://192.168.xx.xx:1433;</span> <span class=\"string\">DatabaseName=xxx1</span></span><br><span class=\"line\"><span class=\"attr\">          username:</span> <span class=\"string\">xxxx</span></span><br><span class=\"line\"><span class=\"attr\">          password:</span> <span class=\"string\">xxxx</span></span><br><span class=\"line\"><span class=\"attr\">        slave1:</span></span><br><span class=\"line\"><span class=\"attr\">          driver-class-name:</span> <span class=\"string\">com.microsoft.sqlserver.jdbc.SQLServerDriver</span></span><br><span class=\"line\"><span class=\"attr\">          url:</span> <span class=\"attr\">jdbc:sqlserver://192.168.xx.xx:1433;</span> <span class=\"string\">DatabaseName=xxx2</span></span><br><span class=\"line\"><span class=\"attr\">          username:</span> <span class=\"string\">xxxx</span></span><br><span class=\"line\"><span class=\"attr\">          password:</span> <span class=\"string\">xxxx</span></span><br><span class=\"line\"><span class=\"attr\">      mp-enabled:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ServiceImpl\"><a href=\"#ServiceImpl\" class=\"headerlink\" title=\"ServiceImpl\"></a>ServiceImpl</h4><p>@DS: 注解在类上或方法上来切换数据源，方法上的@DS优先级大于类上的@DS<br>默认走从库: @DS(value = “slave”)在类上，默认走从库，除非在方法在添加@DS(value = “master”)才走主库</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"meta\">@DS</span>(value = <span class=\"string\">\"slave\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ItemServiceImpl</span> <span class=\"keyword\">extends</span> <span class=\"title\">ServiceImpl</span>&lt;<span class=\"title\">ItemMapper</span>, <span class=\"title\">Item</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">ItemService</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 类上 &#123;<span class=\"doctag\">@code</span> <span class=\"doctag\">@DS</span>(\"slave\")&#125; 代表默认从库，在方法上写 &#123;<span class=\"doctag\">@code</span> <span class=\"doctag\">@DS</span>(\"master\")&#125; 代表默认主库</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> user 用户</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@DS</span>(<span class=\"string\">\"master\"</span>)</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addUser</span><span class=\"params\">(User user)</span> </span>&#123;</span><br><span class=\"line\">        baseMapper.insert(user);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n"},{"title":"Spring boot分库分表方案","date":"2019-09-11T08:51:59.000Z","_content":"\n\n\n\n### 问题\n\n> 因业务原因需要实现查询多库操作，目前多个库中表结构相同。\n\n> 同时使用mysql数据库和sqlserver数据库。\n\n\n\n### Sharding-jdbc方案\n\n#### 项目配置\n\n依赖\n\n```xml\n    <dependency>\n        <groupId>io.shardingsphere</groupId>\n        <artifactId>sharding-jdbc-core</artifactId>\n        <version>${shardingsphere.version}</version>\n    </dependency>\n```\n\n##### 配置sharding-jdbc参数\n\n\n```java\npackage com.jiahua.ddxdataserver.config;\n\nimport com.zaxxer.hikari.HikariDataSource;\nimport io.shardingsphere.api.config.rule.ShardingRuleConfiguration;\nimport io.shardingsphere.api.config.rule.TableRuleConfiguration;\nimport io.shardingsphere.api.config.strategy.NoneShardingStrategyConfiguration;\nimport io.shardingsphere.shardingjdbc.api.ShardingDataSourceFactory;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Primary;\nimport org.springframework.jdbc.datasource.DataSourceTransactionManager;\n\nimport javax.sql.DataSource;\nimport java.sql.SQLException;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Properties;\nimport java.util.concurrent.ConcurrentHashMap;\n\n@Configuration\npublic class DataSourceShardingConfig {\n\n    /**\n     * 需要手动配置事务管理器\n     */\n    @Bean\n    public DataSourceTransactionManager transactionManager(@Qualifier(\"dataSource\") DataSource dataSource) {\n        return new DataSourceTransactionManager(dataSource);\n    }\n\n    @Bean(name = \"dataSource\")\n    @Primary\n    public DataSource dataSource() throws SQLException {\n        ShardingRuleConfiguration shardingRuleConfig = new ShardingRuleConfiguration();\n        // 设置分表策略\n        shardingRuleConfig.getTableRuleConfigs().add(orderTableRule());\n        shardingRuleConfig.setDefaultDataSourceName(\"ds0\");\n        shardingRuleConfig.setDefaultTableShardingStrategyConfig(new NoneShardingStrategyConfiguration());\n\n        Properties properties = new Properties();\n        properties.setProperty(\"sql.show\", \"true\");\n\n        return ShardingDataSourceFactory.createDataSource(dataSourceMap(), shardingRuleConfig, new ConcurrentHashMap<>(16), properties);\n    }\n\n    private TableRuleConfiguration orderTableRule() {\n        TableRuleConfiguration tableRule = new TableRuleConfiguration();\n        // 设置逻辑表名\n        tableRule.setLogicTable(\"top_XXX\");\n        // ds${0..1}.t_order_${0..2} 也可以写成 ds$->{0..1}.t_order_$->{0..1}\n        tableRule.setActualDataNodes(\"ds${0..2}.top_order\");\n        return tableRule;\n    }\n\n\n    private Map<String, DataSource> dataSourceMap() {\n        Map<String, DataSource> dataSourceMap = new HashMap<>(16);\n\n        // 配置第一个数据源\n        HikariDataSource ds0 = new HikariDataSource();\n        ds0.setDriverClassName(\"com.microsoft.sqlserver.jdbc.SQLServerDriver\");\n        ds0.setJdbcUrl(\"jdbc:sqlserver://192.168.xx.xx:1433; DatabaseName=XXXX1\");\n        ds0.setUsername(\"XXXX\");\n        ds0.setPassword(\"XXXX\");\n\n        // 配置第二个数据源\n        HikariDataSource ds1 = new HikariDataSource();\n        ds1.setDriverClassName(\"com.microsoft.sqlserver.jdbc.SQLServerDriver\");\n        ds1.setJdbcUrl(\"jdbc:sqlserver://192.168.xx.xx:1433; DatabaseName=XXXX2\");\n        ds1.setUsername(\"XXXX\");\n        ds1.setPassword(\"XXXX\");\n\n        // 配置第三个数据源\n        HikariDataSource ds2 = new HikariDataSource();\n        ds2.setDriverClassName(\"com.microsoft.sqlserver.jdbc.SQLServerDriver\");\n        ds2.setJdbcUrl(\"jdbc:sqlserver://192.168.XX.XX:1433; DatabaseName=XXXX3\");\n        ds2.setUsername(\"XXXX\");\n        ds2.setPassword(\"XXXX\");\n\n        dataSourceMap.put(\"ds0\", ds0);\n        dataSourceMap.put(\"ds1\", ds1);\n        dataSourceMap.put(\"ds2\", ds2);\n        return dataSourceMap;\n    }\n\n\n\n}\n\n```\n\n##### 存在问题\n\n> 使用后发现，sqlserver数据库中nvarchar类型无法对应java中String类型，报错如下：\n\n```java\norg.springframework.dao.InvalidDataAccessApiUsageException: Error attempting to get column 'top_sku_properties_name' from result set.  Cause: java.sql.SQLFeatureNotSupportedException: getNString\n; getNString; nested exception is java.sql.SQLFeatureNotSupportedException: getNString\n```\n\n> 暂未找到解决办法，改用mycat.\n\n---\n\n\n\n### Mycat方案\n\nmycat官网 [http://mycat.io/](http://mycat.io/)\n\n#### mycat配置\n\n##### server.xml\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!-- - - Licensed under the Apache License, Version 2.0 (the \"License\"); \n\t- you may not use this file except in compliance with the License. - You \n\tmay obtain a copy of the License at - - http://www.apache.org/licenses/LICENSE-2.0 \n\t- - Unless required by applicable law or agreed to in writing, software - \n\tdistributed under the License is distributed on an \"AS IS\" BASIS, - WITHOUT \n\tWARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. - See the \n\tLicense for the specific language governing permissions and - limitations \n\tunder the License. -->\n<!DOCTYPE mycat:server SYSTEM \"server.dtd\">\n<mycat:server xmlns:mycat=\"http://io.mycat/\">\n\t<system>\n\t<property name=\"nonePasswordLogin\">0</property> <!-- 0为需要密码登陆、1为不需要密码登陆 ,默认为0，设置为1则需要指定默认账户-->\n\t<property name=\"useHandshakeV10\">1</property>\n\t<property name=\"useSqlStat\">0</property>  <!-- 1为开启实时统计、0为关闭 -->\n\t<property name=\"useGlobleTableCheck\">0</property>  <!-- 1为开启全加班一致性检测、0为关闭 -->\n\t\t<property name=\"sqlExecuteTimeout\">300</property>  <!-- SQL 执行超时 单位:秒-->\n\t\t<property name=\"sequnceHandlerType\">2</property>\n\t\t<!--<property name=\"sequnceHandlerPattern\">(?:(\\s*next\\s+value\\s+for\\s*MYCATSEQ_(\\w+))(,|\\)|\\s)*)+</property>-->\n\t\t<!--必须带有MYCATSEQ_或者 mycatseq_进入序列匹配流程 注意MYCATSEQ_有空格的情况-->\n\t\t<property name=\"sequnceHandlerPattern\">(?:(\\s*next\\s+value\\s+for\\s*MYCATSEQ_(\\w+))(,|\\)|\\s)*)+</property>\n\t<property name=\"subqueryRelationshipCheck\">false</property> <!-- 子查询中存在关联查询的情况下,检查关联字段中是否有分片字段 .默认 false -->\n      <!--  <property name=\"useCompression\">1</property>--> <!--1为开启mysql压缩协议-->\n        <!--  <property name=\"fakeMySQLVersion\">5.6.20</property>--> <!--设置模拟的MySQL版本号-->\n\t<!-- <property name=\"processorBufferChunk\">40960</property> -->\n\t<!-- \n\t<property name=\"processors\">1</property> \n\t<property name=\"processorExecutor\">32</property> \n\t -->\n        <!--默认为type 0: DirectByteBufferPool | type 1 ByteBufferArena | type 2 NettyBufferPool -->\n\t\t<property name=\"processorBufferPoolType\">0</property>\n\t\t<!--默认是65535 64K 用于sql解析时最大文本长度 -->\n\t\t<!--<property name=\"maxStringLiteralLength\">65535</property>-->\n\t\t<!--<property name=\"sequnceHandlerType\">0</property>-->\n\t\t<!--<property name=\"backSocketNoDelay\">1</property>-->\n\t\t<!--<property name=\"frontSocketNoDelay\">1</property>-->\n\t\t<!--<property name=\"processorExecutor\">16</property>-->\n\t\t<!--\n\t\t\t<property name=\"serverPort\">8066</property> <property name=\"managerPort\">9066</property> \n\t\t\t<property name=\"idleTimeout\">300000</property> <property name=\"bindIp\">0.0.0.0</property>\n\t\t\t<property name=\"dataNodeIdleCheckPeriod\">300000</property> 5 * 60 * 1000L; //连接空闲检查\n\t\t\t<property name=\"frontWriteQueueSize\">4096</property> <property name=\"processors\">32</property> -->\n\t\t<!--分布式事务开关，0为不过滤分布式事务，1为过滤分布式事务（如果分布式事务内只涉及全局表，则不过滤），2为不过滤分布式事务,但是记录分布式事务日志-->\n\t\t<property name=\"handleDistributedTransactions\">0</property>\n\t\t\n\t\t\t<!--\n\t\t\toff heap for merge/order/group/limit      1开启   0关闭\n\t\t-->\n\t\t<property name=\"useOffHeapForMerge\">1</property>\n\n\t\t<!--\n\t\t\t单位为m\n\t\t-->\n        <property name=\"memoryPageSize\">64k</property>\n\n\t\t<!--\n\t\t\t单位为k\n\t\t-->\n\t\t<property name=\"spillsFileBufferSize\">1k</property>\n\n\t\t<property name=\"useStreamOutput\">0</property>\n\n\t\t<!--\n\t\t\t单位为m\n\t\t-->\n\t\t<property name=\"systemReserveMemorySize\">384m</property>\n\n\n\t\t<!--是否采用zookeeper协调切换  -->\n\t\t<property name=\"useZKSwitch\">false</property>\n\n\t\t<!-- XA Recovery Log日志路径 -->\n\t\t<!--<property name=\"XARecoveryLogBaseDir\">./</property>-->\n\n\t\t<!-- XA Recovery Log日志名称 -->\n\t\t<!--<property name=\"XARecoveryLogBaseName\">tmlog</property>-->\n\t\t<!--如果为 true的话 严格遵守隔离级别,不会在仅仅只有select语句的时候在事务中切换连接-->\n\t\t<property name=\"strictTxIsolation\">false</property>\n\t\t\n\t\t<property name=\"useZKSwitch\">true</property>\n\t\t\n\t</system>\n\n<user name=\"xxxx\">\n\t\t<property name=\"password\">xxxx</property>\n\t\t<property name=\"schemas\">box</property>\n\t</user>\n\n\n</mycat:server>\n\n```\n\n\n\n##### schema.xml\n\n```xml\n<?xml version=\"1.0\"?>\n<!DOCTYPE mycat:schema SYSTEM \"schema.dtd\">\n<mycat:schema xmlns:mycat=\"http://io.mycat/\">\n\n\t<schema name=\"box\" checkSQLschema=\"false\" sqlMaxLimit=\"100\">\n\t\t<!-- 需要查询的表 -->\n\t\t<table name=\"top_xxx\" dataNode=\"ds0,ds1,ds3\" needAddLimit=\"false\" />\n\t\t<table name=\"top_xxxx\" dataNode=\"ds0,ds1,ds3\" needAddLimit=\"false\" />\n\t</schema>\n\n    <!-- 数据库节点 -->\n\t<dataNode name=\"ds0\" dataHost=\"sqlserver1\" database=\"xxx1\" />\n\t<dataNode name=\"ds1\" dataHost=\"sqlserver1\" database=\"xxx2\" />\n\t<dataNode name=\"ds3\" dataHost=\"sqlserver1\" database=\"xxx3\" />\n    \n\t<!-- sqlserver数据库配置 以jdbc方式链接 -->\n\t<dataHost name=\"sqlserver1\" maxCon=\"1000\" minCon=\"10\" balance=\"0\"\n\t\t\t  writeType=\"0\" dbType=\"sqlserver\" dbDriver=\"jdbc\" >\n\t\t<heartbeat></heartbeat>\n\t\t<connectionInitSql></connectionInitSql>\n\t\t<writeHost host=\"hostM1\" url=\"jdbc:sqlserver://192.168.xx.xx:1433\" user=\"xxxx\"\n\t\t\t\t   password=\"xxxx\" >\n\t\t\t\t</writeHost>\n\n\t</dataHost>\n\t\n</mycat:schema>\n```\n\n> `server.xml`中`user`标签对应`schema.xml`中`writeHost`标签的`user`.\n\n\n\n##### rule.xml\n\n不使用规则可不配置rule.xml (待研究.\n\n#### 启动mycat\n\n```shell\nmycat start\n```\n\n> mycat启动后默认端口为8066，用户名、密码、数据库为`server.xml`中`user`的配置.\n>\n> 例：\n\n```xml\n<user name=\"xxxx\">\n\t<property name=\"password\">xxxx</property>\n\t<property name=\"schemas\">box</property>\n</user>\n```\n\n\n> mycat启动后，项目中配置数据源后即可使用.\n\n#### 使用多数据源\n\n同时链接mysql和mycat。\n\n参考  [多数据源配置](/2019/09/11/use-multi-datasource/)\n\n\n\n##### 参考：\n\n[https://github.com/xkcoding/spring-boot-demo](https://github.com/xkcoding/spring-boot-demo)\n\n[http://www.mycat.io/document/mycat-definitive-guide.pdf](http://www.mycat.io/document/mycat-definitive-guide.pdf)","source":"_posts/use-mycat.md","raw":"---\ntitle: Spring boot分库分表方案\ndate: 2019-09-11 16:51:59\ntags: [mycat,database,sharding-jdbc,分库分表,sqlserver]\n---\n\n\n\n\n### 问题\n\n> 因业务原因需要实现查询多库操作，目前多个库中表结构相同。\n\n> 同时使用mysql数据库和sqlserver数据库。\n\n\n\n### Sharding-jdbc方案\n\n#### 项目配置\n\n依赖\n\n```xml\n    <dependency>\n        <groupId>io.shardingsphere</groupId>\n        <artifactId>sharding-jdbc-core</artifactId>\n        <version>${shardingsphere.version}</version>\n    </dependency>\n```\n\n##### 配置sharding-jdbc参数\n\n\n```java\npackage com.jiahua.ddxdataserver.config;\n\nimport com.zaxxer.hikari.HikariDataSource;\nimport io.shardingsphere.api.config.rule.ShardingRuleConfiguration;\nimport io.shardingsphere.api.config.rule.TableRuleConfiguration;\nimport io.shardingsphere.api.config.strategy.NoneShardingStrategyConfiguration;\nimport io.shardingsphere.shardingjdbc.api.ShardingDataSourceFactory;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Primary;\nimport org.springframework.jdbc.datasource.DataSourceTransactionManager;\n\nimport javax.sql.DataSource;\nimport java.sql.SQLException;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Properties;\nimport java.util.concurrent.ConcurrentHashMap;\n\n@Configuration\npublic class DataSourceShardingConfig {\n\n    /**\n     * 需要手动配置事务管理器\n     */\n    @Bean\n    public DataSourceTransactionManager transactionManager(@Qualifier(\"dataSource\") DataSource dataSource) {\n        return new DataSourceTransactionManager(dataSource);\n    }\n\n    @Bean(name = \"dataSource\")\n    @Primary\n    public DataSource dataSource() throws SQLException {\n        ShardingRuleConfiguration shardingRuleConfig = new ShardingRuleConfiguration();\n        // 设置分表策略\n        shardingRuleConfig.getTableRuleConfigs().add(orderTableRule());\n        shardingRuleConfig.setDefaultDataSourceName(\"ds0\");\n        shardingRuleConfig.setDefaultTableShardingStrategyConfig(new NoneShardingStrategyConfiguration());\n\n        Properties properties = new Properties();\n        properties.setProperty(\"sql.show\", \"true\");\n\n        return ShardingDataSourceFactory.createDataSource(dataSourceMap(), shardingRuleConfig, new ConcurrentHashMap<>(16), properties);\n    }\n\n    private TableRuleConfiguration orderTableRule() {\n        TableRuleConfiguration tableRule = new TableRuleConfiguration();\n        // 设置逻辑表名\n        tableRule.setLogicTable(\"top_XXX\");\n        // ds${0..1}.t_order_${0..2} 也可以写成 ds$->{0..1}.t_order_$->{0..1}\n        tableRule.setActualDataNodes(\"ds${0..2}.top_order\");\n        return tableRule;\n    }\n\n\n    private Map<String, DataSource> dataSourceMap() {\n        Map<String, DataSource> dataSourceMap = new HashMap<>(16);\n\n        // 配置第一个数据源\n        HikariDataSource ds0 = new HikariDataSource();\n        ds0.setDriverClassName(\"com.microsoft.sqlserver.jdbc.SQLServerDriver\");\n        ds0.setJdbcUrl(\"jdbc:sqlserver://192.168.xx.xx:1433; DatabaseName=XXXX1\");\n        ds0.setUsername(\"XXXX\");\n        ds0.setPassword(\"XXXX\");\n\n        // 配置第二个数据源\n        HikariDataSource ds1 = new HikariDataSource();\n        ds1.setDriverClassName(\"com.microsoft.sqlserver.jdbc.SQLServerDriver\");\n        ds1.setJdbcUrl(\"jdbc:sqlserver://192.168.xx.xx:1433; DatabaseName=XXXX2\");\n        ds1.setUsername(\"XXXX\");\n        ds1.setPassword(\"XXXX\");\n\n        // 配置第三个数据源\n        HikariDataSource ds2 = new HikariDataSource();\n        ds2.setDriverClassName(\"com.microsoft.sqlserver.jdbc.SQLServerDriver\");\n        ds2.setJdbcUrl(\"jdbc:sqlserver://192.168.XX.XX:1433; DatabaseName=XXXX3\");\n        ds2.setUsername(\"XXXX\");\n        ds2.setPassword(\"XXXX\");\n\n        dataSourceMap.put(\"ds0\", ds0);\n        dataSourceMap.put(\"ds1\", ds1);\n        dataSourceMap.put(\"ds2\", ds2);\n        return dataSourceMap;\n    }\n\n\n\n}\n\n```\n\n##### 存在问题\n\n> 使用后发现，sqlserver数据库中nvarchar类型无法对应java中String类型，报错如下：\n\n```java\norg.springframework.dao.InvalidDataAccessApiUsageException: Error attempting to get column 'top_sku_properties_name' from result set.  Cause: java.sql.SQLFeatureNotSupportedException: getNString\n; getNString; nested exception is java.sql.SQLFeatureNotSupportedException: getNString\n```\n\n> 暂未找到解决办法，改用mycat.\n\n---\n\n\n\n### Mycat方案\n\nmycat官网 [http://mycat.io/](http://mycat.io/)\n\n#### mycat配置\n\n##### server.xml\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!-- - - Licensed under the Apache License, Version 2.0 (the \"License\"); \n\t- you may not use this file except in compliance with the License. - You \n\tmay obtain a copy of the License at - - http://www.apache.org/licenses/LICENSE-2.0 \n\t- - Unless required by applicable law or agreed to in writing, software - \n\tdistributed under the License is distributed on an \"AS IS\" BASIS, - WITHOUT \n\tWARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. - See the \n\tLicense for the specific language governing permissions and - limitations \n\tunder the License. -->\n<!DOCTYPE mycat:server SYSTEM \"server.dtd\">\n<mycat:server xmlns:mycat=\"http://io.mycat/\">\n\t<system>\n\t<property name=\"nonePasswordLogin\">0</property> <!-- 0为需要密码登陆、1为不需要密码登陆 ,默认为0，设置为1则需要指定默认账户-->\n\t<property name=\"useHandshakeV10\">1</property>\n\t<property name=\"useSqlStat\">0</property>  <!-- 1为开启实时统计、0为关闭 -->\n\t<property name=\"useGlobleTableCheck\">0</property>  <!-- 1为开启全加班一致性检测、0为关闭 -->\n\t\t<property name=\"sqlExecuteTimeout\">300</property>  <!-- SQL 执行超时 单位:秒-->\n\t\t<property name=\"sequnceHandlerType\">2</property>\n\t\t<!--<property name=\"sequnceHandlerPattern\">(?:(\\s*next\\s+value\\s+for\\s*MYCATSEQ_(\\w+))(,|\\)|\\s)*)+</property>-->\n\t\t<!--必须带有MYCATSEQ_或者 mycatseq_进入序列匹配流程 注意MYCATSEQ_有空格的情况-->\n\t\t<property name=\"sequnceHandlerPattern\">(?:(\\s*next\\s+value\\s+for\\s*MYCATSEQ_(\\w+))(,|\\)|\\s)*)+</property>\n\t<property name=\"subqueryRelationshipCheck\">false</property> <!-- 子查询中存在关联查询的情况下,检查关联字段中是否有分片字段 .默认 false -->\n      <!--  <property name=\"useCompression\">1</property>--> <!--1为开启mysql压缩协议-->\n        <!--  <property name=\"fakeMySQLVersion\">5.6.20</property>--> <!--设置模拟的MySQL版本号-->\n\t<!-- <property name=\"processorBufferChunk\">40960</property> -->\n\t<!-- \n\t<property name=\"processors\">1</property> \n\t<property name=\"processorExecutor\">32</property> \n\t -->\n        <!--默认为type 0: DirectByteBufferPool | type 1 ByteBufferArena | type 2 NettyBufferPool -->\n\t\t<property name=\"processorBufferPoolType\">0</property>\n\t\t<!--默认是65535 64K 用于sql解析时最大文本长度 -->\n\t\t<!--<property name=\"maxStringLiteralLength\">65535</property>-->\n\t\t<!--<property name=\"sequnceHandlerType\">0</property>-->\n\t\t<!--<property name=\"backSocketNoDelay\">1</property>-->\n\t\t<!--<property name=\"frontSocketNoDelay\">1</property>-->\n\t\t<!--<property name=\"processorExecutor\">16</property>-->\n\t\t<!--\n\t\t\t<property name=\"serverPort\">8066</property> <property name=\"managerPort\">9066</property> \n\t\t\t<property name=\"idleTimeout\">300000</property> <property name=\"bindIp\">0.0.0.0</property>\n\t\t\t<property name=\"dataNodeIdleCheckPeriod\">300000</property> 5 * 60 * 1000L; //连接空闲检查\n\t\t\t<property name=\"frontWriteQueueSize\">4096</property> <property name=\"processors\">32</property> -->\n\t\t<!--分布式事务开关，0为不过滤分布式事务，1为过滤分布式事务（如果分布式事务内只涉及全局表，则不过滤），2为不过滤分布式事务,但是记录分布式事务日志-->\n\t\t<property name=\"handleDistributedTransactions\">0</property>\n\t\t\n\t\t\t<!--\n\t\t\toff heap for merge/order/group/limit      1开启   0关闭\n\t\t-->\n\t\t<property name=\"useOffHeapForMerge\">1</property>\n\n\t\t<!--\n\t\t\t单位为m\n\t\t-->\n        <property name=\"memoryPageSize\">64k</property>\n\n\t\t<!--\n\t\t\t单位为k\n\t\t-->\n\t\t<property name=\"spillsFileBufferSize\">1k</property>\n\n\t\t<property name=\"useStreamOutput\">0</property>\n\n\t\t<!--\n\t\t\t单位为m\n\t\t-->\n\t\t<property name=\"systemReserveMemorySize\">384m</property>\n\n\n\t\t<!--是否采用zookeeper协调切换  -->\n\t\t<property name=\"useZKSwitch\">false</property>\n\n\t\t<!-- XA Recovery Log日志路径 -->\n\t\t<!--<property name=\"XARecoveryLogBaseDir\">./</property>-->\n\n\t\t<!-- XA Recovery Log日志名称 -->\n\t\t<!--<property name=\"XARecoveryLogBaseName\">tmlog</property>-->\n\t\t<!--如果为 true的话 严格遵守隔离级别,不会在仅仅只有select语句的时候在事务中切换连接-->\n\t\t<property name=\"strictTxIsolation\">false</property>\n\t\t\n\t\t<property name=\"useZKSwitch\">true</property>\n\t\t\n\t</system>\n\n<user name=\"xxxx\">\n\t\t<property name=\"password\">xxxx</property>\n\t\t<property name=\"schemas\">box</property>\n\t</user>\n\n\n</mycat:server>\n\n```\n\n\n\n##### schema.xml\n\n```xml\n<?xml version=\"1.0\"?>\n<!DOCTYPE mycat:schema SYSTEM \"schema.dtd\">\n<mycat:schema xmlns:mycat=\"http://io.mycat/\">\n\n\t<schema name=\"box\" checkSQLschema=\"false\" sqlMaxLimit=\"100\">\n\t\t<!-- 需要查询的表 -->\n\t\t<table name=\"top_xxx\" dataNode=\"ds0,ds1,ds3\" needAddLimit=\"false\" />\n\t\t<table name=\"top_xxxx\" dataNode=\"ds0,ds1,ds3\" needAddLimit=\"false\" />\n\t</schema>\n\n    <!-- 数据库节点 -->\n\t<dataNode name=\"ds0\" dataHost=\"sqlserver1\" database=\"xxx1\" />\n\t<dataNode name=\"ds1\" dataHost=\"sqlserver1\" database=\"xxx2\" />\n\t<dataNode name=\"ds3\" dataHost=\"sqlserver1\" database=\"xxx3\" />\n    \n\t<!-- sqlserver数据库配置 以jdbc方式链接 -->\n\t<dataHost name=\"sqlserver1\" maxCon=\"1000\" minCon=\"10\" balance=\"0\"\n\t\t\t  writeType=\"0\" dbType=\"sqlserver\" dbDriver=\"jdbc\" >\n\t\t<heartbeat></heartbeat>\n\t\t<connectionInitSql></connectionInitSql>\n\t\t<writeHost host=\"hostM1\" url=\"jdbc:sqlserver://192.168.xx.xx:1433\" user=\"xxxx\"\n\t\t\t\t   password=\"xxxx\" >\n\t\t\t\t</writeHost>\n\n\t</dataHost>\n\t\n</mycat:schema>\n```\n\n> `server.xml`中`user`标签对应`schema.xml`中`writeHost`标签的`user`.\n\n\n\n##### rule.xml\n\n不使用规则可不配置rule.xml (待研究.\n\n#### 启动mycat\n\n```shell\nmycat start\n```\n\n> mycat启动后默认端口为8066，用户名、密码、数据库为`server.xml`中`user`的配置.\n>\n> 例：\n\n```xml\n<user name=\"xxxx\">\n\t<property name=\"password\">xxxx</property>\n\t<property name=\"schemas\">box</property>\n</user>\n```\n\n\n> mycat启动后，项目中配置数据源后即可使用.\n\n#### 使用多数据源\n\n同时链接mysql和mycat。\n\n参考  [多数据源配置](/2019/09/11/use-multi-datasource/)\n\n\n\n##### 参考：\n\n[https://github.com/xkcoding/spring-boot-demo](https://github.com/xkcoding/spring-boot-demo)\n\n[http://www.mycat.io/document/mycat-definitive-guide.pdf](http://www.mycat.io/document/mycat-definitive-guide.pdf)","slug":"use-mycat","published":1,"updated":"2019-09-11T09:05:41.830Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck0g281z10024u0qouihztvn9","content":"<h3 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h3><blockquote>\n<p>因业务原因需要实现查询多库操作，目前多个库中表结构相同。</p>\n</blockquote>\n<blockquote>\n<p>同时使用mysql数据库和sqlserver数据库。</p>\n</blockquote>\n<h3 id=\"Sharding-jdbc方案\"><a href=\"#Sharding-jdbc方案\" class=\"headerlink\" title=\"Sharding-jdbc方案\"></a>Sharding-jdbc方案</h3><h4 id=\"项目配置\"><a href=\"#项目配置\" class=\"headerlink\" title=\"项目配置\"></a>项目配置</h4><p>依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.shardingsphere<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>sharding-jdbc-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;shardingsphere.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"配置sharding-jdbc参数\"><a href=\"#配置sharding-jdbc参数\" class=\"headerlink\" title=\"配置sharding-jdbc参数\"></a>配置sharding-jdbc参数</h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.jiahua.ddxdataserver.config;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.zaxxer.hikari.HikariDataSource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.shardingsphere.api.config.rule.ShardingRuleConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.shardingsphere.api.config.rule.TableRuleConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.shardingsphere.api.config.strategy.NoneShardingStrategyConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.shardingsphere.shardingjdbc.api.ShardingDataSourceFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Bean;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Primary;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.jdbc.datasource.DataSourceTransactionManager;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.sql.DataSource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Properties;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.concurrent.ConcurrentHashMap;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DataSourceShardingConfig</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 需要手动配置事务管理器</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DataSourceTransactionManager <span class=\"title\">transactionManager</span><span class=\"params\">(@Qualifier(<span class=\"string\">\"dataSource\"</span>)</span> DataSource dataSource) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> DataSourceTransactionManager(dataSource);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span>(name = <span class=\"string\">\"dataSource\"</span>)</span><br><span class=\"line\">    <span class=\"meta\">@Primary</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DataSource <span class=\"title\">dataSource</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> SQLException </span>&#123;</span><br><span class=\"line\">        ShardingRuleConfiguration shardingRuleConfig = <span class=\"keyword\">new</span> ShardingRuleConfiguration();</span><br><span class=\"line\">        <span class=\"comment\">// 设置分表策略</span></span><br><span class=\"line\">        shardingRuleConfig.getTableRuleConfigs().add(orderTableRule());</span><br><span class=\"line\">        shardingRuleConfig.setDefaultDataSourceName(<span class=\"string\">\"ds0\"</span>);</span><br><span class=\"line\">        shardingRuleConfig.setDefaultTableShardingStrategyConfig(<span class=\"keyword\">new</span> NoneShardingStrategyConfiguration());</span><br><span class=\"line\"></span><br><span class=\"line\">        Properties properties = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\">        properties.setProperty(<span class=\"string\">\"sql.show\"</span>, <span class=\"string\">\"true\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> ShardingDataSourceFactory.createDataSource(dataSourceMap(), shardingRuleConfig, <span class=\"keyword\">new</span> ConcurrentHashMap&lt;&gt;(<span class=\"number\">16</span>), properties);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> TableRuleConfiguration <span class=\"title\">orderTableRule</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        TableRuleConfiguration tableRule = <span class=\"keyword\">new</span> TableRuleConfiguration();</span><br><span class=\"line\">        <span class=\"comment\">// 设置逻辑表名</span></span><br><span class=\"line\">        tableRule.setLogicTable(<span class=\"string\">\"top_XXX\"</span>);</span><br><span class=\"line\">        <span class=\"comment\">// ds$&#123;0..1&#125;.t_order_$&#123;0..2&#125; 也可以写成 ds$-&gt;&#123;0..1&#125;.t_order_$-&gt;&#123;0..1&#125;</span></span><br><span class=\"line\">        tableRule.setActualDataNodes(<span class=\"string\">\"ds$&#123;0..2&#125;.top_order\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> tableRule;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> Map&lt;String, DataSource&gt; <span class=\"title\">dataSourceMap</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Map&lt;String, DataSource&gt; dataSourceMap = <span class=\"keyword\">new</span> HashMap&lt;&gt;(<span class=\"number\">16</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 配置第一个数据源</span></span><br><span class=\"line\">        HikariDataSource ds0 = <span class=\"keyword\">new</span> HikariDataSource();</span><br><span class=\"line\">        ds0.setDriverClassName(<span class=\"string\">\"com.microsoft.sqlserver.jdbc.SQLServerDriver\"</span>);</span><br><span class=\"line\">        ds0.setJdbcUrl(<span class=\"string\">\"jdbc:sqlserver://192.168.xx.xx:1433; DatabaseName=XXXX1\"</span>);</span><br><span class=\"line\">        ds0.setUsername(<span class=\"string\">\"XXXX\"</span>);</span><br><span class=\"line\">        ds0.setPassword(<span class=\"string\">\"XXXX\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 配置第二个数据源</span></span><br><span class=\"line\">        HikariDataSource ds1 = <span class=\"keyword\">new</span> HikariDataSource();</span><br><span class=\"line\">        ds1.setDriverClassName(<span class=\"string\">\"com.microsoft.sqlserver.jdbc.SQLServerDriver\"</span>);</span><br><span class=\"line\">        ds1.setJdbcUrl(<span class=\"string\">\"jdbc:sqlserver://192.168.xx.xx:1433; DatabaseName=XXXX2\"</span>);</span><br><span class=\"line\">        ds1.setUsername(<span class=\"string\">\"XXXX\"</span>);</span><br><span class=\"line\">        ds1.setPassword(<span class=\"string\">\"XXXX\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 配置第三个数据源</span></span><br><span class=\"line\">        HikariDataSource ds2 = <span class=\"keyword\">new</span> HikariDataSource();</span><br><span class=\"line\">        ds2.setDriverClassName(<span class=\"string\">\"com.microsoft.sqlserver.jdbc.SQLServerDriver\"</span>);</span><br><span class=\"line\">        ds2.setJdbcUrl(<span class=\"string\">\"jdbc:sqlserver://192.168.XX.XX:1433; DatabaseName=XXXX3\"</span>);</span><br><span class=\"line\">        ds2.setUsername(<span class=\"string\">\"XXXX\"</span>);</span><br><span class=\"line\">        ds2.setPassword(<span class=\"string\">\"XXXX\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        dataSourceMap.put(<span class=\"string\">\"ds0\"</span>, ds0);</span><br><span class=\"line\">        dataSourceMap.put(<span class=\"string\">\"ds1\"</span>, ds1);</span><br><span class=\"line\">        dataSourceMap.put(<span class=\"string\">\"ds2\"</span>, ds2);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dataSourceMap;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"存在问题\"><a href=\"#存在问题\" class=\"headerlink\" title=\"存在问题\"></a>存在问题</h5><blockquote>\n<p>使用后发现，sqlserver数据库中nvarchar类型无法对应java中String类型，报错如下：</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">org.springframework.dao.InvalidDataAccessApiUsageException: Error attempting to get column <span class=\"string\">'top_sku_properties_name'</span> from result set.  Cause: java.sql.SQLFeatureNotSupportedException: getNString</span><br><span class=\"line\">; getNString; nested exception is java.sql.SQLFeatureNotSupportedException: getNString</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>暂未找到解决办法，改用mycat.</p>\n</blockquote>\n<hr>\n<h3 id=\"Mycat方案\"><a href=\"#Mycat方案\" class=\"headerlink\" title=\"Mycat方案\"></a>Mycat方案</h3><p>mycat官网 <a href=\"http://mycat.io/\" target=\"_blank\" rel=\"noopener\">http://mycat.io/</a></p>\n<h4 id=\"mycat配置\"><a href=\"#mycat配置\" class=\"headerlink\" title=\"mycat配置\"></a>mycat配置</h4><h5 id=\"server-xml\"><a href=\"#server-xml\" class=\"headerlink\" title=\"server.xml\"></a>server.xml</h5><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span><br><span class=\"line\"><span class=\"comment\">&lt;!-- - - Licensed under the Apache License, Version 2.0 (the \"License\"); </span></span><br><span class=\"line\"><span class=\"comment\">\t- you may not use this file except in compliance with the License. - You </span></span><br><span class=\"line\"><span class=\"comment\">\tmay obtain a copy of the License at - - http://www.apache.org/licenses/LICENSE-2.0 </span></span><br><span class=\"line\"><span class=\"comment\">\t- - Unless required by applicable law or agreed to in writing, software - </span></span><br><span class=\"line\"><span class=\"comment\">\tdistributed under the License is distributed on an \"AS IS\" BASIS, - WITHOUT </span></span><br><span class=\"line\"><span class=\"comment\">\tWARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. - See the </span></span><br><span class=\"line\"><span class=\"comment\">\tLicense for the specific language governing permissions and - limitations </span></span><br><span class=\"line\"><span class=\"comment\">\tunder the License. --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE mycat:server SYSTEM \"server.dtd\"&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mycat:server</span> <span class=\"attr\">xmlns:mycat</span>=<span class=\"string\">\"http://io.mycat/\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">system</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"nonePasswordLogin\"</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span> <span class=\"comment\">&lt;!-- 0为需要密码登陆、1为不需要密码登陆 ,默认为0，设置为1则需要指定默认账户--&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"useHandshakeV10\"</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"useSqlStat\"</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span>  <span class=\"comment\">&lt;!-- 1为开启实时统计、0为关闭 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"useGlobleTableCheck\"</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span>  <span class=\"comment\">&lt;!-- 1为开启全加班一致性检测、0为关闭 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"sqlExecuteTimeout\"</span>&gt;</span>300<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span>  <span class=\"comment\">&lt;!-- SQL 执行超时 单位:秒--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"sequnceHandlerType\"</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"sequnceHandlerPattern\"&gt;(?:(\\s*next\\s+value\\s+for\\s*MYCATSEQ_(\\w+))(,|\\)|\\s)*)+&lt;/property&gt;--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--必须带有MYCATSEQ_或者 mycatseq_进入序列匹配流程 注意MYCATSEQ_有空格的情况--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"sequnceHandlerPattern\"</span>&gt;</span>(?:(\\s*next\\s+value\\s+for\\s*MYCATSEQ_(\\w+))(,|\\)|\\s)*)+<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"subqueryRelationshipCheck\"</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span> <span class=\"comment\">&lt;!-- 子查询中存在关联查询的情况下,检查关联字段中是否有分片字段 .默认 false --&gt;</span></span><br><span class=\"line\">      <span class=\"comment\">&lt;!--  &lt;property name=\"useCompression\"&gt;1&lt;/property&gt;--&gt;</span> <span class=\"comment\">&lt;!--1为开启mysql压缩协议--&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--  &lt;property name=\"fakeMySQLVersion\"&gt;5.6.20&lt;/property&gt;--&gt;</span> <span class=\"comment\">&lt;!--设置模拟的MySQL版本号--&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- &lt;property name=\"processorBufferChunk\"&gt;40960&lt;/property&gt; --&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- </span></span><br><span class=\"line\"><span class=\"comment\">\t&lt;property name=\"processors\"&gt;1&lt;/property&gt; </span></span><br><span class=\"line\"><span class=\"comment\">\t&lt;property name=\"processorExecutor\"&gt;32&lt;/property&gt; </span></span><br><span class=\"line\"><span class=\"comment\">\t --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--默认为type 0: DirectByteBufferPool | type 1 ByteBufferArena | type 2 NettyBufferPool --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"processorBufferPoolType\"</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--默认是65535 64K 用于sql解析时最大文本长度 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"maxStringLiteralLength\"&gt;65535&lt;/property&gt;--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"sequnceHandlerType\"&gt;0&lt;/property&gt;--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"backSocketNoDelay\"&gt;1&lt;/property&gt;--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"frontSocketNoDelay\"&gt;1&lt;/property&gt;--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"processorExecutor\"&gt;16&lt;/property&gt;--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t&lt;property name=\"serverPort\"&gt;8066&lt;/property&gt; &lt;property name=\"managerPort\"&gt;9066&lt;/property&gt; </span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t&lt;property name=\"idleTimeout\"&gt;300000&lt;/property&gt; &lt;property name=\"bindIp\"&gt;0.0.0.0&lt;/property&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t&lt;property name=\"dataNodeIdleCheckPeriod\"&gt;300000&lt;/property&gt; 5 * 60 * 1000L; //连接空闲检查</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t&lt;property name=\"frontWriteQueueSize\"&gt;4096&lt;/property&gt; &lt;property name=\"processors\"&gt;32&lt;/property&gt; --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--分布式事务开关，0为不过滤分布式事务，1为过滤分布式事务（如果分布式事务内只涉及全局表，则不过滤），2为不过滤分布式事务,但是记录分布式事务日志--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"handleDistributedTransactions\"</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t\t<span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\toff heap for merge/order/group/limit      1开启   0关闭</span></span><br><span class=\"line\"><span class=\"comment\">\t\t--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"useOffHeapForMerge\"</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t单位为m</span></span><br><span class=\"line\"><span class=\"comment\">\t\t--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"memoryPageSize\"</span>&gt;</span>64k<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t单位为k</span></span><br><span class=\"line\"><span class=\"comment\">\t\t--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"spillsFileBufferSize\"</span>&gt;</span>1k<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"useStreamOutput\"</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t单位为m</span></span><br><span class=\"line\"><span class=\"comment\">\t\t--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"systemReserveMemorySize\"</span>&gt;</span>384m<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--是否采用zookeeper协调切换  --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"useZKSwitch\"</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- XA Recovery Log日志路径 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"XARecoveryLogBaseDir\"&gt;./&lt;/property&gt;--&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- XA Recovery Log日志名称 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"XARecoveryLogBaseName\"&gt;tmlog&lt;/property&gt;--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--如果为 true的话 严格遵守隔离级别,不会在仅仅只有select语句的时候在事务中切换连接--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"strictTxIsolation\"</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"useZKSwitch\"</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">system</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">user</span> <span class=\"attr\">name</span>=<span class=\"string\">\"xxxx\"</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span>&gt;</span>xxxx<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"schemas\"</span>&gt;</span>box<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">user</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mycat:server</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"schema-xml\"><a href=\"#schema-xml\" class=\"headerlink\" title=\"schema.xml\"></a>schema.xml</h5><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\"?&gt;</span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE mycat:schema SYSTEM \"schema.dtd\"&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mycat:schema</span> <span class=\"attr\">xmlns:mycat</span>=<span class=\"string\">\"http://io.mycat/\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">schema</span> <span class=\"attr\">name</span>=<span class=\"string\">\"box\"</span> <span class=\"attr\">checkSQLschema</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">sqlMaxLimit</span>=<span class=\"string\">\"100\"</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- 需要查询的表 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">table</span> <span class=\"attr\">name</span>=<span class=\"string\">\"top_xxx\"</span> <span class=\"attr\">dataNode</span>=<span class=\"string\">\"ds0,ds1,ds3\"</span> <span class=\"attr\">needAddLimit</span>=<span class=\"string\">\"false\"</span> /&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">table</span> <span class=\"attr\">name</span>=<span class=\"string\">\"top_xxxx\"</span> <span class=\"attr\">dataNode</span>=<span class=\"string\">\"ds0,ds1,ds3\"</span> <span class=\"attr\">needAddLimit</span>=<span class=\"string\">\"false\"</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">schema</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 数据库节点 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dataNode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ds0\"</span> <span class=\"attr\">dataHost</span>=<span class=\"string\">\"sqlserver1\"</span> <span class=\"attr\">database</span>=<span class=\"string\">\"xxx1\"</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dataNode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ds1\"</span> <span class=\"attr\">dataHost</span>=<span class=\"string\">\"sqlserver1\"</span> <span class=\"attr\">database</span>=<span class=\"string\">\"xxx2\"</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dataNode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ds3\"</span> <span class=\"attr\">dataHost</span>=<span class=\"string\">\"sqlserver1\"</span> <span class=\"attr\">database</span>=<span class=\"string\">\"xxx3\"</span> /&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- sqlserver数据库配置 以jdbc方式链接 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dataHost</span> <span class=\"attr\">name</span>=<span class=\"string\">\"sqlserver1\"</span> <span class=\"attr\">maxCon</span>=<span class=\"string\">\"1000\"</span> <span class=\"attr\">minCon</span>=<span class=\"string\">\"10\"</span> <span class=\"attr\">balance</span>=<span class=\"string\">\"0\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t  <span class=\"attr\">writeType</span>=<span class=\"string\">\"0\"</span> <span class=\"attr\">dbType</span>=<span class=\"string\">\"sqlserver\"</span> <span class=\"attr\">dbDriver</span>=<span class=\"string\">\"jdbc\"</span> &gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">heartbeat</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">heartbeat</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">connectionInitSql</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">connectionInitSql</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">writeHost</span> <span class=\"attr\">host</span>=<span class=\"string\">\"hostM1\"</span> <span class=\"attr\">url</span>=<span class=\"string\">\"jdbc:sqlserver://192.168.xx.xx:1433\"</span> <span class=\"attr\">user</span>=<span class=\"string\">\"xxxx\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t\t   <span class=\"attr\">password</span>=<span class=\"string\">\"xxxx\"</span> &gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">writeHost</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dataHost</span>&gt;</span></span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mycat:schema</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>server.xml</code>中<code>user</code>标签对应<code>schema.xml</code>中<code>writeHost</code>标签的<code>user</code>.</p>\n</blockquote>\n<h5 id=\"rule-xml\"><a href=\"#rule-xml\" class=\"headerlink\" title=\"rule.xml\"></a>rule.xml</h5><p>不使用规则可不配置rule.xml (待研究.</p>\n<h4 id=\"启动mycat\"><a href=\"#启动mycat\" class=\"headerlink\" title=\"启动mycat\"></a>启动mycat</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mycat start</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>mycat启动后默认端口为8066，用户名、密码、数据库为<code>server.xml</code>中<code>user</code>的配置.</p>\n<p>例：</p>\n</blockquote>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">user</span> <span class=\"attr\">name</span>=<span class=\"string\">\"xxxx\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span>&gt;</span>xxxx<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"schemas\"</span>&gt;</span>box<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">user</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>mycat启动后，项目中配置数据源后即可使用.</p>\n</blockquote>\n<h4 id=\"使用多数据源\"><a href=\"#使用多数据源\" class=\"headerlink\" title=\"使用多数据源\"></a>使用多数据源</h4><p>同时链接mysql和mycat。</p>\n<p>参考  <a href=\"/2019/09/11/use-multi-datasource/\">多数据源配置</a></p>\n<h5 id=\"参考：\"><a href=\"#参考：\" class=\"headerlink\" title=\"参考：\"></a>参考：</h5><p><a href=\"https://github.com/xkcoding/spring-boot-demo\" target=\"_blank\" rel=\"noopener\">https://github.com/xkcoding/spring-boot-demo</a></p>\n<p><a href=\"http://www.mycat.io/document/mycat-definitive-guide.pdf\" target=\"_blank\" rel=\"noopener\">http://www.mycat.io/document/mycat-definitive-guide.pdf</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h3><blockquote>\n<p>因业务原因需要实现查询多库操作，目前多个库中表结构相同。</p>\n</blockquote>\n<blockquote>\n<p>同时使用mysql数据库和sqlserver数据库。</p>\n</blockquote>\n<h3 id=\"Sharding-jdbc方案\"><a href=\"#Sharding-jdbc方案\" class=\"headerlink\" title=\"Sharding-jdbc方案\"></a>Sharding-jdbc方案</h3><h4 id=\"项目配置\"><a href=\"#项目配置\" class=\"headerlink\" title=\"项目配置\"></a>项目配置</h4><p>依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.shardingsphere<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>sharding-jdbc-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;shardingsphere.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"配置sharding-jdbc参数\"><a href=\"#配置sharding-jdbc参数\" class=\"headerlink\" title=\"配置sharding-jdbc参数\"></a>配置sharding-jdbc参数</h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.jiahua.ddxdataserver.config;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.zaxxer.hikari.HikariDataSource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.shardingsphere.api.config.rule.ShardingRuleConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.shardingsphere.api.config.rule.TableRuleConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.shardingsphere.api.config.strategy.NoneShardingStrategyConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.shardingsphere.shardingjdbc.api.ShardingDataSourceFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Bean;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Primary;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.jdbc.datasource.DataSourceTransactionManager;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.sql.DataSource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Properties;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.concurrent.ConcurrentHashMap;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DataSourceShardingConfig</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 需要手动配置事务管理器</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DataSourceTransactionManager <span class=\"title\">transactionManager</span><span class=\"params\">(@Qualifier(<span class=\"string\">\"dataSource\"</span>)</span> DataSource dataSource) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> DataSourceTransactionManager(dataSource);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span>(name = <span class=\"string\">\"dataSource\"</span>)</span><br><span class=\"line\">    <span class=\"meta\">@Primary</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DataSource <span class=\"title\">dataSource</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> SQLException </span>&#123;</span><br><span class=\"line\">        ShardingRuleConfiguration shardingRuleConfig = <span class=\"keyword\">new</span> ShardingRuleConfiguration();</span><br><span class=\"line\">        <span class=\"comment\">// 设置分表策略</span></span><br><span class=\"line\">        shardingRuleConfig.getTableRuleConfigs().add(orderTableRule());</span><br><span class=\"line\">        shardingRuleConfig.setDefaultDataSourceName(<span class=\"string\">\"ds0\"</span>);</span><br><span class=\"line\">        shardingRuleConfig.setDefaultTableShardingStrategyConfig(<span class=\"keyword\">new</span> NoneShardingStrategyConfiguration());</span><br><span class=\"line\"></span><br><span class=\"line\">        Properties properties = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\">        properties.setProperty(<span class=\"string\">\"sql.show\"</span>, <span class=\"string\">\"true\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> ShardingDataSourceFactory.createDataSource(dataSourceMap(), shardingRuleConfig, <span class=\"keyword\">new</span> ConcurrentHashMap&lt;&gt;(<span class=\"number\">16</span>), properties);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> TableRuleConfiguration <span class=\"title\">orderTableRule</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        TableRuleConfiguration tableRule = <span class=\"keyword\">new</span> TableRuleConfiguration();</span><br><span class=\"line\">        <span class=\"comment\">// 设置逻辑表名</span></span><br><span class=\"line\">        tableRule.setLogicTable(<span class=\"string\">\"top_XXX\"</span>);</span><br><span class=\"line\">        <span class=\"comment\">// ds$&#123;0..1&#125;.t_order_$&#123;0..2&#125; 也可以写成 ds$-&gt;&#123;0..1&#125;.t_order_$-&gt;&#123;0..1&#125;</span></span><br><span class=\"line\">        tableRule.setActualDataNodes(<span class=\"string\">\"ds$&#123;0..2&#125;.top_order\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> tableRule;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> Map&lt;String, DataSource&gt; <span class=\"title\">dataSourceMap</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Map&lt;String, DataSource&gt; dataSourceMap = <span class=\"keyword\">new</span> HashMap&lt;&gt;(<span class=\"number\">16</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 配置第一个数据源</span></span><br><span class=\"line\">        HikariDataSource ds0 = <span class=\"keyword\">new</span> HikariDataSource();</span><br><span class=\"line\">        ds0.setDriverClassName(<span class=\"string\">\"com.microsoft.sqlserver.jdbc.SQLServerDriver\"</span>);</span><br><span class=\"line\">        ds0.setJdbcUrl(<span class=\"string\">\"jdbc:sqlserver://192.168.xx.xx:1433; DatabaseName=XXXX1\"</span>);</span><br><span class=\"line\">        ds0.setUsername(<span class=\"string\">\"XXXX\"</span>);</span><br><span class=\"line\">        ds0.setPassword(<span class=\"string\">\"XXXX\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 配置第二个数据源</span></span><br><span class=\"line\">        HikariDataSource ds1 = <span class=\"keyword\">new</span> HikariDataSource();</span><br><span class=\"line\">        ds1.setDriverClassName(<span class=\"string\">\"com.microsoft.sqlserver.jdbc.SQLServerDriver\"</span>);</span><br><span class=\"line\">        ds1.setJdbcUrl(<span class=\"string\">\"jdbc:sqlserver://192.168.xx.xx:1433; DatabaseName=XXXX2\"</span>);</span><br><span class=\"line\">        ds1.setUsername(<span class=\"string\">\"XXXX\"</span>);</span><br><span class=\"line\">        ds1.setPassword(<span class=\"string\">\"XXXX\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 配置第三个数据源</span></span><br><span class=\"line\">        HikariDataSource ds2 = <span class=\"keyword\">new</span> HikariDataSource();</span><br><span class=\"line\">        ds2.setDriverClassName(<span class=\"string\">\"com.microsoft.sqlserver.jdbc.SQLServerDriver\"</span>);</span><br><span class=\"line\">        ds2.setJdbcUrl(<span class=\"string\">\"jdbc:sqlserver://192.168.XX.XX:1433; DatabaseName=XXXX3\"</span>);</span><br><span class=\"line\">        ds2.setUsername(<span class=\"string\">\"XXXX\"</span>);</span><br><span class=\"line\">        ds2.setPassword(<span class=\"string\">\"XXXX\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        dataSourceMap.put(<span class=\"string\">\"ds0\"</span>, ds0);</span><br><span class=\"line\">        dataSourceMap.put(<span class=\"string\">\"ds1\"</span>, ds1);</span><br><span class=\"line\">        dataSourceMap.put(<span class=\"string\">\"ds2\"</span>, ds2);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dataSourceMap;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"存在问题\"><a href=\"#存在问题\" class=\"headerlink\" title=\"存在问题\"></a>存在问题</h5><blockquote>\n<p>使用后发现，sqlserver数据库中nvarchar类型无法对应java中String类型，报错如下：</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">org.springframework.dao.InvalidDataAccessApiUsageException: Error attempting to get column <span class=\"string\">'top_sku_properties_name'</span> from result set.  Cause: java.sql.SQLFeatureNotSupportedException: getNString</span><br><span class=\"line\">; getNString; nested exception is java.sql.SQLFeatureNotSupportedException: getNString</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>暂未找到解决办法，改用mycat.</p>\n</blockquote>\n<hr>\n<h3 id=\"Mycat方案\"><a href=\"#Mycat方案\" class=\"headerlink\" title=\"Mycat方案\"></a>Mycat方案</h3><p>mycat官网 <a href=\"http://mycat.io/\" target=\"_blank\" rel=\"noopener\">http://mycat.io/</a></p>\n<h4 id=\"mycat配置\"><a href=\"#mycat配置\" class=\"headerlink\" title=\"mycat配置\"></a>mycat配置</h4><h5 id=\"server-xml\"><a href=\"#server-xml\" class=\"headerlink\" title=\"server.xml\"></a>server.xml</h5><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span><br><span class=\"line\"><span class=\"comment\">&lt;!-- - - Licensed under the Apache License, Version 2.0 (the \"License\"); </span></span><br><span class=\"line\"><span class=\"comment\">\t- you may not use this file except in compliance with the License. - You </span></span><br><span class=\"line\"><span class=\"comment\">\tmay obtain a copy of the License at - - http://www.apache.org/licenses/LICENSE-2.0 </span></span><br><span class=\"line\"><span class=\"comment\">\t- - Unless required by applicable law or agreed to in writing, software - </span></span><br><span class=\"line\"><span class=\"comment\">\tdistributed under the License is distributed on an \"AS IS\" BASIS, - WITHOUT </span></span><br><span class=\"line\"><span class=\"comment\">\tWARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. - See the </span></span><br><span class=\"line\"><span class=\"comment\">\tLicense for the specific language governing permissions and - limitations </span></span><br><span class=\"line\"><span class=\"comment\">\tunder the License. --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE mycat:server SYSTEM \"server.dtd\"&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mycat:server</span> <span class=\"attr\">xmlns:mycat</span>=<span class=\"string\">\"http://io.mycat/\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">system</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"nonePasswordLogin\"</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span> <span class=\"comment\">&lt;!-- 0为需要密码登陆、1为不需要密码登陆 ,默认为0，设置为1则需要指定默认账户--&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"useHandshakeV10\"</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"useSqlStat\"</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span>  <span class=\"comment\">&lt;!-- 1为开启实时统计、0为关闭 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"useGlobleTableCheck\"</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span>  <span class=\"comment\">&lt;!-- 1为开启全加班一致性检测、0为关闭 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"sqlExecuteTimeout\"</span>&gt;</span>300<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span>  <span class=\"comment\">&lt;!-- SQL 执行超时 单位:秒--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"sequnceHandlerType\"</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"sequnceHandlerPattern\"&gt;(?:(\\s*next\\s+value\\s+for\\s*MYCATSEQ_(\\w+))(,|\\)|\\s)*)+&lt;/property&gt;--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--必须带有MYCATSEQ_或者 mycatseq_进入序列匹配流程 注意MYCATSEQ_有空格的情况--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"sequnceHandlerPattern\"</span>&gt;</span>(?:(\\s*next\\s+value\\s+for\\s*MYCATSEQ_(\\w+))(,|\\)|\\s)*)+<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"subqueryRelationshipCheck\"</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span> <span class=\"comment\">&lt;!-- 子查询中存在关联查询的情况下,检查关联字段中是否有分片字段 .默认 false --&gt;</span></span><br><span class=\"line\">      <span class=\"comment\">&lt;!--  &lt;property name=\"useCompression\"&gt;1&lt;/property&gt;--&gt;</span> <span class=\"comment\">&lt;!--1为开启mysql压缩协议--&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--  &lt;property name=\"fakeMySQLVersion\"&gt;5.6.20&lt;/property&gt;--&gt;</span> <span class=\"comment\">&lt;!--设置模拟的MySQL版本号--&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- &lt;property name=\"processorBufferChunk\"&gt;40960&lt;/property&gt; --&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- </span></span><br><span class=\"line\"><span class=\"comment\">\t&lt;property name=\"processors\"&gt;1&lt;/property&gt; </span></span><br><span class=\"line\"><span class=\"comment\">\t&lt;property name=\"processorExecutor\"&gt;32&lt;/property&gt; </span></span><br><span class=\"line\"><span class=\"comment\">\t --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--默认为type 0: DirectByteBufferPool | type 1 ByteBufferArena | type 2 NettyBufferPool --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"processorBufferPoolType\"</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--默认是65535 64K 用于sql解析时最大文本长度 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"maxStringLiteralLength\"&gt;65535&lt;/property&gt;--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"sequnceHandlerType\"&gt;0&lt;/property&gt;--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"backSocketNoDelay\"&gt;1&lt;/property&gt;--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"frontSocketNoDelay\"&gt;1&lt;/property&gt;--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"processorExecutor\"&gt;16&lt;/property&gt;--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t&lt;property name=\"serverPort\"&gt;8066&lt;/property&gt; &lt;property name=\"managerPort\"&gt;9066&lt;/property&gt; </span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t&lt;property name=\"idleTimeout\"&gt;300000&lt;/property&gt; &lt;property name=\"bindIp\"&gt;0.0.0.0&lt;/property&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t&lt;property name=\"dataNodeIdleCheckPeriod\"&gt;300000&lt;/property&gt; 5 * 60 * 1000L; //连接空闲检查</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t&lt;property name=\"frontWriteQueueSize\"&gt;4096&lt;/property&gt; &lt;property name=\"processors\"&gt;32&lt;/property&gt; --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--分布式事务开关，0为不过滤分布式事务，1为过滤分布式事务（如果分布式事务内只涉及全局表，则不过滤），2为不过滤分布式事务,但是记录分布式事务日志--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"handleDistributedTransactions\"</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t\t<span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\toff heap for merge/order/group/limit      1开启   0关闭</span></span><br><span class=\"line\"><span class=\"comment\">\t\t--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"useOffHeapForMerge\"</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t单位为m</span></span><br><span class=\"line\"><span class=\"comment\">\t\t--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"memoryPageSize\"</span>&gt;</span>64k<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t单位为k</span></span><br><span class=\"line\"><span class=\"comment\">\t\t--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"spillsFileBufferSize\"</span>&gt;</span>1k<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"useStreamOutput\"</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t单位为m</span></span><br><span class=\"line\"><span class=\"comment\">\t\t--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"systemReserveMemorySize\"</span>&gt;</span>384m<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--是否采用zookeeper协调切换  --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"useZKSwitch\"</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- XA Recovery Log日志路径 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"XARecoveryLogBaseDir\"&gt;./&lt;/property&gt;--&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- XA Recovery Log日志名称 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--&lt;property name=\"XARecoveryLogBaseName\"&gt;tmlog&lt;/property&gt;--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!--如果为 true的话 严格遵守隔离级别,不会在仅仅只有select语句的时候在事务中切换连接--&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"strictTxIsolation\"</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"useZKSwitch\"</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">system</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">user</span> <span class=\"attr\">name</span>=<span class=\"string\">\"xxxx\"</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span>&gt;</span>xxxx<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"schemas\"</span>&gt;</span>box<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">user</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mycat:server</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"schema-xml\"><a href=\"#schema-xml\" class=\"headerlink\" title=\"schema.xml\"></a>schema.xml</h5><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\"?&gt;</span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE mycat:schema SYSTEM \"schema.dtd\"&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mycat:schema</span> <span class=\"attr\">xmlns:mycat</span>=<span class=\"string\">\"http://io.mycat/\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">schema</span> <span class=\"attr\">name</span>=<span class=\"string\">\"box\"</span> <span class=\"attr\">checkSQLschema</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">sqlMaxLimit</span>=<span class=\"string\">\"100\"</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- 需要查询的表 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">table</span> <span class=\"attr\">name</span>=<span class=\"string\">\"top_xxx\"</span> <span class=\"attr\">dataNode</span>=<span class=\"string\">\"ds0,ds1,ds3\"</span> <span class=\"attr\">needAddLimit</span>=<span class=\"string\">\"false\"</span> /&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">table</span> <span class=\"attr\">name</span>=<span class=\"string\">\"top_xxxx\"</span> <span class=\"attr\">dataNode</span>=<span class=\"string\">\"ds0,ds1,ds3\"</span> <span class=\"attr\">needAddLimit</span>=<span class=\"string\">\"false\"</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">schema</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 数据库节点 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dataNode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ds0\"</span> <span class=\"attr\">dataHost</span>=<span class=\"string\">\"sqlserver1\"</span> <span class=\"attr\">database</span>=<span class=\"string\">\"xxx1\"</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dataNode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ds1\"</span> <span class=\"attr\">dataHost</span>=<span class=\"string\">\"sqlserver1\"</span> <span class=\"attr\">database</span>=<span class=\"string\">\"xxx2\"</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dataNode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ds3\"</span> <span class=\"attr\">dataHost</span>=<span class=\"string\">\"sqlserver1\"</span> <span class=\"attr\">database</span>=<span class=\"string\">\"xxx3\"</span> /&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- sqlserver数据库配置 以jdbc方式链接 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dataHost</span> <span class=\"attr\">name</span>=<span class=\"string\">\"sqlserver1\"</span> <span class=\"attr\">maxCon</span>=<span class=\"string\">\"1000\"</span> <span class=\"attr\">minCon</span>=<span class=\"string\">\"10\"</span> <span class=\"attr\">balance</span>=<span class=\"string\">\"0\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t  <span class=\"attr\">writeType</span>=<span class=\"string\">\"0\"</span> <span class=\"attr\">dbType</span>=<span class=\"string\">\"sqlserver\"</span> <span class=\"attr\">dbDriver</span>=<span class=\"string\">\"jdbc\"</span> &gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">heartbeat</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">heartbeat</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">connectionInitSql</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">connectionInitSql</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">writeHost</span> <span class=\"attr\">host</span>=<span class=\"string\">\"hostM1\"</span> <span class=\"attr\">url</span>=<span class=\"string\">\"jdbc:sqlserver://192.168.xx.xx:1433\"</span> <span class=\"attr\">user</span>=<span class=\"string\">\"xxxx\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t\t   <span class=\"attr\">password</span>=<span class=\"string\">\"xxxx\"</span> &gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">writeHost</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dataHost</span>&gt;</span></span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mycat:schema</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>server.xml</code>中<code>user</code>标签对应<code>schema.xml</code>中<code>writeHost</code>标签的<code>user</code>.</p>\n</blockquote>\n<h5 id=\"rule-xml\"><a href=\"#rule-xml\" class=\"headerlink\" title=\"rule.xml\"></a>rule.xml</h5><p>不使用规则可不配置rule.xml (待研究.</p>\n<h4 id=\"启动mycat\"><a href=\"#启动mycat\" class=\"headerlink\" title=\"启动mycat\"></a>启动mycat</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mycat start</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>mycat启动后默认端口为8066，用户名、密码、数据库为<code>server.xml</code>中<code>user</code>的配置.</p>\n<p>例：</p>\n</blockquote>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">user</span> <span class=\"attr\">name</span>=<span class=\"string\">\"xxxx\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span>&gt;</span>xxxx<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"schemas\"</span>&gt;</span>box<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">user</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>mycat启动后，项目中配置数据源后即可使用.</p>\n</blockquote>\n<h4 id=\"使用多数据源\"><a href=\"#使用多数据源\" class=\"headerlink\" title=\"使用多数据源\"></a>使用多数据源</h4><p>同时链接mysql和mycat。</p>\n<p>参考  <a href=\"/2019/09/11/use-multi-datasource/\">多数据源配置</a></p>\n<h5 id=\"参考：\"><a href=\"#参考：\" class=\"headerlink\" title=\"参考：\"></a>参考：</h5><p><a href=\"https://github.com/xkcoding/spring-boot-demo\" target=\"_blank\" rel=\"noopener\">https://github.com/xkcoding/spring-boot-demo</a></p>\n<p><a href=\"http://www.mycat.io/document/mycat-definitive-guide.pdf\" target=\"_blank\" rel=\"noopener\">http://www.mycat.io/document/mycat-definitive-guide.pdf</a></p>\n"}],"PostAsset":[{"_id":"source/_posts/build-blog/Githubpicture.png","slug":"Githubpicture.png","post":"ck0g281wp0001u0qod7c6cppd","modified":0,"renderable":0},{"_id":"source/_posts/hexo-github-pages-https/pagerule.png","slug":"pagerule.png","post":"ck0g281wx0005u0qo2b2u51yu","modified":0,"renderable":0}],"PostCategory":[{"post_id":"ck0g281wp0001u0qod7c6cppd","category_id":"ck0g281wv0003u0qo4i3ur60g","_id":"ck0g281x1000bu0qordfdpvni"},{"post_id":"ck0g281wy0006u0qo7uw0rmmz","category_id":"ck0g281x1000cu0qo9sj714rz","_id":"ck0g281x5000nu0qo906m87lw"},{"post_id":"ck0g281wy0006u0qo7uw0rmmz","category_id":"ck0g281x3000iu0qo9zgvfml5","_id":"ck0g281x6000pu0qorn9a9hzh"},{"post_id":"ck0g281wx0005u0qo2b2u51yu","category_id":"ck0g281wz0008u0qodbqnppf5","_id":"ck0g281x7000su0qostr5o03q"},{"post_id":"ck0g281wx0005u0qo2b2u51yu","category_id":"ck0g281x2000eu0qo8556190q","_id":"ck0g281x7000vu0qoujb7axlz"},{"post_id":"ck0g281wx0005u0qo2b2u51yu","category_id":"ck0g281x4000lu0qowpqpa11z","_id":"ck0g281x8000wu0qooxvthcyq"}],"PostTag":[{"post_id":"ck0g281wp0001u0qod7c6cppd","tag_id":"ck0g281ww0004u0qoss8cr2xs","_id":"ck0g281x3000gu0qoltty28io"},{"post_id":"ck0g281wp0001u0qod7c6cppd","tag_id":"ck0g281wz0009u0qomiz4tynb","_id":"ck0g281x3000hu0qomvxor327"},{"post_id":"ck0g281wp0001u0qod7c6cppd","tag_id":"ck0g281x2000du0qoseu6lzfr","_id":"ck0g281x4000ku0qob1tihxb0"},{"post_id":"ck0g281wt0002u0qogq73wugc","tag_id":"ck0g281x2000fu0qo4if14oh5","_id":"ck0g281x6000qu0qoo4zaoz9d"},{"post_id":"ck0g281wt0002u0qogq73wugc","tag_id":"ck0g281x4000ju0qowfci5kwn","_id":"ck0g281x6000ru0qo8lk20m99"},{"post_id":"ck0g281wt0002u0qogq73wugc","tag_id":"ck0g281x4000mu0qoht7vxnlh","_id":"ck0g281x7000uu0qoe7wt8ra8"},{"post_id":"ck0g281wx0005u0qo2b2u51yu","tag_id":"ck0g281ww0004u0qoss8cr2xs","_id":"ck0g281x90010u0qoc4rrm1je"},{"post_id":"ck0g281wx0005u0qo2b2u51yu","tag_id":"ck0g281x7000tu0qozke0cbi0","_id":"ck0g281x90011u0qolm6blnuq"},{"post_id":"ck0g281wx0005u0qo2b2u51yu","tag_id":"ck0g281x8000xu0qoyy69ta1y","_id":"ck0g281x90013u0qonajyqcss"},{"post_id":"ck0g281wx0005u0qo2b2u51yu","tag_id":"ck0g281x8000yu0qoglzj0ha7","_id":"ck0g281xa0014u0qom4q3gkca"},{"post_id":"ck0g281wy0006u0qo7uw0rmmz","tag_id":"ck0g281x8000zu0qo8jdxacro","_id":"ck0g281xb0018u0qo2loxsrtm"},{"post_id":"ck0g281wy0006u0qo7uw0rmmz","tag_id":"ck0g281x90012u0qox7gj4pk8","_id":"ck0g281xb0019u0qons7kf1po"},{"post_id":"ck0g281wy0006u0qo7uw0rmmz","tag_id":"ck0g281xa0015u0qojoauozsg","_id":"ck0g281xb001bu0qo99ooutp4"},{"post_id":"ck0g281wy0006u0qo7uw0rmmz","tag_id":"ck0g281xa0016u0qox0btej43","_id":"ck0g281xc001cu0qoag4fj7cv"},{"post_id":"ck0g281y3001tu0qounhf5en5","tag_id":"ck0g281y8001wu0qo5c9c9unt","_id":"ck0g281yd0022u0qofms3o729"},{"post_id":"ck0g281y3001tu0qounhf5en5","tag_id":"ck0g281ya001zu0qo7kt6velj","_id":"ck0g281yd0023u0qoqtgc5pfk"},{"post_id":"ck0g281z10024u0qouihztvn9","tag_id":"ck0g281z20025u0qomr19z9wh","_id":"ck0g281z5002au0qoa30dq7ko"},{"post_id":"ck0g281z10024u0qouihztvn9","tag_id":"ck0g281z30026u0qosd03lnwl","_id":"ck0g281z5002bu0qo8jqgbkik"},{"post_id":"ck0g281z10024u0qouihztvn9","tag_id":"ck0g281z30027u0qovs6rzmb0","_id":"ck0g281z6002cu0qod5lk9cbz"},{"post_id":"ck0g281z10024u0qouihztvn9","tag_id":"ck0g281z40028u0qocs1xsm7q","_id":"ck0g281z6002du0qok8st6yau"},{"post_id":"ck0g281z10024u0qouihztvn9","tag_id":"ck0g281z40029u0qozi4ob55m","_id":"ck0g281z6002eu0qof13kixhb"}],"Tag":[{"name":"Hexo","_id":"ck0g281ww0004u0qoss8cr2xs"},{"name":"博客","_id":"ck0g281wz0009u0qomiz4tynb"},{"name":"Node.js","_id":"ck0g281x2000du0qoseu6lzfr"},{"name":"themes","_id":"ck0g281x2000fu0qo4if14oh5"},{"name":"cactus","_id":"ck0g281x4000ju0qowfci5kwn"},{"name":"hexo","_id":"ck0g281x4000mu0qoht7vxnlh"},{"name":"Blog","_id":"ck0g281x7000tu0qozke0cbi0"},{"name":"Https","_id":"ck0g281x8000xu0qoyy69ta1y"},{"name":"github pages","_id":"ck0g281x8000yu0qoglzj0ha7"},{"name":"2018","_id":"ck0g281x8000zu0qo8jdxacro"},{"name":"joehisaishi","_id":"ck0g281x90012u0qox7gj4pk8"},{"name":"wdo","_id":"ck0g281xa0015u0qojoauozsg"},{"name":"久石让","_id":"ck0g281xa0016u0qox0btej43"},{"name":"layui","_id":"ck0g281xa0017u0qox4d6msji"},{"name":"jquery","_id":"ck0g281xb001au0qohax2j9c7"},{"name":"serializejson","_id":"ck0g281xc001du0qo3h4q8kuw"},{"name":"jenkins","_id":"ck0g281xc001eu0qohox0mkx5"},{"name":"自动化构建","_id":"ck0g281xd001hu0qooi52ei8j"},{"name":"自动部署","_id":"ck0g281xd001ju0qoxra6d78p"},{"name":"CI/CD","_id":"ck0g281xe001ku0qouolynehz"},{"name":"持续集成","_id":"ck0g281xe001lu0qozuenrt5c"},{"name":"持续部署","_id":"ck0g281xe001mu0qofzjp3xtp"},{"name":"springboot","_id":"ck0g281y8001wu0qo5c9c9unt"},{"name":"多数据源","_id":"ck0g281ya001zu0qo7kt6velj"},{"name":"mycat","_id":"ck0g281z20025u0qomr19z9wh"},{"name":"database","_id":"ck0g281z30026u0qosd03lnwl"},{"name":"sharding-jdbc","_id":"ck0g281z30027u0qovs6rzmb0"},{"name":"分库分表","_id":"ck0g281z40028u0qocs1xsm7q"},{"name":"sqlserver","_id":"ck0g281z40029u0qozi4ob55m"}]}}